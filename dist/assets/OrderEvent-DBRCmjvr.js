import{ag as A,y as E,r as n,z as I,j as e}from"./index-pZ9xQgMg.js";import{P as R}from"./PageContainer-LYar8IhV.js";import{B as N}from"./Breadcrumb-CRa5l2zq.js";import{P as H}from"./ParentCard-BOCKQ1T0.js";import{B as U}from"./BlankCard-jsHF22Za.js";import{T as M,L as S,F as T,K as B}from"./LastPage-CMnMK6Rb.js";import{K as k}from"./KeyboardArrowRight-D7dm8ctS.js";import{f as D}from"./Utils-eYPio9SP.js";import{A as F}from"./apiConstants-ChAepINk.js";import{T as K}from"./TableContainer-DO_vUeZK.js";import{T as W,a as z,b as g,c as r,d as q}from"./TableRow-D5xGC-Fx.js";import{T as o}from"./Typography-PCIzasSl.js";import{C as J}from"./Chip-F9KGUN77.js";import{T as G}from"./TablePagination-DLW_6SZX.js";import{u as Q}from"./Paper-Bglc4K2l.js";import{B as V}from"./Box-DgOhk5yP.js";import{I as u}from"./IconButton-D8l5j-3s.js";import"./Grid2-TVAQUeLW.js";import"./useSlotProps-D9QVx9CU.js";import"./Link-DmIxGPWX.js";import"./IconCircle-CU5CO1wM.js";import"./createReactComponent-C7i1OeoA.js";import"./Card-Dnm4-j67.js";import"./CardHeader-YzZ0dXBA.js";import"./useSlot-C-z2829C.js";import"./Divider-BxeHuQda.js";import"./dividerClasses-BO-YFw3q.js";import"./CardContent-DHXKlgZi.js";import"./createSvgIcon-Df6LfCnN.js";import"./mergeSlotProps-D2utqxEY.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-DuuGdQhb.js";import"./useControlled-kCJ_Peco.js";import"./index-DuUv4AGY.js";import"./index-DT2YvziZ.js";import"./KeyboardArrowRight-CDfWkglB.js";import"./LastPage-r6NFrBik.js";import"./Select-KnVOJfU6.js";import"./Menu-kcqCS8x-.js";import"./Popover-ti3EBHaH.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-CByEer0C.js";import"./utils--BW9XhXC.js";import"./getReactElementRef-BDXd3hfF.js";import"./Modal-ETINFcPv.js";import"./Portal-HPxiTNUe.js";import"./List-BgcNoc8S.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D34Ydy4-.js";import"./MenuItem-BUpQ2083.js";import"./listItemTextClasses-B-a-vnZw.js";import"./Toolbar-Cf1pwV59.js";import"./CircularProgress-KhQwCvJ5.js";const X=F.apiUrl;function Y(j){const l=Q(),{count:p,page:a,rowsPerPage:h,onPageChange:c}=j,_=i=>{c(i,0)},b=i=>{c(i,a-1)},f=i=>{c(i,a+1)},v=i=>{c(i,Math.max(0,Math.ceil(p/h)-1))};return e.jsxs(V,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:_,disabled:a===0,"aria-label":"first page",children:l.direction==="rtl"?e.jsx(S,{}):e.jsx(T,{})}),e.jsx(u,{onClick:b,disabled:a===0,"aria-label":"previous page",children:l.direction==="rtl"?e.jsx(k,{}):e.jsx(B,{})}),e.jsx(u,{onClick:f,disabled:a>=Math.ceil(p/h)-1,"aria-label":"next page",children:l.direction==="rtl"?e.jsx(B,{}):e.jsx(k,{})}),e.jsx(u,{onClick:v,disabled:a>=Math.ceil(p/h)-1,"aria-label":"last page",children:l.direction==="rtl"?e.jsx(T,{}):e.jsx(S,{})})]})}const Z=[{to:"/",title:"Home"},{title:"Order History"}],st=()=>{const{order_id:j}=A(),l=E(),[p,a]=n.useState(""),[h,c]=n.useState(""),[_,b]=n.useState("");n.useEffect(()=>{const s=localStorage.getItem("data_success_login");if(s){const t=JSON.parse(s);console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),a(t.user_name),c(t.session_level),b(t.session_name),f(j),t.session_level.toLowerCase()==="partner"?t.session_name.split("-")[0]:t.session_level.toLowerCase()}else l("/auth/login")},[]);const f=async s=>{let t=X+"order/event/id/"+s;I.get(t).then(P=>{i(P.data)}).catch(P=>{console.log(P)})},[v,i]=n.useState([]),x=v,[d,C]=n.useState(0),[m,O]=n.useState(10),y=d>0?Math.max(0,(1+d)*m-x.length):0,w=(s,t)=>{C(t)},L=s=>{O(parseInt(s.target.value,10)),C(0)};return e.jsxs(R,{title:"Order History",description:"this is order history page",children:[e.jsx(N,{title:"Order History",items:Z}),e.jsx(H,{title:"History List",children:e.jsx(U,{children:e.jsx(K,{children:e.jsxs(W,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Seq"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Order ID"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Event Name"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Date"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Username"})})]})}),e.jsxs(q,{children:[(m>0?x.slice(d*m,d*m+m):x).map((s,t)=>e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:t+1})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.order_id})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(J,{color:s.event_name==="Approve Order"?"success":s.event_name==="New Order"?"warning":(s.event_name==="Confirm Order","secondary"),sx:{borderRadius:"6px"},size:"small",label:s.event_name})})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:D(s.event_date)})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.username})})]},t)),y>0&&e.jsx(g,{style:{height:53*y},children:e.jsx(r,{colSpan:5})})]}),e.jsx(M,{children:e.jsx(g,{children:e.jsx(G,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:x.length,rowsPerPage:m,page:d,SelectProps:{native:!0},onPageChange:w,onRowsPerPageChange:L,ActionsComponent:Y})})})]})})})})]})};export{st as default};
