import{r as i,j as t,aN as f,y as F}from"./index-D0CpDmcp.js";import{B as k}from"./Breadcrumb-BVcp9-n_.js";import{P as E}from"./PageContainer-GyGJwSoy.js";import{A as P}from"./apiConstants-ChAepINk.js";import{C as c}from"./CustomFormLabel-DDI7DE8r.js";import{C as u}from"./CustomTextField-Cjc4ANgr.js";import{C as B}from"./CustomSelect-CExbCVLD.js";import{f as A}from"./index-BPskgXx8.js";import{B as g}from"./Box-YfWKO8y5.js";import{S as D}from"./Stack-Br4H6Iex.js";import{T as S}from"./Typography-CxjCbjeZ.js";import{B as b}from"./Button-CgUWpLWI.js";import{D as _}from"./Divider-cwsqb4Sr.js";import{M as v}from"./MenuItem-CuGaY2Hq.js";import{G as d}from"./Grid2-B3gzDQ3y.js";import{A as z}from"./Alert-GQVafBkl.js";import{B as I}from"./BlankCard-C5pX7qij.js";import{C as M}from"./CardContent-B3dzlDvA.js";import"./Paper-DYTAYSZ1.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./createReactComponent-3iThfHP-.js";import"./TextField-BL7FkBIN.js";import"./useSlot-CFWOFHMb.js";import"./useId-BnzzJGZL.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./mergeSlotProps-EoW_Nak3.js";import"./Modal-BGPPYg_F.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./useControlled-DdQeg7Rb.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./FormControl-Ds0TTNG5.js";import"./index-DT2YvziZ.js";import"./createStack-D1qoiK_y.js";import"./CircularProgress-DwEGvCDN.js";import"./dividerClasses-Cmg2xQcr.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Close-DI9m-hsf.js";import"./IconButton-BxWHF3Dm.js";import"./Card-CBAn0QXF.js";const q=i.createContext(void 0),R=({children:y})=>{const[m,l]=i.useState([]),[x,h]=i.useState(!0),[s]=i.useState(null);i.useEffect(()=>{(async()=>{try{const e=await f.get(P.apiUrl+"products");l(e.data),h(!1)}catch{h(!1)}})()},[]);const p=async n=>{try{await f.delete("/api/data/invoicedata/deleteinvoice",{data:{Seq:n}}),l(e=>e.filter(r=>r.seq!==n))}catch(e){console.error("Error deleting products:",e)}},o=async n=>{try{const r=(await f.post(P.apiUrl+"products",n)).data;l(a=>[...a,r])}catch(e){console.error("Error adding products:",e)}},C=async n=>{try{const r=(await f.put("/api/data/invoicedata/updateinvoice",n)).data;l(a=>a.map(j=>j.seq===r.Seq?r:j))}catch(e){console.error("Error updating products:",e)}};return t.jsx(q.Provider,{value:{products:m,loading:x,error:s,deleteProduct:p,addProduct:o,updateProduct:C},children:y})},W=()=>{const{addProduct:y,products:m}=i.useContext(q),[l,x]=i.useState(!1),h=F(),[s,p]=i.useState({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"Ready"});i.useEffect(()=>{if(m.length>0){const r=m[m.length-1].seq;p(a=>({...a,seq:r+1}))}else p(r=>({...r,seq:1}))},[m]);const o=r=>{const{name:a,value:j}=r.target;p(w=>({...w,[a]:j}))},C=async r=>{r.preventDefault();try{await y(s),p({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"Ready"}),x(!0),setTimeout(()=>{x(!1)},5e3),h("/product/master")}catch(a){console.error("Error adding product:",a)}},e=A(new Date,"EEEE, MMMM dd, yyyy");return t.jsx(t.Fragment,{children:t.jsx("form",{onSubmit:C,children:t.jsxs(g,{children:[t.jsxs(D,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[t.jsxs(S,{variant:"h5",children:["# ",s.seq]}),t.jsxs(g,{display:"flex",gap:1,children:[t.jsx(b,{variant:"outlined",color:"error",onClick:()=>{h("/product/master")},children:"Cancel"}),t.jsx(b,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),t.jsx(_,{}),t.jsxs(D,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsxs(g,{children:[t.jsx(c,{htmlFor:"status",children:"Status"}),t.jsxs(B,{labelId:"status",id:"status",name:"status",value:s.status,onChange:o,children:[t.jsx(v,{value:"Ready",children:"Ready"}),t.jsx(v,{value:"Used",children:"Used"}),t.jsx(v,{value:"Close",children:"Close"})]})]}),t.jsxs(g,{textAlign:"right",children:[t.jsx(c,{htmlFor:"demo-simple-select",children:"Create Date"}),t.jsxs(S,{variant:"body1",children:[" ",e]})]})]}),t.jsx(_,{}),t.jsxs(d,{container:!0,spacing:3,mb:4,children:[t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"ProductID",children:"ProductID"}),t.jsx(u,{id:"package_id",name:"package_id",value:s.package_id,onChange:o,fullWidth:!0})]}),t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"ProductName",sx:{mt:{xs:0,sm:3}},children:"Product Name"}),t.jsx(u,{id:"package_name",name:"package_name",value:s.package_name,onChange:o,fullWidth:!0})]}),t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"Country",sx:{mt:0},children:"Country"}),t.jsx(u,{id:"country",name:"country",value:s.country,onChange:o,fullWidth:!0})]}),t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"Days",sx:{mt:0},children:"Days"}),t.jsx(u,{id:"days",name:"days",value:s.days,onChange:o,fullWidth:!0,inputProps:{type:"number"}})]}),t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"Quota",sx:{mt:0},children:"Quota"}),t.jsx(u,{id:"quota",name:"quota",value:s.quota,onChange:o,fullWidth:!0})]}),t.jsxs(d,{size:{xs:12,sm:6},children:[t.jsx(c,{htmlFor:"SellingPrice",sx:{mt:0},children:"Selling Price"}),t.jsx(u,{id:"selling_price",name:"selling_price",value:s.selling_price,onChange:o,fullWidth:!0,inputProps:{type:"number"}})]})]}),l&&t.jsx(z,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Product added successfully."})]})})})},N=[{to:"/",title:"Home"},{title:"Product Create"}],Ut=()=>t.jsx(R,{children:t.jsxs(E,{title:"Create Product",description:"this is Create Product",children:[t.jsx(k,{title:"Create Product",items:N}),t.jsx(I,{children:t.jsx(M,{children:t.jsx(W,{})})})]})});export{Ut as default};
