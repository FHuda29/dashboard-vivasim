import{y as E,r as a,j as e,L as z}from"./index-bBoaL7NX.js";import{T as O,L as I,F as w,K as L}from"./LastPage-CUO0XoGI.js";import{K as B}from"./KeyboardArrowRight-CL0uG8E4.js";import{P as U}from"./PageContainer-ClH7HaBW.js";import{P as H}from"./ParentCard-CFe-nEgX.js";import{B as q}from"./BlankCard-BfHU7njI.js";import{n as x}from"./Utils-DZtz8wsc.js";import{i as A}from"./axios-MmGZYXFl.js";import{j as G}from"./index-VWaDGczM.js";import{B as T}from"./Box-Cbtftx36.js";import{S as J}from"./Stack-DONMPCRZ.js";import{T as Q}from"./TextField-CNoxaAXv.js";import{I as V}from"./InputAdornment-DDw9KCxJ.js";import{I as X}from"./IconSearch-8WAl2z6L.js";import{B as D}from"./Button-2ihUhOt_.js";import{I as Y}from"./IconTrash-B1FRgie-.js";import{T as Z}from"./TableContainer-OLbhJ7zr.js";import{T as $,a as ee,b,c as n,d as te}from"./TableRow-Zqkg4FIQ.js";import{T as r}from"./Typography-B41TU7cT.js";import{T as se}from"./TablePagination-DdevPbi4.js";import{u as ne}from"./Paper-CEo52ZYq.js";import{I as f}from"./IconButton-6ozhzS-w.js";import"./createSvgIcon-DcL-YXBs.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./createReactComponent-BVlLIvSm.js";import"./CircularProgress-BIjyWvHZ.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";function re(g){const c=ne(),{count:j,page:p,rowsPerPage:m,onPageChange:o}=g,P=i=>{o(i,0)},v=i=>{o(i,p-1)},C=i=>{o(i,p+1)},_=i=>{o(i,Math.max(0,Math.ceil(j/m)-1))};return e.jsxs(T,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(f,{onClick:P,disabled:p===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(I,{}):e.jsx(w,{})}),e.jsx(f,{onClick:v,disabled:p===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx(B,{}):e.jsx(L,{})}),e.jsx(f,{onClick:C,disabled:p>=Math.ceil(j/m)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(L,{}):e.jsx(B,{})}),e.jsx(f,{onClick:_,disabled:p>=Math.ceil(j/m)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(w,{}):e.jsx(I,{})})]})}const bt=()=>{const g=E(),[c,j]=a.useState(""),[p,m]=a.useState(""),o=s=>typeof s=="string"?parseFloat(s.replace(/,/g,"")):s;a.useEffect(()=>{const s=localStorage.getItem("token");if(s){const t=G(s);if(console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),j(t.session_level),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"){const l=t.session_name.split("-")[0];m(l),v(t.session_name)}else m(t.session_name),P()}else g("/auth/login")},[]);const P=async()=>{A.get("partners").then(t=>{S(t.data)}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?g("/auth/login"):console.log(t)})},v=async s=>{let t="partners/cobrand/"+s;A.get(t).then(l=>{S(l.data)}).catch(l=>{l.response&&l.response.status===403||l.response.status===401?g("/auth/login"):console.log(l)})},[C,_]=a.useState(""),[i,ie]=a.useState(!1),[ae,F]=a.useState(!1),R=()=>{F(!0)},[M,S]=a.useState([]),d=M,[u,k]=a.useState(0),[h,K]=a.useState(10),y=u>0?Math.max(0,(1+u)*h-d.length):0,N=(s,t)=>{k(t)},W=s=>{K(parseInt(s.target.value,10)),k(0)};return e.jsx(U,{title:"Partner",description:"this is partner page",children:e.jsxs(H,{title:"Partner List",children:[e.jsx(T,{mb:2,children:e.jsxs(J,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[e.jsx(Q,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:C,onChange:s=>_(s.target.value),InputProps:{endAdornment:e.jsx(V,{position:"end",children:e.jsx(X,{size:"16"})})}}),c.toLowerCase()==="web-admin"||c.toLowerCase()==="super-admin"?e.jsxs(T,{display:"flex",gap:1,children:[i&&e.jsx(D,{variant:"outlined",color:"error",onClick:R,startIcon:e.jsx(Y,{width:18}),children:"Delete All"}),e.jsx(D,{variant:"contained",color:"primary",component:z,to:"/apps/partner/create",children:"Add Partner"})]}):e.jsx(e.Fragment,{})]})}),e.jsx(q,{children:e.jsx(Z,{children:e.jsxs($,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(ee,{children:e.jsxs(b,{children:[e.jsx(n,{children:e.jsx(r,{variant:"subtitle2",children:"Partner ID	"})}),e.jsx(n,{children:e.jsx(r,{variant:"subtitle2",children:"Partner Name"})}),e.jsx(n,{children:e.jsx(r,{variant:"subtitle2",children:"Partner PIC"})}),e.jsx(n,{children:e.jsx(r,{variant:"subtitle2",children:"Payment Type"})}),e.jsx(n,{align:"center",children:e.jsx(r,{variant:"subtitle2",children:"Total Invoice"})}),e.jsx(n,{align:"center",children:e.jsx(r,{variant:"subtitle2",children:"Base Price"})}),e.jsx(n,{align:"center",children:e.jsx(r,{variant:"subtitle2",children:"Total Profit"})})]})}),e.jsxs(te,{children:[(h>0?d.slice(u*h,u*h+h):d).map((s,t)=>e.jsxs(b,{children:[e.jsx(n,{children:e.jsx(r,{variant:"caption",children:s.cobrand_id})}),e.jsx(n,{children:e.jsx(r,{variant:"caption",children:s.cobrand_name})}),e.jsx(n,{children:e.jsx(r,{variant:"caption",children:s.pic})}),e.jsx(n,{children:e.jsx(r,{variant:"caption",children:s.payment_type})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"caption",children:x(s.total_invoice)})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"caption",children:x(s.total_base_price)})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"caption",children:x(s.profit)})})]},t)),e.jsxs(b,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(n,{colSpan:4,children:e.jsx(r,{variant:"subtitle2",fontWeight:"bold",children:"Total"})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"subtitle2",fontWeight:"bold",children:x(d.reduce((s,t)=>s+o(t.total_invoice),0))})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"subtitle2",fontWeight:"bold",children:x(d.reduce((s,t)=>s+o(t.total_base_price),0))})}),e.jsx(n,{align:"right",children:e.jsx(r,{variant:"subtitle2",fontWeight:"bold",children:x(d.reduce((s,t)=>s+o(t.profit),0))})})]}),y>0&&e.jsx(b,{style:{height:53*y},children:e.jsx(n,{colSpan:1})})]}),e.jsx(O,{children:e.jsx(b,{children:e.jsx(se,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:1,count:d.length,rowsPerPage:h,page:u,SelectProps:{native:!0},onPageChange:N,onRowsPerPageChange:W,ActionsComponent:re})})})]})})})]})})};export{bt as default};
