import{ag as A,y as E,r as n,z as I,j as e}from"./index-D0CpDmcp.js";import{P as R}from"./PageContainer-GyGJwSoy.js";import{B as N}from"./Breadcrumb-BVcp9-n_.js";import{P as H}from"./ParentCard-Dds6eSz-.js";import{B as U}from"./BlankCard-C5pX7qij.js";import{T as M,L as S,F as T,K as B}from"./LastPage-CM86qExL.js";import{K as k}from"./KeyboardArrowRight-Bwz3qybY.js";import{f as D}from"./Utils-DY8x-pVc.js";import{A as F}from"./apiConstants-ChAepINk.js";import{T as K}from"./TableContainer-DwViaeU_.js";import{T as W,a as z,b as g,c as r,d as q}from"./TableRow-BZxns5TQ.js";import{T as o}from"./Typography-CxjCbjeZ.js";import{C as J}from"./Chip-C2vBKMax.js";import{T as G}from"./TablePagination-_GCCBNyA.js";import{u as Q}from"./Paper-DYTAYSZ1.js";import{B as V}from"./Box-YfWKO8y5.js";import{I as u}from"./IconButton-BxWHF3Dm.js";import"./Grid2-B3gzDQ3y.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./createReactComponent-3iThfHP-.js";import"./Card-CBAn0QXF.js";import"./CardHeader-BR6S_Hd-.js";import"./useSlot-CFWOFHMb.js";import"./Divider-cwsqb4Sr.js";import"./dividerClasses-Cmg2xQcr.js";import"./CardContent-B3dzlDvA.js";import"./createSvgIcon-DvMzRnlg.js";import"./mergeSlotProps-EoW_Nak3.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BnzzJGZL.js";import"./useControlled-DdQeg7Rb.js";import"./index-BPskgXx8.js";import"./index-DT2YvziZ.js";import"./KeyboardArrowRight-DiTjW17E.js";import"./LastPage-CYB3mln0.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./Modal-BGPPYg_F.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./MenuItem-CuGaY2Hq.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Toolbar-C5Hj9sbR.js";import"./CircularProgress-DwEGvCDN.js";const X=F.apiUrl;function Y(j){const l=Q(),{count:p,page:a,rowsPerPage:h,onPageChange:c}=j,_=i=>{c(i,0)},b=i=>{c(i,a-1)},f=i=>{c(i,a+1)},v=i=>{c(i,Math.max(0,Math.ceil(p/h)-1))};return e.jsxs(V,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:_,disabled:a===0,"aria-label":"first page",children:l.direction==="rtl"?e.jsx(S,{}):e.jsx(T,{})}),e.jsx(u,{onClick:b,disabled:a===0,"aria-label":"previous page",children:l.direction==="rtl"?e.jsx(k,{}):e.jsx(B,{})}),e.jsx(u,{onClick:f,disabled:a>=Math.ceil(p/h)-1,"aria-label":"next page",children:l.direction==="rtl"?e.jsx(B,{}):e.jsx(k,{})}),e.jsx(u,{onClick:v,disabled:a>=Math.ceil(p/h)-1,"aria-label":"last page",children:l.direction==="rtl"?e.jsx(T,{}):e.jsx(S,{})})]})}const Z=[{to:"/",title:"Home"},{title:"Order History"}],st=()=>{const{order_id:j}=A(),l=E(),[p,a]=n.useState(""),[h,c]=n.useState(""),[_,b]=n.useState("");n.useEffect(()=>{const s=localStorage.getItem("data_success_login");if(s){const t=JSON.parse(s);console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),a(t.user_name),c(t.session_level),b(t.session_name),f(j),t.session_level.toLowerCase()==="partner"?t.session_name.split("-")[0]:t.session_level.toLowerCase()}else l("/auth/login")},[]);const f=async s=>{let t=X+"order/event/id/"+s;I.get(t).then(P=>{i(P.data)}).catch(P=>{console.log(P)})},[v,i]=n.useState([]),x=v,[d,C]=n.useState(0),[m,O]=n.useState(10),y=d>0?Math.max(0,(1+d)*m-x.length):0,w=(s,t)=>{C(t)},L=s=>{O(parseInt(s.target.value,10)),C(0)};return e.jsxs(R,{title:"Order History",description:"this is order history page",children:[e.jsx(N,{title:"Order History",items:Z}),e.jsx(H,{title:"History List",children:e.jsx(U,{children:e.jsx(K,{children:e.jsxs(W,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Seq"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Order ID"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Event Name"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Date"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Username"})})]})}),e.jsxs(q,{children:[(m>0?x.slice(d*m,d*m+m):x).map((s,t)=>e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:t+1})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.order_id})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(J,{color:s.event_name==="Approve Order"?"success":s.event_name==="New Order"?"warning":(s.event_name==="Confirm Order","secondary"),sx:{borderRadius:"6px"},size:"small",label:s.event_name})})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:D(s.event_date)})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.username})})]},t)),y>0&&e.jsx(g,{style:{height:53*y},children:e.jsx(r,{colSpan:5})})]}),e.jsx(M,{children:e.jsx(g,{children:e.jsx(G,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:x.length,rowsPerPage:m,page:d,SelectProps:{native:!0},onPageChange:w,onRowsPerPageChange:L,ActionsComponent:Y})})})]})})})})]})};export{st as default};
