import{af as E,y as I,r as l,j as e}from"./index-bBoaL7NX.js";import{P as R}from"./PageContainer-ClH7HaBW.js";import{P as A}from"./ParentCard-CFe-nEgX.js";import{B as N}from"./BlankCard-BfHU7njI.js";import{T as M,L as y,F as T,K as k}from"./LastPage-CUO0XoGI.js";import{K as w}from"./KeyboardArrowRight-CL0uG8E4.js";import{f as D}from"./Utils-DZtz8wsc.js";import{i as F}from"./axios-MmGZYXFl.js";import{j as K}from"./index-VWaDGczM.js";import{T as U}from"./TableContainer-OLbhJ7zr.js";import{T as W,a as H,b as j,c as o,d as q}from"./TableRow-Zqkg4FIQ.js";import{T as r}from"./Typography-B41TU7cT.js";import{C as z}from"./Chip-Bm7HxxC0.js";import{T as G}from"./TablePagination-DdevPbi4.js";import{u as J}from"./Paper-CEo52ZYq.js";import{B as Q}from"./Box-Cbtftx36.js";import{I as u}from"./IconButton-6ozhzS-w.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./createSvgIcon-DcL-YXBs.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";import"./CircularProgress-BIjyWvHZ.js";function V(b){const n=J(),{count:h,page:i,rowsPerPage:x,onPageChange:c}=b,C=a=>{c(a,0)},f=a=>{c(a,i-1)},v=a=>{c(a,i+1)},P=a=>{c(a,Math.max(0,Math.ceil(h/x)-1))};return e.jsxs(Q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:C,disabled:i===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(y,{}):e.jsx(T,{})}),e.jsx(u,{onClick:f,disabled:i===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(w,{}):e.jsx(k,{})}),e.jsx(u,{onClick:v,disabled:i>=Math.ceil(h/x)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(k,{}):e.jsx(w,{})}),e.jsx(u,{onClick:P,disabled:i>=Math.ceil(h/x)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(T,{}):e.jsx(y,{})})]})}const Ye=()=>{const{order_id:b}=E(),n=I(),[h,i]=l.useState(""),[x,c]=l.useState(""),[C,f]=l.useState("");l.useEffect(()=>{const s=localStorage.getItem("token");if(s){const t=K(s);console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),i(t.user_name),c(t.session_level),f(t.session_name),v(b),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"?t.session_name.split("-")[0]:t.session_level.toLowerCase()}else n("/auth/login")},[]);const v=async s=>{let t="order/event/id/"+s;F.get(t).then(d=>{a(d.data)}).catch(d=>{d.response&&d.response.status===403||d.response.status===401?n("/auth/login"):console.log(d)})},[P,a]=l.useState([]),g=P,[p,_]=l.useState(0),[m,B]=l.useState(10),S=p>0?Math.max(0,(1+p)*m-g.length):0,L=(s,t)=>{_(t)},O=s=>{B(parseInt(s.target.value,10)),_(0)};return e.jsx(R,{title:"Order History",description:"this is order history page",children:e.jsx(A,{title:"History List",children:e.jsx(N,{children:e.jsx(U,{children:e.jsxs(W,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(H,{children:e.jsxs(j,{children:[e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Seq"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Order ID"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Event Name"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Date"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Username"})})]})}),e.jsxs(q,{children:[(m>0?g.slice(p*m,p*m+m):g).map((s,t)=>e.jsxs(j,{children:[e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:t+1})}),e.jsx(o,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.order_id})}),e.jsx(o,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(z,{color:s.event_name==="Approve Order"?"success":s.event_name==="New Order"?"warning":(s.event_name==="Confirm Order","secondary"),sx:{borderRadius:"6px"},size:"small",label:s.event_name})})}),e.jsx(o,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:D(s.event_date)})}),e.jsx(o,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.username})})]},t)),S>0&&e.jsx(j,{style:{height:53*S},children:e.jsx(o,{colSpan:5})})]}),e.jsx(M,{children:e.jsx(j,{children:e.jsx(G,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:g.length,rowsPerPage:m,page:p,SelectProps:{native:!0},onPageChange:L,onRowsPerPageChange:O,ActionsComponent:V})})})]})})})})})};export{Ye as default};
