import{ag as A,y as E,r as n,z as I,j as e}from"./index-q1gJB5H0.js";import{P as R}from"./PageContainer-ShAoTXqo.js";import{B as N}from"./Breadcrumb-Sx0jSoUO.js";import{P as H}from"./ParentCard-BoIC9gk3.js";import{B as U}from"./BlankCard-CQVnRHeI.js";import{T as M,L as S,F as T,K as B}from"./LastPage-BXapEql4.js";import{K as k}from"./KeyboardArrowRight-CJokzGPg.js";import{f as D}from"./Utils-BDQZAxTQ.js";import{A as F}from"./apiConstants-ChAepINk.js";import{T as K}from"./TableContainer-BZE4S_Sa.js";import{T as W,a as z,b as g,c as r,d as q}from"./TableRow-Coc6NZuK.js";import{T as o}from"./Typography-BxNQAu-e.js";import{C as J}from"./Chip-J76kHj1Q.js";import{T as G}from"./TablePagination-CivVj9w3.js";import{u as Q}from"./Paper-BfYJvf2K.js";import{B as V}from"./Box-DjbeIn6R.js";import{I as u}from"./IconButton-Dqm0TkKE.js";import"./Grid2-CqZBoIec.js";import"./useSlotProps-fxj6j4ji.js";import"./Link-CbpODTtF.js";import"./IconCircle-BrnHHpVV.js";import"./createReactComponent-4CU5_L6_.js";import"./Card-bW_5XQOp.js";import"./CardHeader-D3eDM15l.js";import"./useSlot-C5ueERyv.js";import"./Divider-D_QCNZIA.js";import"./dividerClasses-BBaEuH8O.js";import"./CardContent-DWdd_6p9.js";import"./createSvgIcon-BjFntfiU.js";import"./mergeSlotProps-02bNjKG-.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-SD238GYo.js";import"./useControlled-2SXrPK_C.js";import"./index-CFaCQM0R.js";import"./index-DT2YvziZ.js";import"./KeyboardArrowRight-BYTEHBB3.js";import"./LastPage-BDJO45m9.js";import"./Select-Be-xDOsD.js";import"./Menu-CI0qCauS.js";import"./Popover-B2Kr2jsd.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-NO3rZCFB.js";import"./utils-NaTNKqhR.js";import"./getReactElementRef-BT4zc5ME.js";import"./Modal-BICTQXNK.js";import"./Portal-CFBZdEcL.js";import"./List-CdKlZLq8.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CXKl78CG.js";import"./MenuItem-C7G2QaZb.js";import"./listItemTextClasses-BL7DomhZ.js";import"./Toolbar-BrCMVVJL.js";import"./CircularProgress-C7fJ-WBe.js";const X=F.apiUrl;function Y(j){const l=Q(),{count:p,page:a,rowsPerPage:h,onPageChange:c}=j,_=i=>{c(i,0)},b=i=>{c(i,a-1)},f=i=>{c(i,a+1)},v=i=>{c(i,Math.max(0,Math.ceil(p/h)-1))};return e.jsxs(V,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:_,disabled:a===0,"aria-label":"first page",children:l.direction==="rtl"?e.jsx(S,{}):e.jsx(T,{})}),e.jsx(u,{onClick:b,disabled:a===0,"aria-label":"previous page",children:l.direction==="rtl"?e.jsx(k,{}):e.jsx(B,{})}),e.jsx(u,{onClick:f,disabled:a>=Math.ceil(p/h)-1,"aria-label":"next page",children:l.direction==="rtl"?e.jsx(B,{}):e.jsx(k,{})}),e.jsx(u,{onClick:v,disabled:a>=Math.ceil(p/h)-1,"aria-label":"last page",children:l.direction==="rtl"?e.jsx(T,{}):e.jsx(S,{})})]})}const Z=[{to:"/",title:"Home"},{title:"Order History"}],st=()=>{const{order_id:j}=A(),l=E(),[p,a]=n.useState(""),[h,c]=n.useState(""),[_,b]=n.useState("");n.useEffect(()=>{const s=localStorage.getItem("data_success_login");if(s){const t=JSON.parse(s);console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),a(t.user_name),c(t.session_level),b(t.session_name),f(j),t.session_level.toLowerCase()==="partner"?t.session_name.split("-")[0]:t.session_level.toLowerCase()}else l("/auth/login")},[]);const f=async s=>{let t=X+"order/event/id/"+s;I.get(t).then(P=>{i(P.data)}).catch(P=>{console.log(P)})},[v,i]=n.useState([]),x=v,[d,C]=n.useState(0),[m,O]=n.useState(10),y=d>0?Math.max(0,(1+d)*m-x.length):0,w=(s,t)=>{C(t)},L=s=>{O(parseInt(s.target.value,10)),C(0)};return e.jsxs(R,{title:"Order History",description:"this is order history page",children:[e.jsx(N,{title:"Order History",items:Z}),e.jsx(H,{title:"History List",children:e.jsx(U,{children:e.jsx(K,{children:e.jsxs(W,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Seq"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Order ID"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Event Name"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Date"})}),e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:"Username"})})]})}),e.jsxs(q,{children:[(m>0?x.slice(d*m,d*m+m):x).map((s,t)=>e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{variant:"subtitle2",children:t+1})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.order_id})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(J,{color:s.event_name==="Approve Order"?"success":s.event_name==="New Order"?"warning":(s.event_name==="Confirm Order","secondary"),sx:{borderRadius:"6px"},size:"small",label:s.event_name})})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:D(s.event_date)})}),e.jsx(r,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:s.username})})]},t)),y>0&&e.jsx(g,{style:{height:53*y},children:e.jsx(r,{colSpan:5})})]}),e.jsx(M,{children:e.jsx(g,{children:e.jsx(G,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:x.length,rowsPerPage:m,page:d,SelectProps:{native:!0},onPageChange:w,onRowsPerPageChange:L,ActionsComponent:Y})})})]})})})})]})};export{st as default};
