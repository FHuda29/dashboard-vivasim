import{r as o,y as F,z as g,j as e}from"./index-pZ9xQgMg.js";import{P as G}from"./PageContainer-LYar8IhV.js";import{B as H}from"./Breadcrumb-CRa5l2zq.js";import{P as J}from"./ParentCard-BOCKQ1T0.js";import{C as h}from"./CustomSelect-C7618vxy.js";import{C as _}from"./CustomTextField-CVZyUcT3.js";import{A as O}from"./apiConstants-ChAepINk.js";import{B as S}from"./Box-DgOhk5yP.js";import{G as r}from"./Grid2-TVAQUeLW.js";import{T as a}from"./Typography-PCIzasSl.js";import{M as c}from"./MenuItem-BUpQ2083.js";import{S as R}from"./Stack-DuXFRM8_.js";import{I as Y}from"./IconButton-D8l5j-3s.js";import{T as K}from"./Tooltip-DD1oevea.js";import{I as Q}from"./IconPlus-CLk2kPC2.js";import{B as V}from"./Button-DrpnHyAw.js";import{A as X}from"./Alert-XWH1BSQm.js";import"./Paper-Bglc4K2l.js";import"./useSlotProps-D9QVx9CU.js";import"./Link-DmIxGPWX.js";import"./IconCircle-CU5CO1wM.js";import"./createReactComponent-C7i1OeoA.js";import"./Card-Dnm4-j67.js";import"./CardHeader-YzZ0dXBA.js";import"./useSlot-C-z2829C.js";import"./Divider-BxeHuQda.js";import"./dividerClasses-BO-YFw3q.js";import"./CardContent-DHXKlgZi.js";import"./Select-KnVOJfU6.js";import"./Menu-kcqCS8x-.js";import"./Popover-ti3EBHaH.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CByEer0C.js";import"./utils--BW9XhXC.js";import"./getReactElementRef-BDXd3hfF.js";import"./mergeSlotProps-D2utqxEY.js";import"./Modal-ETINFcPv.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-HPxiTNUe.js";import"./List-BgcNoc8S.js";import"./utils-iop7lDec.js";import"./useControlled-kCJ_Peco.js";import"./useId-DuuGdQhb.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D34Ydy4-.js";import"./TextField-52YJDDYc.js";import"./FormControl-B2XRo0iR.js";import"./listItemTextClasses-B-a-vnZw.js";import"./createStack-BEzwOkyd.js";import"./CircularProgress-KhQwCvJ5.js";import"./Popper--abDNuTs.js";import"./Close-tbN14BDi.js";const x=O.apiUrl,Z=[{to:"/",title:"Home"},{title:"Inventory"}],rt=()=>{const[v,I]=o.useState(""),[b,y]=o.useState(""),[$,ee]=o.useState([]),[P,f]=o.useState(!1),m=F();o.useEffect(()=>{const t=localStorage.getItem("data_success_login");if(t){const s=JSON.parse(t);console.log("user_name:",s.user_name),console.log("session_name:",s.session_name),console.log("session_level:",s.session_level),console.log("last_login_time:",s.last_login_time),console.log("blocked:",s.blocked),I(s.session_level),y(s.session_name),s.session_level.toLowerCase()==="partner"?U(s.session_name):W()}else m("/auth/login")},[]);const[A,M]=o.useState([]),w=A,[D,L]=o.useState([]),[d,z]=o.useState(""),[n,B]=o.useState(""),[p,k]=o.useState(""),[u,T]=o.useState(""),[te,se]=o.useState(""),[C,E]=o.useState(""),W=async()=>{let t=x+"partners";g.get(t).then(s=>{M(s.data)}).catch(s=>{console.log(s)})},U=async t=>{let s=x+"agents/cobrand/"+t;g.get(s).then(i=>{L(i.data)}).catch(i=>{console.log(i)})},N=()=>{console.log("move"),console.log(d),console.log(n),console.log(p),console.log(u),console.log(C);let t="",s="";v.toLowerCase()==="partner"?(t=b.split("-")[0],s=n):(t=d,s=n);let i=x+"inventory/ccid?ccidstart="+p+"&ccidend="+u+"&cobrand_id="+t+"&agent_code="+s;g.get(i).then(l=>{console.log("res: ",l);const j=l.data;j.success?(f(!0),setTimeout(()=>{f(!1)},5e3),m("/inventory/list")):alert(j.message)}).catch(l=>{console.log(l)})},q=()=>{localStorage.setItem("mode","move_simcard"),m("/apps/partner/create")};return e.jsxs(G,{title:"Inventory",description:"this is inventory page",children:[e.jsx(H,{title:"Inventory",items:Z}),e.jsxs(J,{title:"Move Simcard to Partner",children:[e.jsx(S,{mt:2,children:e.jsx(r,{size:{xs:12},children:e.jsxs(r,{container:!0,spacing:2,children:[v.toLowerCase()==="partner"?e.jsxs(r,{size:{xs:3},children:[e.jsx(a,{variant:"subtitle1",mt:1,mb:1,children:"Move to Agent"}),e.jsx(h,{fullWidth:!0,variant:"outlined",value:n||"",onChange:t=>B(t.target.value),children:D.map(t=>e.jsxs(c,{value:t.agent_code,children:[t.agent_code," - ",t.name]},t.seq))})]}):e.jsxs(r,{size:{xs:3},children:[e.jsxs(R,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(a,{variant:"subtitle1",children:"Move to Partner"}),e.jsx(Y,{onClick:()=>q(),children:e.jsx(K,{title:"Add Partner",children:e.jsx(Q,{})})})]}),e.jsx(h,{fullWidth:!0,variant:"outlined",value:d||"",onChange:t=>z(t.target.value),children:w.map(t=>e.jsxs(c,{value:t.cobrand_id,children:[t.cobrand_id," - ",t.cobrand_name]},t.seq))})]}),e.jsxs(r,{size:{xs:3},children:[e.jsx(a,{variant:"subtitle1",mt:1,mb:1,children:"ICCID Serial From (19 digit awal)"}),e.jsx(_,{fullWidth:!0,value:p,onChange:t=>k(t.target.value)})]}),e.jsxs(r,{size:{xs:3},children:[e.jsx(a,{variant:"subtitle1",mt:1,mb:1,children:"ICCID Serial To (19 digit awal)"}),e.jsx(_,{fullWidth:!0,value:u,onChange:t=>T(t.target.value)})]}),e.jsxs(r,{size:{xs:3},children:[e.jsx(a,{variant:"subtitle1",mt:1,mb:1,children:"Confirm Move ?"}),e.jsxs(h,{fullWidth:!0,variant:"outlined",value:C||"",onChange:t=>E(t.target.value),children:[e.jsx(c,{value:1,children:"No"}),e.jsx(c,{value:2,children:"Yes"})]})]}),e.jsx(r,{size:{xs:12},children:e.jsx(V,{variant:"contained",color:"primary",onClick:N,children:"Move"})})]})})}),e.jsx(S,{display:"flex",gap:1}),P&&e.jsx(X,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Move Simcard successfully."})]})]})};export{rt as default};
