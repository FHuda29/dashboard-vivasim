import{R as m,r as l,y as W,j as e}from"./index-bBoaL7NX.js";import{B as M}from"./Breadcrumb-Db9PlBea.js";import{P as G}from"./PageContainer-ClH7HaBW.js";import{U as V,V as H,a as O,b as $}from"./index-BL933dCY.js";import{C as c}from"./CustomFormLabel-DkCP5Nv8.js";import{C as _}from"./CustomTextField-nzkQUDrv.js";import{C as u}from"./CustomSelect-_oosuc7Q.js";import{i as p}from"./axios-MmGZYXFl.js";import{j as J}from"./index-VWaDGczM.js";import{B as g}from"./Box-Cbtftx36.js";import{S as K}from"./Stack-DONMPCRZ.js";import{T as Q}from"./Typography-B41TU7cT.js";import{B as w}from"./Button-2ihUhOt_.js";import{D as X}from"./Divider-4e_Zm7wz.js";import{G as n}from"./Grid2-CC46JW8y.js";import{I as Y}from"./InputAdornment-DDw9KCxJ.js";import{I as Z}from"./IconButton-6ozhzS-w.js";import{M as h}from"./MenuItem-DBmnqxHM.js";import{A as ee}from"./Alert-CbLSE_hz.js";import{B as se}from"./BlankCard-BfHU7njI.js";import{C as te}from"./CardContent-TrRQSIz8.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./TextField-CNoxaAXv.js";import"./useSlot-C2y4Okaq.js";import"./useId-BgKtfLA5.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Close-BajIXLAg.js";import"./Card-DDyARx6g.js";const re=()=>{const[b,y]=m.useState([]),[S,U]=m.useState([]),[L,x]=m.useState([]),[f,D]=m.useState(""),[ne,P]=m.useState(""),{addUser:A,users:d}=l.useContext(V),[B,j]=l.useState(!1),v=W(),[o,i]=l.useState({seq:0,user_name:"",session_name:"",password:"",session_level:"partner",blocked:"N",failed:0}),[C,F]=l.useState(!1),I=()=>{F(s=>!s)},k=s=>{s.preventDefault()};l.useEffect(()=>{const s=localStorage.getItem("token");if(s){const t=J(s);D(t.session_level),P(t.session_name),i(r=>({...r,session_name:t.session_name})),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"?(T(t.session_name),z("AGENT")):(N(),E())}if(d.length>0){const t=d[d.length-1].seq;i(r=>({...r,seq:t+1}))}else i(t=>({...t,seq:1}))},[d]);const a=s=>{const{name:t,value:r}=s.target;i(R=>({...{...R,[t]:r}}))},q=async s=>{s.preventDefault();try{await A(o),i({seq:0,user_name:"",session_name:"",password:"",session_level:"PARTNER",blocked:"N",failed:0}),j(!0),setTimeout(()=>{j(!1)},5e3),v("/user/list")}catch(t){console.error("Error adding user:",t)}},N=async()=>{p.get("partners").then(t=>{y(t.data)}).catch(t=>{console.log(t)})},T=async s=>{let t="agents/cobrand/"+s;p.get(t).then(r=>{U(r.data)}).catch(r=>{console.log(r)})},E=async()=>{p.get("levels").then(t=>{x(t.data)}).catch(t=>{console.log(t)})},z=async s=>{let t="levels/code/"+s;p.get(t).then(r=>{x(r.data)}).catch(r=>{console.log(r)})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:q,children:e.jsxs(g,{children:[e.jsxs(K,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(Q,{variant:"h5",children:["# ",o.seq]}),e.jsxs(g,{display:"flex",gap:1,children:[e.jsx(w,{variant:"outlined",color:"error",onClick:()=>{v("/user/list")},children:"Cancel"}),e.jsx(w,{type:"submit",variant:"contained",color:"primary",children:"Save User"})]})]}),e.jsx(X,{}),e.jsxs(n,{container:!0,spacing:3,mb:4,children:[e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userName",children:"User Name"}),e.jsx(_,{id:"user_name",name:"user_name",onChange:a,value:o.user_name,fullWidth:!0})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userPass",sx:{mt:0},children:"User Password"}),e.jsx(_,{id:"password",name:"password",type:C?"text":"password",value:o.password,onChange:a,fullWidth:!0,InputProps:{endAdornment:e.jsx(Y,{position:"end",children:e.jsx(Z,{"aria-label":"toggle password visibility",onClick:I,onMouseDown:k,edge:"end",children:C?e.jsx(H,{}):e.jsx(O,{})})})}})]}),f.toLowerCase()==="partner"||f.toLowerCase()==="partner-admin"?e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userID",sx:{mt:{xs:0,sm:3}},children:"Agent ID"}),e.jsx(u,{id:"session_name",name:"session_name",value:o.session_name,onChange:a,fullWidth:!0,children:S.map(s=>e.jsx(h,{value:s.agent_code,children:s.agent_code},s.seq))})]}):e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userID",sx:{mt:{xs:0,sm:3}},children:"Partner"}),e.jsx(u,{id:"session_name",name:"session_name",value:o.session_name,onChange:a,fullWidth:!0,children:b.map(s=>e.jsx(h,{value:s.cobrand_id,children:s.cobrand_id},s.seq))})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userLevel",sx:{mt:0},children:"User Level"}),e.jsx(u,{id:"session_level",name:"session_level",value:o.session_level,onChange:a,fullWidth:!0,children:L.map(s=>e.jsx(h,{value:s.level_id,children:s.level_name},s.seq))})]})]}),B&&e.jsx(ee,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Users added successfully."})]})})})},oe=[{to:"/",title:"Home"},{title:"User Create"}],ps=()=>e.jsx($,{children:e.jsxs(G,{title:"Create User",description:"this is Create User",children:[e.jsx(M,{title:"Create User",items:oe}),e.jsx(se,{children:e.jsx(te,{children:e.jsx(re,{})})})]})});export{ps as default};
