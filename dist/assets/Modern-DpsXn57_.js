import{y as z,r,z as A,j as e,R as x}from"./index-D0CpDmcp.js";import{P as D}from"./PageContainer-GyGJwSoy.js";import{T as L}from"./TopCards-CrevjAqM.js";import{A as R}from"./apiConstants-ChAepINk.js";import{G as c}from"./Grid2-B3gzDQ3y.js";import{T as n}from"./Typography-CxjCbjeZ.js";import{T as U}from"./TableContainer-DwViaeU_.js";import{T as k,a as M,b as S,c as a,d as N}from"./TableRow-BZxns5TQ.js";import{C as E}from"./Chip-C2vBKMax.js";import{S as O}from"./Snackbar-DJVSSQxh.js";import{A as H}from"./Alert-GQVafBkl.js";import{A as q}from"./AlertTitle-DNa6p8Mg.js";import{B}from"./Box-YfWKO8y5.js";import"./Paper-DYTAYSZ1.js";import"./Utils-DY8x-pVc.js";import"./index-BPskgXx8.js";import"./index-DT2YvziZ.js";import"./icon-favorites-By7CQyrm.js";import"./icon-dd-invoice-CeZrjsyt.js";import"./CardContent-B3dzlDvA.js";import"./useSlot-CFWOFHMb.js";import"./getReactElementRef-BjzLCeGl.js";import"./ownerDocument-DW-IO8s5.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./Close-DI9m-hsf.js";import"./IconButton-BxWHF3Dm.js";import"./useId-BnzzJGZL.js";import"./CircularProgress-DwEGvCDN.js";const I=R.apiUrl,W=()=>{const g=z(),[_,p]=r.useState(""),[v,m]=r.useState(""),[P,y]=r.useState("");r.useEffect(()=>{const t=localStorage.getItem("data_success_login");if(t){const s=JSON.parse(t);if(console.log("user_name:",s.user_name),console.log("session_name:",s.session_name),console.log("session_level:",s.session_level),console.log("last_login_time:",s.last_login_time),console.log("blocked:",s.blocked),p(s.user_name),m(s.session_level),y(s.session_name),s.session_level.toLowerCase()==="partner"){const l=s.session_name.split("-")[0];h(l)}else s.session_level.toLowerCase()==="agent-manager"||s.session_level.toLowerCase()==="agent-admin"?b(s.session_name):T()}else g("/auth/login")},[]);const b=async t=>{let s=I+"inventory/summary/agent/"+t;A.get(s).then(l=>{j(l.data)}).catch(l=>{console.log(l)})},h=async t=>{let s=I+"inventory/summary/partner/"+t;A.get(s).then(l=>{j(l.data)}).catch(l=>{console.log(l)})},T=async()=>{let t=I+"inventory/summary/all";A.get(t).then(s=>{j(s.data)}).catch(s=>{console.log(s)})},[u,j]=r.useState([]),i=u,[d,o]=r.useState(0),[f,G]=r.useState(10),C=d>0?Math.max(0,(1+d)*f-i.length):0,w=()=>{let t=0;return i.forEach(async s=>{t=s.quantity+t}),t};return e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{size:{xs:12},children:e.jsx(n,{variant:"subtitle2",fontSize:14,fontWeight:"500",children:"Inventory Summary"})}),e.jsx(c,{size:{xs:12},children:e.jsx(U,{children:e.jsxs(k,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(M,{children:e.jsxs(S,{children:[e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Seq"})}),e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Partner ID"})}),e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Agent ID"})}),e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Sim Type"})}),e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Status"})}),e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:"Quantity"})})]})}),e.jsxs(N,{children:[(f>0?i.slice(d*f,d*f+f):i).map((t,s)=>e.jsxs(S,{children:[e.jsx(a,{children:e.jsx(n,{variant:"subtitle2",children:s+1})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.cobrand_id})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.agent_code})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.sim_type})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(E,{color:t.status==="Ready"?"success":t.status==="Open"?"warning":t.status=="Used"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.quantity})})]},s)),e.jsxs(S,{style:{height:53*C},children:[e.jsx(a,{colSpan:5,children:e.jsx(n,{variant:"subtitle2",fontSize:16,fontWeight:"600",children:"Total"})}),e.jsx(a,{children:e.jsx(n,{color:"textSecondary",variant:"subtitle2",fontWeight:"600",children:w()})})]}),C>0&&e.jsx(S,{style:{height:53*C},children:e.jsx(a,{colSpan:6})})]})]})})})]})},F=()=>{const[g,_]=r.useState(!1),p=()=>{_(!0)},v=m=>{m!=="clickaway"&&_(!1)};return r.useEffect(()=>{const m=setTimeout(()=>{p()},1500);return()=>clearTimeout(m)},[]),e.jsx(r.Fragment,{children:e.jsx(O,{open:g,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:6e3,onClose:v,children:e.jsxs(H,{onClose:v,severity:"info",variant:"filled",sx:{width:"100%",color:"white"},children:[e.jsx(q,{children:"Welcome To Vivasim"}),"Dashboard manage SIM and e-SIM"]})})})},Se=()=>{const g=z(),[_,p]=x.useState(""),[v,m]=x.useState(""),[P,y]=x.useState(""),[b,h]=x.useState(!1),[T,u]=x.useState(!1),[j,i]=x.useState("");return r.useEffect(()=>{const d=localStorage.getItem("data_success_login");if(d){const o=JSON.parse(d);console.log("user_name:",o.user_name),console.log("session_name:",o.session_name),console.log("session_level:",o.session_level),console.log("last_login_time:",o.last_login_time),console.log("blocked:",o.blocked),p(o.user_name),m(o.session_level),y(o.session_name),o.session_level.toLowerCase()==="partner"?(i("Partner"),o.session_name.split("-")[0],h(!0),u(!1)):o.session_level.toLowerCase()==="agent-manager"?(i("Agent Manager"),h(!1),u(!0)):o.session_level.toLowerCase()==="agent-admin"?(i("Agent Admin"),h(!1),u(!0)):(i("Head Office"),h(!1),u(!1))}else g("/auth/login")},[]),e.jsx(D,{title:"Main Dashboard",description:"this is Main Dashboard page",children:e.jsxs(B,{children:[e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{size:{xs:12},children:e.jsxs(n,{variant:"subtitle2",fontSize:20,fontWeight:"600",children:["Welcome to dashboard -  ",j]})}),T?e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(W,{})}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(L,{})}),e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(W,{})})]})]}),e.jsx(F,{})]})})};export{Se as default};
