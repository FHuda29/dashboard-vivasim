import{c as L,b as y,r as B,K as F,R as M,j as e,u as N,M as G,l as b,P as U,Q as D}from"./index-bBoaL7NX.js";import{B as V}from"./Breadcrumb-Db9PlBea.js";import{P as $}from"./PageContainer-ClH7HaBW.js";import{S as R}from"./Scrollbar-BsmSEa61.js";import{B as t}from"./Box-Cbtftx36.js";import{B as I}from"./Badge-KxSRBq-z.js";import{A as x}from"./Avatar-CUO15ytv.js";import{T as p,s as q}from"./Typography-B41TU7cT.js";import{T as Q}from"./TextField-CNoxaAXv.js";import{I as J}from"./InputAdornment-DDw9KCxJ.js";import{I as K}from"./IconSearch-8WAl2z6L.js";import{L as Y}from"./List-BNgu_2yQ.js";import{B as X}from"./Button-2ihUhOt_.js";import{I as Z}from"./IconChevronDown-Do54NrdV.js";import{M as _}from"./Menu-DsMCwLnz.js";import{M as v}from"./MenuItem-DBmnqxHM.js";import{L as ee}from"./ListItemButton-CJvS5VrH.js";import{L as w}from"./ListItemAvatar-BzYTapqD.js";import{L as P}from"./ListItemText-CPg0R90h.js";import{f as T}from"./index-CB3-d00P.js";import{A as S}from"./Alert-CbLSE_hz.js";import{u as A}from"./index-CRYcqtBZ.js";import{D as re,I as z}from"./IconMenu2-CAf4cEPw.js";import{S as k}from"./Stack-DONMPCRZ.js";import{G as C}from"./Grid2-CC46JW8y.js";import{I as h}from"./IconButton-6ozhzS-w.js";import{I as se}from"./IconDownload-BnY8zN60.js";import{L as te}from"./ListItem-C2JIZIoS.js";import{I as ie}from"./IconPhone-BjX1-yas.js";import{c as W}from"./createReactComponent-BVlLIvSm.js";import{I as oe}from"./IconDotsVertical-2Bwo94K3.js";import{D as O}from"./Divider-4e_Zm7wz.js";import{I as ae}from"./Select-x3FgNbWv.js";import{I as ne}from"./IconSend-D8pPvSvZ.js";import{I as le}from"./IconPhoto-CzRj6Pcd.js";import{A as de}from"./AppCard-ReJwy0A9.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./index-E9j5JOQS.js";import"./debounce-DK7QCBvE.js";import"./isObject--vsEa_js.js";import"./isSymbol-BO4_lDQk.js";import"./toNumber-Bi2Z8mqv.js";import"./usePreviousProps-BJ8OHEj0.js";import"./useSlot-C2y4Okaq.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./utils-iop7lDec.js";import"./isMuiElement-CYEUdTOG.js";import"./CircularProgress-BIjyWvHZ.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./listItemTextClasses-DSEuY2ct.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemButtonClasses-BlC_oHqs.js";import"./index-DT2YvziZ.js";import"./Close-BajIXLAg.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Slide-Dqs0O3C8.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useControlled-B6T_fxKa.js";import"./Card-DDyARx6g.js";var pe=W("paperclip","IconPaperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]),ce=W("video","IconVideo",[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);const me=()=>{const n=L(),o=y(s=>s.chatReducer.chatContent);B.useEffect(()=>{n(F())},[n]);const l=(s,m)=>s&&s.filter(j=>j.name.toLocaleLowerCase().includes(m.toLocaleLowerCase())),d=y(s=>l(s.chatReducer.chats,s.chatReducer.chatSearch)),a=s=>{let m="";const j=s.messages[s.messages.length-1];if(j){const H=j.senderId===s.id?"You: ":"",E=j.type==="image"?"Sent a photo":j.msg;m=`${H}${E}`}return m},i=s=>{var m;return(m=b.last(s.messages))==null?void 0:m.createdAt},[r,c]=M.useState(null),u=!!r,f=s=>{c(s.currentTarget)},g=()=>{c(null)};return e.jsxs("div",{children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:"10px",p:3,children:[e.jsx(I,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",color:"success",children:e.jsx(x,{alt:"Remy Sharp",src:N,sx:{width:54,height:54}})}),e.jsxs(t,{children:[e.jsx(p,{variant:"body1",fontWeight:600,children:"John Deo"}),e.jsx(p,{variant:"body2",children:"Marketing Manager"})]})]}),e.jsx(t,{px:3,py:1,children:e.jsx(Q,{id:"outlined-search",placeholder:"Search contacts",size:"small",type:"search",variant:"outlined",InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(K,{size:"16"})})},fullWidth:!0,onChange:s=>n(G(s.target.value))})}),e.jsxs(Y,{sx:{px:0},children:[e.jsxs(t,{px:2.5,pb:1,children:[e.jsxs(X,{id:"basic-button","aria-controls":u?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:f,color:"inherit",children:["Recent Chats ",e.jsx(Z,{size:"16"})]}),e.jsxs(_,{id:"basic-menu",anchorEl:r,open:u,onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(v,{onClick:g,children:"Sort By Time"}),e.jsx(v,{onClick:g,children:"Sort By Unread"}),e.jsx(v,{onClick:g,children:"Mark as all Read"})]})]}),e.jsx(R,{sx:{height:{lg:"calc(100vh - 100px)",md:"100vh"},maxHeight:"600px"},children:d&&d.length?d.map(s=>e.jsxs(ee,{onClick:()=>n(U(s.id)),sx:{mb:.5,py:2,px:3,alignItems:"start"},selected:o===s.id,children:[e.jsx(w,{children:e.jsx(I,{color:s.status==="online"?"success":s.status==="busy"?"error":s.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(x,{alt:"Remy Sharp",src:s.thumb,sx:{width:42,height:42}})})}),e.jsx(P,{primary:e.jsx(p,{variant:"subtitle2",fontWeight:600,mb:.5,children:s.name}),secondary:a(s),secondaryTypographyProps:{noWrap:!0},sx:{my:0}}),e.jsx(t,{sx:{flexShrink:"0"},mt:.5,children:e.jsx(p,{variant:"body2",children:T(new Date(i(s)),{addSuffix:!1})})})]},s.id)):e.jsx(t,{m:2,children:e.jsx(S,{severity:"error",variant:"filled",sx:{color:"white"},children:"No Contacts Found!"})})})]})]})},xe=320,he=({isMobileSidebarOpen:n,onSidebarClose:o})=>{const l=A(d=>d.breakpoints.up("lg"));return e.jsx(re,{open:n,onClose:o,variant:l?"permanent":"temporary",sx:{width:xe,flexShrink:0,zIndex:l?0:1,"& .MuiDrawer-paper":{position:"relative"}},children:e.jsx(me,{})})},ue=320,ge=({isInSidebar:n,chat:o})=>{const l=A(r=>r.breakpoints.up("lg")),d=b.uniq(b.flatten(o==null?void 0:o.messages.map(r=>r.attachment))).length,a=b.uniq(b.flatten(o==null?void 0:o.messages.map(r=>(r==null?void 0:r.type)==="image"?r.msg:null))).length-1,i=q(k)(()=>({".showOnHover":{display:"none"},"&:hover .showOnHover":{display:"block"}}));return e.jsx(e.Fragment,{children:n?e.jsxs(t,{sx:{width:n===!0?ue:0,flexShrink:0,border:"0",borderLeft:"1px",borderStyle:"solid",right:"0",background:r=>r.palette.background.paper,boxShadow:l?null:r=>r.shadows[8],position:l?"relative":"absolute",borderColor:r=>r.palette.divider},p:3,children:[e.jsxs(p,{variant:"h6",mb:2,children:["Media (",a,")"]}),e.jsxs(C,{container:!0,spacing:2,children:[o==null?void 0:o.messages.map(r=>e.jsx(C,{size:{xs:12,lg:4},children:(r==null?void 0:r.type)==="image"?e.jsx(x,{src:r==null?void 0:r.msg,alt:"media",variant:"rounded",sx:{width:"72px",height:"72px"}}):""},r.id)),e.jsx(C,{size:{xs:12,lg:12},children:a===0?e.jsx(S,{severity:"error",children:"No Media Found!"}):null})]}),e.jsxs(p,{variant:"h6",mt:5,mb:2,children:["Attachments (",d,")"]}),e.jsxs(t,{children:[o==null?void 0:o.messages.map((r,c)=>{var u;return e.jsx(k,{spacing:2.5,direction:"column",children:(u=r==null?void 0:r.attachment)==null?void 0:u.map((f,g)=>e.jsxs(i,{direction:"row",gap:2,children:[e.jsx(x,{variant:"rounded",sx:{width:"48px",height:"48px",bgcolor:s=>s.palette.grey[100]},children:e.jsx(x,{src:f.icon,alt:"av",variant:"rounded",sx:{width:"24px",height:"24px"}})}),e.jsxs(t,{mr:"auto",children:[e.jsx(p,{variant:"subtitle2",fontWeight:600,mb:1,children:f.file}),e.jsx(p,{variant:"body2",children:f.fileSize})]}),e.jsx(t,{className:"showOnHover",children:e.jsx(h,{"aria-label":"delete",children:e.jsx(se,{stroke:1.5,size:"20"})})})]},g))},c)}),d===0?e.jsx(S,{severity:"error",children:"No Attachment Found!"}):null]})]}):null})},je=({toggleChatSidebar:n})=>{const[o,l]=M.useState(!0),d=A(i=>i.breakpoints.up("lg")),a=y(i=>i.chatReducer.chats[i.chatReducer.chatContent-1]);return e.jsx(t,{children:a?e.jsxs(t,{children:[e.jsxs(t,{children:[e.jsxs(t,{display:"flex",alignItems:"center",p:2,children:[e.jsx(t,{sx:{display:{xs:"block",md:"block",lg:"none"},mr:"10px"},children:e.jsx(z,{stroke:1.5,onClick:n})}),e.jsxs(te,{dense:!0,disableGutters:!0,children:[e.jsx(w,{children:e.jsx(I,{color:a.status==="online"?"success":a.status==="busy"?"error":a.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(x,{alt:a.name,src:a.thumb})})}),e.jsx(P,{primary:e.jsx(p,{variant:"h5",children:a.name}),secondary:a.status})]},a.id),e.jsxs(k,{direction:"row",children:[e.jsx(h,{"aria-label":"delete",children:e.jsx(ie,{stroke:1.5})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(ce,{stroke:1.5})}),e.jsx(h,{"aria-label":"delete",onClick:()=>l(!o),children:e.jsx(oe,{stroke:1.5})})]})]}),e.jsx(O,{})]}),e.jsxs(t,{display:"flex",children:[e.jsx(t,{width:"100%",children:e.jsx(R,{sx:{height:"650px",overflow:"auto",maxHeight:"800px"},children:e.jsx(t,{p:3,children:a.messages.map(i=>e.jsx(t,{children:a.id===i.senderId?e.jsx(e.Fragment,{children:e.jsxs(t,{display:"flex",children:[e.jsx(w,{children:e.jsx(x,{alt:a.name,src:a.thumb,sx:{width:40,height:40}})}),e.jsxs(t,{children:[i.createdAt?e.jsxs(p,{variant:"body2",color:"grey.400",mb:1,children:[a.name,","," ",T(new Date(i.createdAt),{addSuffix:!1})," ","ago"]}):null,i.type==="text"?e.jsx(t,{mb:2,sx:{p:1,backgroundColor:"grey.100",mr:"auto",maxWidth:"320px"},children:i.msg}):null,i.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:i.msg,alt:"attach",width:"150"})}):null]})]})}):e.jsx(t,{mb:1,display:"flex",alignItems:"flex-end",flexDirection:"row-reverse",children:e.jsxs(t,{alignItems:"flex-end",display:"flex",flexDirection:"column",children:[i.createdAt?e.jsx(p,{variant:"body2",color:"grey.400",mb:1,children:"ago"}):null,i.type==="text"?e.jsx(t,{mb:1,sx:{p:1,backgroundColor:"primary.light",ml:"auto",maxWidth:"320px"},children:i.msg},i.id):null,i.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:i.msg,alt:"attach",width:"250"})}):null]})})},i.id+i.msg+i.createdAt))})})}),e.jsx(ge,{isInSidebar:d?o:!o,chat:a})]})]}):e.jsxs(t,{display:"flex",alignItems:"center",p:2,pb:1,pt:1,children:[e.jsx(t,{sx:{display:{xs:"flex",md:"flex",lg:"none"},mr:"10px"},children:e.jsx(z,{stroke:1.5,onClick:n})}),e.jsx(p,{variant:"h4",children:"Select Chat"})]})})},fe=()=>{const[n,o]=M.useState(""),l=L(),d=y(c=>c.chatReducer.chatContent),a=c=>{o(c.target.value)},i={id:d,msg:n},r=c=>{c.preventDefault(),c.stopPropagation(),l(D(i)),o("")};return e.jsx(t,{p:2,children:e.jsxs("form",{onSubmit:r,style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(ae,{id:"msg-sent",fullWidth:!0,value:n,placeholder:"Type a Message",size:"small",type:"text",inputProps:{"aria-label":"Type a Message"},onChange:a.bind(null)}),e.jsx(h,{"aria-label":"delete",onClick:()=>{l(D(i)),o("")},disabled:!n,color:"primary",children:e.jsx(ne,{stroke:1.5,size:"20"})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(le,{stroke:1.5,size:"20"})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(pe,{stroke:1.5,size:"20"})})]})})},Gr=()=>{const[n,o]=B.useState(!1);return e.jsxs($,{title:"Chat ui",description:"this is Chat page",children:[e.jsx(V,{title:"Chat app",subtitle:"Messenger"}),e.jsxs(de,{children:[e.jsx(he,{isMobileSidebarOpen:n,onSidebarClose:()=>o(!1)}),e.jsxs(t,{flexGrow:1,children:[e.jsx(je,{toggleChatSidebar:()=>o(!0)}),e.jsx(O,{}),e.jsx(fe,{})]})]})]})};export{Gr as default};
