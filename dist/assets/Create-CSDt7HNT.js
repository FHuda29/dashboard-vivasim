import{r as b,y as M,j as t}from"./index-q1gJB5H0.js";import{B as U}from"./Breadcrumb-Sx0jSoUO.js";import{P as G}from"./PageContainer-ShAoTXqo.js";import{I as R,a as H}from"./index-_a_kgFL-.js";import{C as p}from"./CustomFormLabel-Co2JOWHW.js";import{C as V}from"./CustomSelect-BHYrF69e.js";import{C as h}from"./CustomTextField-CMbY8JHb.js";import{i as q,f as L}from"./index-CFaCQM0R.js";import{B as d}from"./Box-DjbeIn6R.js";import{S as g}from"./Stack-Cgjz-K8z.js";import{T as s}from"./Typography-BxNQAu-e.js";import{B as C}from"./Button-BiCTccas.js";import{D as S}from"./Divider-D_QCNZIA.js";import{M as T}from"./MenuItem-C7G2QaZb.js";import{G as u}from"./Grid2-CqZBoIec.js";import{I as _}from"./IconPlus-CaolXAHz.js";import{P as $}from"./Paper-BfYJvf2K.js";import{T as J}from"./TableContainer-BZE4S_Sa.js";import{T as K,a as Q,b as A,c as l,d as X}from"./TableRow-Coc6NZuK.js";import{T as w}from"./Tooltip-T0REb2Y8.js";import{I as D}from"./IconButton-Dqm0TkKE.js";import{I as Y}from"./IconSquareRoundedPlus-_Mvp25OW.js";import{I as Z}from"./IconTrash-DjH7im3-.js";import{A as tt}from"./Alert-Bdc-5zR2.js";import{B as et}from"./BlankCard-CQVnRHeI.js";import{C as rt}from"./CardContent-DWdd_6p9.js";import"./useSlotProps-fxj6j4ji.js";import"./Link-CbpODTtF.js";import"./IconCircle-BrnHHpVV.js";import"./createReactComponent-4CU5_L6_.js";import"./Select-Be-xDOsD.js";import"./Menu-CI0qCauS.js";import"./useSlot-C5ueERyv.js";import"./Popover-B2Kr2jsd.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-NO3rZCFB.js";import"./utils-NaTNKqhR.js";import"./getReactElementRef-BT4zc5ME.js";import"./mergeSlotProps-02bNjKG-.js";import"./Modal-BICTQXNK.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-CFBZdEcL.js";import"./List-CdKlZLq8.js";import"./utils-iop7lDec.js";import"./useControlled-2SXrPK_C.js";import"./useId-SD238GYo.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CXKl78CG.js";import"./TextField-jB7bX9P6.js";import"./FormControl-BbMb6ExL.js";import"./index-DT2YvziZ.js";import"./createStack-B9LP_pb5.js";import"./CircularProgress-C7fJ-WBe.js";import"./dividerClasses-BBaEuH8O.js";import"./listItemTextClasses-BL7DomhZ.js";import"./Popper-5ImFPPqG.js";import"./Close-D9Qbw5x7.js";import"./Card-bW_5XQOp.js";const it=()=>{const{addInvoice:B,invoices:j}=b.useContext(R),[W,y]=b.useState(!1),I=M(),[o,m]=b.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});b.useEffect(()=>{if(j.length>0){const r=j[j.length-1].id;m(e=>({...e,id:r+1}))}else m(r=>({...r,id:1}))},[j]);const f=r=>{let e=0;r.forEach(n=>{const c=parseFloat(n.unitPrice)||0,k=parseInt(n.units)||0,F=c*k;e+=F,n.unitTotalPrice=F});const i=e*.1,a=e+i;return{subtotal:e,vat:i,grandTotal:a}},x=r=>{const{name:e,value:i}=r.target;m(a=>{const n={...a,[e]:i},c=f(n.orders);return{...n,...c}})},v=(r,e,i)=>{m(a=>{const n=[...a.orders];n[r]={...n[r],[e]:i};const c=f(n);return{...a,orders:n,...c}})},P=()=>{m(r=>{const e=[...r.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],i=f(e);return{...r,orders:e,...i}})},z=r=>{m(e=>{const i=e.orders.filter((n,c)=>c!==r),a=f(i);return{...e,orders:i,...a}})},E=async r=>{r.preventDefault();try{await B(o),m({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),y(!0),setTimeout(()=>{y(!1)},5e3),I("/apps/invoice/list")}catch(e){console.error("Error adding invoice:",e)}},O=q(new Date(o.date))?new Date(o.date):new Date,N=L(O,"EEEE, MMMM dd, yyyy");return t.jsx(t.Fragment,{children:t.jsx("form",{onSubmit:E,children:t.jsxs(d,{children:[t.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[t.jsxs(s,{variant:"h5",children:["# ",o.id]}),t.jsxs(d,{display:"flex",gap:1,children:[t.jsx(C,{variant:"outlined",color:"error",onClick:()=>{I("/apps/invoice/list")},children:"Cancel"}),t.jsx(C,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),t.jsx(S,{}),t.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsxs(d,{children:[t.jsx(p,{htmlFor:"demo-simple-select",children:"Order Status"}),t.jsxs(V,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o.status,onChange:x,disabled:!0,children:[t.jsx(T,{value:"Pending",children:"Pending"}),t.jsx(T,{value:"Shipped",children:"Shipped"}),t.jsx(T,{value:"Delivered",children:"Delivered"})]})]}),t.jsxs(d,{textAlign:"right",children:[t.jsx(p,{htmlFor:"demo-simple-select",children:"Order Date"}),t.jsxs(s,{variant:"body1",children:[" ",N]})]})]}),t.jsx(S,{}),t.jsxs(u,{container:!0,spacing:3,mb:4,children:[t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"bill-from",children:"Bill From"}),t.jsx(h,{id:"bill-from",name:"billFrom",value:o.billFrom,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),t.jsx(h,{name:"billTo",value:o.billTo,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),t.jsx(h,{name:"billFromAddress",value:o.billFromAddress,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),t.jsx(h,{name:"billToAddress",value:o.billToAddress,onChange:x,fullWidth:!0})]})]}),t.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[t.jsx(s,{variant:"h6",children:"Items Details :"}),t.jsx(C,{onClick:P,variant:"contained",color:"primary",startIcon:t.jsx(_,{width:18}),children:"Add Item"})]}),t.jsx($,{variant:"outlined",children:t.jsx(J,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:t.jsxs(K,{children:[t.jsx(Q,{children:t.jsxs(A,{children:[t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Item Name"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Units"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),t.jsx(l,{}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),t.jsx(X,{children:o.orders.map((r,e)=>t.jsxs(A,{children:[t.jsx(l,{children:t.jsx(h,{type:"text",value:r.itemName,placeholder:"Item Name",onChange:i=>v(e,"itemName",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(h,{type:"number",value:r.unitPrice,placeholder:"Unit Price",onChange:i=>v(e,"unitPrice",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(h,{type:"number",value:r.units,placeholder:"Units",onChange:i=>v(e,"units",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(s,{variant:"body1",children:r.unitTotalPrice})}),t.jsx(l,{}),t.jsxs(l,{children:[t.jsx(w,{title:"Add Item",children:t.jsx(D,{onClick:P,color:"primary",children:t.jsx(Y,{width:22})})}),t.jsx(w,{title:"Delete Item",children:t.jsx(D,{onClick:()=>z(e),color:"error",children:t.jsx(Z,{width:22})})})]})]},e))})]})})}),t.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"Sub Total:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.subtotal})]}),t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"VAT:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.vat})]}),t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"Grand Total:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.grandTotal})]})]}),W&&t.jsx(tt,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},st=[{to:"/",title:"Home"},{title:"Invoice Create"}],he=()=>t.jsx(H,{children:t.jsxs(G,{title:"Create Invoice",description:"this is Create Invoice",children:[t.jsx(U,{title:"Create Invoice",items:st}),t.jsx(et,{children:t.jsx(rt,{children:t.jsx(it,{})})})]})});export{he as default};
