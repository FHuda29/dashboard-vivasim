import{af as ie,R as b,r as d,y as ne,by as u,j as e}from"./index-bBoaL7NX.js";import{B as de}from"./Breadcrumb-Db9PlBea.js";import{P as ce}from"./PageContainer-ClH7HaBW.js";import{B as ue}from"./BlankCard-BfHU7njI.js";import{C as n}from"./CustomFormLabel-DkCP5Nv8.js";import{C as p}from"./CustomSelect-_oosuc7Q.js";import{C as _}from"./CustomTextField-nzkQUDrv.js";import{g as pe,c as z}from"./Utils-DZtz8wsc.js";import{A as y}from"./apiConstants-C71iLEz3.js";import{C as me}from"./CardContent-TrRQSIz8.js";import{B as D}from"./Box-Cbtftx36.js";import{S as ge}from"./Stack-DONMPCRZ.js";import{T as _e}from"./Typography-B41TU7cT.js";import{B as A}from"./Button-2ihUhOt_.js";import{D as he}from"./Divider-4e_Zm7wz.js";import{G as s}from"./Grid2-CC46JW8y.js";import{R as E}from"./RadioGroup-COzkG0Xs.js";import{F as h}from"./FormControlLabel-qTc2OSFR.js";import{R as x}from"./Radio-GSiGeisI.js";import{M as m}from"./MenuItem-DBmnqxHM.js";import{A as xe}from"./Alert-CbLSE_hz.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./Card-DDyARx6g.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlot-C2y4Okaq.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./FormGroup-CsISzJoH.js";import"./SwitchBase-DqWPx54W.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";const v=y.apiUrl,ve=[{to:"/",title:"Home"},{title:"Topup"}],be=[{id:0,value:"500",label:"500Mb"},{id:1,value:"1000",label:"1Gb"},{id:2,value:"2000",label:"2Gb"},{id:3,value:"3000",label:"3Gb"},{id:4,value:"5000",label:"5Gb"}],ye=[{id:0,value:"3000",label:"3Gb"},{id:1,value:"5000",label:"5Gb"},{id:2,value:"6000",label:"6Gb"},{id:3,value:"7000",label:"7Gb"},{id:4,value:"10000",label:"10Gb"},{id:5,value:"15000",label:"15Gb"},{id:6,value:"20000",label:"20Gb"},{id:7,value:"30000",label:"30Gb"}],je=[{id:0,value:"1",label:"1 day"},{id:1,value:"2",label:"2 day"},{id:2,value:"3",label:"3 day"},{id:3,value:"4",label:"4 day"},{id:4,value:"5",label:"5 day"},{id:5,value:"6",label:"6 day"},{id:6,value:"7",label:"7 day"},{id:7,value:"8",label:"8 day"},{id:8,value:"10",label:"10 day"},{id:9,value:"12",label:"12 day"},{id:10,value:"15",label:"15 day"},{id:11,value:"20",label:"20 day"},{id:12,value:"30",label:"30 day"}],fe=[{id:0,value:"1",label:"1"},{id:1,value:"2",label:"2"},{id:2,value:"3",label:"3"},{id:3,value:"4",label:"4"},{id:4,value:"5",label:"5"},{id:5,value:"6",label:"6"},{id:6,value:"7",label:"7"},{id:7,value:"8",label:"8"},{id:8,value:"9",label:"9"},{id:9,value:"10",label:"10"},{id:10,value:"11",label:"11"},{id:11,value:"12",label:"12"},{id:12,value:"13",label:"13"},{id:13,value:"14",label:"14"},{id:14,value:"15",label:"15"},{id:15,value:"16",label:"16"},{id:16,value:"17",label:"17"},{id:17,value:"18",label:"18"},{id:18,value:"19",label:"19"},{id:19,value:"20",label:"20"},{id:20,value:"21",label:"21"},{id:21,value:"22",label:"22"},{id:22,value:"23",label:"23"},{id:23,value:"24",label:"24"},{id:24,value:"25",label:"25"},{id:25,value:"26",label:"26"},{id:26,value:"27",label:"27"},{id:27,value:"28",label:"28"},{id:28,value:"29",label:"29"},{id:29,value:"30",label:"30"}],Ia=()=>{const{ccid:j}=ie(),[T,B]=b.useState([]),[Ce,ke]=b.useState([]),[Se,I]=d.useState(""),[f,O]=d.useState(""),[U,W]=d.useState(""),[R,L]=d.useState(""),[M,C]=d.useState(!0),[$,Pe]=d.useState(!1),k=ne(),[l,g]=d.useState({seq:0,nama_pengguna:"",telp_pengguna:"",email_pengguna:"",agent_name:"",type:"",package_type:"",country:"ASIA16",days:0,fup:"",quota:"",quantity:1,product_id:"",product_price:0});d.useEffect(()=>{const a=localStorage.getItem("data_success_login");if(a){const t=JSON.parse(a);console.log("data_success_login:",t),console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),O(t.user_name),I(t.session_level),L(t.session_name),Q(t.session_name);const r=t.session_name.split("-")[0];W(r),H(r),g(c=>({...c,cobrand_id:t.session_name})),t.session_level.toLowerCase(),j&&(l.ccid_1=j)}V()},[]);const Q=async a=>{let t=v+"agents/code/"+a;u.get(t).then(r=>{g(c=>({...c,agent_name:r.data[0].name}))}).catch(r=>{console.log(r)})},H=async a=>{let t=v+"product/partner/cobrand/"+a;u.get(t).then(r=>{console.log("list_product_partner : ",r.data)}).catch(r=>{console.log(r)})},J=async(a,t,r)=>{let c=v+"product/partner/"+a+"/"+t+"/"+r;u.get(c).then(async i=>{const q=U+pe(),ee=z(),ae=R;console.log("list_product_partner_detail : ",i.data),g(oe=>({...oe,product_id:i.data[0].package_id,product_price:i.data[0].selling_price}));const te=i.data[0].package_id,N=i.data[0].selling_price,le=i.data[0].package_name,w=l.quantity*N;console.log("total_product_price : ",w);const re=l.ccid_1,G={seq:0,order_id:q,order_date:ee,order_type:l.type,order_status:"New",order_customer_name:l.nama_pengguna,order_contact_phone:l.telp_pengguna,order_contact_wa:l.telp_pengguna,order_contact_email:l.email_pengguna,order_agent_code:ae,order_agent_name:l.agent_name,order_product:te,order_country_code:l.country,order_fup:l.fup,order_quota:l.quota,order_days:l.days,order_ccid:re,order_qty:l.quantity,order_product_price:N,order_product_total_price:w,package_name:le};console.log("dataOrder : ",G),await X(G);const se=z();await Y({seq:0,order_id:q,event_name:"New Order - Topup",event_date:se,username:f}),k("/order/list")}).catch(i=>{alert("Product not found")})},o=a=>{const{name:t,value:r}=a.target;g(c=>{const i={...c,[t]:r};return i.package_type==="1"||i.package_type==="2"?C(!1):C(!0),{...i}})},K=async a=>{a.preventDefault();try{console.log("data : ",l),J(l.country,l.days,l.fup)}catch(t){console.error("Error adding orders:",t)}},V=async()=>{let a=v+"country";u.get(a).then(t=>{B(t.data)}).catch(t=>{console.log(t)})},X=async a=>{try{const r=(await u.post(y.apiUrl+"orders",a)).data}catch(t){console.error("Error adding orders:",t)}},Y=async a=>{try{const r=(await u.post(y.apiUrl+"order/event",a)).data}catch(t){console.error("Error adding order events :",t)}},Z=Array.from({length:30},(a,t)=>t+1),S=3,P=Z.slice(0,l.quantity),F=[];for(let a=0;a<P.length;a+=S)F.push(P.slice(a,a+S));return e.jsxs(ce,{title:"Topup Simcard",description:"this is topup Simcard",children:[e.jsx(de,{title:"Topup Simcard",items:ve}),e.jsx(ue,{children:e.jsx(me,{children:e.jsx("form",{onSubmit:K,children:e.jsxs(D,{children:[e.jsxs(ge,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(_e,{variant:"h5",children:["#USER: ",f]}),e.jsxs(D,{display:"flex",gap:1,children:[e.jsx(A,{variant:"outlined",color:"error",onClick:()=>{k("/topup/list")},children:"Cancel"}),e.jsx(A,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(he,{}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nama Pengguna"}),e.jsx(_,{id:"nama_pengguna",name:"nama_pengguna",value:l.nama_pengguna,onChange:o,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nomor Telepon Pengguna"}),e.jsx(_,{id:"telp_pengguna",name:"telp_pengguna",value:l.telp_pengguna,onChange:o,fullWidth:!0,type:"phone"})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Email Pengguna"}),e.jsx(_,{id:"email_pengguna",name:"email_pengguna",value:l.email_pengguna,onChange:o,fullWidth:!0,type:"email"})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Type"}),e.jsxs(E,{"aria-labelledby":"demo-radio-buttons-group-label",value:l.type,onChange:o,id:"type",name:"type",row:!0,children:[e.jsx(h,{value:"Simcard",control:e.jsx(x,{}),label:"Simcard"}),e.jsx(h,{value:"eSIM",control:e.jsx(x,{}),label:"eSIM"})]})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Country"}),e.jsx(p,{id:"country",name:"country",value:l.country,onChange:o,fullWidth:!0,children:T.map(a=>e.jsx(m,{value:a.country_code,children:a.country_list},a.seq))})]}),e.jsx(s,{size:{xs:12,sm:4},children:"Â "}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Product Type"}),e.jsxs(E,{"aria-labelledby":"radio-buttons-group-package",value:l.package_type,onChange:o,id:"package_type",name:"package_type",row:!0,children:[e.jsx(h,{value:"1",control:e.jsx(x,{}),label:"Unlimited"}),e.jsx(h,{value:"2",control:e.jsx(x,{}),label:"Quota Based"})]})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Product Package"}),l.package_type==="1"?e.jsx(p,{id:"fup",name:"fup",value:l.fup,onChange:o,fullWidth:!0,children:be.map(a=>e.jsx(m,{value:a.value,children:a.label},a.id))}):l.package_type==="2"?e.jsx(p,{id:"quota",name:"quota",value:l.quota,onChange:o,fullWidth:!0,children:ye.map(a=>e.jsx(m,{value:a.value,children:a.label},a.id))}):e.jsx(p,{id:"package",name:"package",fullWidth:!0,disabled:!0,children:e.jsx(m,{value:"",children:"Select Package"})})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(n,{htmlFor:"Days",sx:{mt:{xs:0,sm:3}},children:"Days"}),e.jsx(p,{id:"days",name:"days",value:l.days,onChange:o,fullWidth:!0,disabled:M,children:je.map(a=>e.jsx(m,{value:a.value,children:a.label},a.id))})]}),e.jsxs(s,{size:{xs:12,sm:2},children:[e.jsx(n,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Quantity"}),e.jsx(p,{id:"quantity",name:"quantity",value:l.quantity,onChange:o,fullWidth:!0,disabled:!0,children:fe.map(a=>e.jsx(m,{value:a.value,children:a.label},a.id))})]})]}),e.jsx(s,{size:{xs:12,sm:12},children:e.jsx(n,{htmlFor:"title_price",sx:{mt:3,mb:2},children:"ICCID - (eSIM tdk perlu di isi)"})}),F.map((a,t)=>e.jsx(s,{container:!0,spacing:2,children:a.map(r=>e.jsxs(b.Fragment,{children:[e.jsx(s,{size:{xs:12,sm:1},children:e.jsxs(n,{htmlFor:`ccid_${r}`,sx:{mt:1,textAlign:"center"},children:[r,"."]})}),e.jsx(s,{size:{xs:12,sm:3},children:e.jsx(_,{id:`ccid_${r}`,name:`ccid_${r}`,value:l[`ccid_${r}`]||"",onChange:o,fullWidth:!0,sx:{mt:1}})})]},r))},t)),$&&e.jsx(xe,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Order created successfully."})]})})})})]})};export{Ia as default};
