import{y as R,r as o,j as e,L as M}from"./index-bBoaL7NX.js";import{T as F,L as _,F as y,K as S}from"./LastPage-CUO0XoGI.js";import{K as B}from"./KeyboardArrowRight-CL0uG8E4.js";import{P as E}from"./PageContainer-ClH7HaBW.js";import{P as K}from"./ParentCard-CFe-nEgX.js";import{B as z}from"./BlankCard-BfHU7njI.js";import{f as O}from"./Utils-DZtz8wsc.js";import{i as I}from"./axios-MmGZYXFl.js";import{j as H}from"./index-VWaDGczM.js";import{B as f}from"./Box-Cbtftx36.js";import{S as J}from"./Stack-DONMPCRZ.js";import{T as q}from"./TextField-CNoxaAXv.js";import{I as G}from"./InputAdornment-DDw9KCxJ.js";import{I as Q}from"./IconSearch-8WAl2z6L.js";import{B as U}from"./Button-2ihUhOt_.js";import{T as V}from"./TableContainer-OLbhJ7zr.js";import{T as W,a as X,b as g,c as t,d as Y}from"./TableRow-Zqkg4FIQ.js";import{T as n}from"./Typography-B41TU7cT.js";import{C as Z}from"./Chip-Bm7HxxC0.js";import{T as $}from"./TablePagination-DdevPbi4.js";import{u as w}from"./Paper-CEo52ZYq.js";import{I as v}from"./IconButton-6ozhzS-w.js";import"./createSvgIcon-DcL-YXBs.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./createReactComponent-BVlLIvSm.js";import"./CircularProgress-BIjyWvHZ.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";function ee(h){const c=w(),{count:p,page:r,rowsPerPage:m,onPageChange:x}=h,P=s=>{x(s,0)},C=s=>{x(s,r-1)},A=s=>{x(s,r+1)},b=s=>{x(s,Math.max(0,Math.ceil(p/m)-1))};return e.jsxs(f,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(v,{onClick:P,disabled:r===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(_,{}):e.jsx(y,{})}),e.jsx(v,{onClick:C,disabled:r===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx(B,{}):e.jsx(S,{})}),e.jsx(v,{onClick:A,disabled:r>=Math.ceil(p/m)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(S,{}):e.jsx(B,{})}),e.jsx(v,{onClick:b,disabled:r>=Math.ceil(p/m)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(y,{}):e.jsx(_,{})})]})}const pt=()=>{const h=R();o.useEffect(()=>{const i=localStorage.getItem("token");if(i){const a=H(i);a.session_level.toLowerCase()==="partner"||a.session_level.toLowerCase()==="partner-admin"?p(a.session_name):c()}else h("/auth/login")},[]);const c=async()=>{I.get("agents").then(a=>{s(a.data)}).catch(a=>{a.response&&a.response.status===403||a.response.status===401?h("/auth/login"):console.log(a)})},p=async i=>{let a="agents/cobrand/"+i;I.get(a).then(d=>{s(d.data)}).catch(d=>{d.response&&d.response.status===403||d.response.status===401?h("/auth/login"):console.log(d)})},[r,m]=o.useState(""),[x,P]=o.useState(!1),[C,A]=o.useState(!1),[b,s]=o.useState([]),u=b,[j,k]=o.useState(0),[l,L]=o.useState(10),T=j>0?Math.max(0,(1+j)*l-u.length):0,D=(i,a)=>{k(a)},N=i=>{L(parseInt(i.target.value,10)),k(0)};return e.jsx(E,{title:"Agent",description:"this is agent page",children:e.jsxs(K,{title:"Agent List",children:[e.jsx(f,{mb:2,children:e.jsxs(J,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[e.jsx(q,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:r,onChange:i=>m(i.target.value),InputProps:{endAdornment:e.jsx(G,{position:"end",children:e.jsx(Q,{size:"16"})})}}),e.jsx(f,{display:"flex",gap:1,children:e.jsx(U,{variant:"contained",color:"primary",component:M,to:"/apps/agent/create",children:"Add Agent"})})]})}),e.jsx(z,{children:e.jsx(V,{children:e.jsxs(W,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(X,{children:e.jsxs(g,{children:[e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Agent Code"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Agent ID"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"ID Type"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Name"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Address"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Office Phone"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Contact Person"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Contact Phone"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Email"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Account Manager"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Contract Number"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Payment Note"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Bank Name"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Bank Acc No"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Bank Acc Name"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Commission %"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Join Date"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Status"})}),e.jsx(t,{children:e.jsx(n,{variant:"subtitle2",children:"Note"})})]})}),e.jsxs(Y,{children:[(l>0?u.slice(j*l,j*l+l):u).map((i,a)=>e.jsxs(g,{children:[e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.agent_code})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.agent_id})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.id_type})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.name})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.address})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.office_phone})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.contact_person})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.contact_phone})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.email})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.account_manager})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.contract_no})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.payment_note})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.bank_name})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.bank_acc_no})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.bank_acc_name})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.commission_pct})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:O(i.join_date)})}),e.jsx(t,{children:e.jsx(Z,{color:i.status==="Active"?"success":i.status==="InActive"?"warning":i.status=="Blocked"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:i.status==="Active"?"Active":i.status==="InActive"?"Inactive":"Blocked"})}),e.jsx(t,{children:e.jsx(n,{variant:"caption",children:i.note})})]},a)),T>0&&e.jsx(g,{style:{height:53*T},children:e.jsx(t,{colSpan:2})})]}),e.jsx(F,{children:e.jsx(g,{children:e.jsx($,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:2,count:u.length,rowsPerPage:l,page:j,SelectProps:{native:!0},onPageChange:D,onRowsPerPageChange:N,ActionsComponent:ee})})})]})})})]})})};export{pt as default};
