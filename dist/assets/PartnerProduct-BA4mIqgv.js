import{f as W,i as X,y as Y,r as d,j as e,L as A}from"./index-bBoaL7NX.js";import{T as Z,L as E,F,K as M}from"./LastPage-CUO0XoGI.js";import{K as z}from"./KeyboardArrowRight-CL0uG8E4.js";import{P as ee}from"./PageContainer-ClH7HaBW.js";import{P as te}from"./ParentCard-CFe-nEgX.js";import{B as se}from"./BlankCard-BfHU7njI.js";import{n as L}from"./Utils-DZtz8wsc.js";import{r as re,a as ae}from"./createSvgIcon-DcL-YXBs.js";import{i as _}from"./axios-MmGZYXFl.js";import{j as oe}from"./index-VWaDGczM.js";import{B as T}from"./Box-Cbtftx36.js";import{S as ne}from"./Stack-DONMPCRZ.js";import{T as ie}from"./TextField-CNoxaAXv.js";import{I as le}from"./InputAdornment-DDw9KCxJ.js";import{I as h}from"./IconButton-6ozhzS-w.js";import{I as ce}from"./IconSearch-8WAl2z6L.js";import{B as y}from"./Button-2ihUhOt_.js";import{T as de}from"./TableContainer-OLbhJ7zr.js";import{T as pe,a as me,b as S,c as a,d as he}from"./TableRow-Zqkg4FIQ.js";import{T as o}from"./Typography-B41TU7cT.js";import{T as K}from"./Tooltip-CRAcMsX-.js";import{I as ue}from"./IconEdit-BUB-FThl.js";import{I as xe}from"./IconTrash-B1FRgie-.js";import{C as ge}from"./Chip-Bm7HxxC0.js";import{T as je}from"./TablePagination-DdevPbi4.js";import{D as fe,a as Ce}from"./DialogContent-BJGxlzU1.js";import{D as ve}from"./DialogTitle-37dVBM_z.js";import{D as Pe}from"./DialogActions-r0byN1sA.js";import{u as be}from"./Paper-CEo52ZYq.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./CircularProgress-BIjyWvHZ.js";import"./createReactComponent-BVlLIvSm.js";import"./Popper-ppbRY3WN.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";var C={},N;function _e(){if(N)return C;N=1;var p=re();Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var r=p(ae()),m=W();return C.default=(0,r.default)((0,m.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),C}var Se=_e();const we=X(Se);function De(p){const r=be(),{count:m,page:i,rowsPerPage:u,onPageChange:l}=p,x=c=>{l(c,0)},v=c=>{l(c,i-1)},P=c=>{l(c,i+1)},w=c=>{l(c,Math.max(0,Math.ceil(m/u)-1))};return e.jsxs(T,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(h,{onClick:x,disabled:i===0,"aria-label":"first page",children:r.direction==="rtl"?e.jsx(E,{}):e.jsx(F,{})}),e.jsx(h,{onClick:v,disabled:i===0,"aria-label":"previous page",children:r.direction==="rtl"?e.jsx(z,{}):e.jsx(M,{})}),e.jsx(h,{onClick:P,disabled:i>=Math.ceil(m/u)-1,"aria-label":"next page",children:r.direction==="rtl"?e.jsx(M,{}):e.jsx(z,{})}),e.jsx(h,{onClick:w,disabled:i>=Math.ceil(m/u)-1,"aria-label":"last page",children:r.direction==="rtl"?e.jsx(F,{}):e.jsx(E,{})})]})}const Ht=()=>{const p=Y(),[r,m]=d.useState(""),[i,u]=d.useState("");d.useEffect(()=>{const t=localStorage.getItem("token");if(t){const s=oe(t);if(console.log("user_name:",s.user_name),console.log("session_name:",s.session_name),console.log("session_level:",s.session_level),console.log("last_login_time:",s.last_login_time),console.log("blocked:",s.blocked),m(s.session_level),s.session_level.toLowerCase()==="partner"||s.session_level.toLowerCase()==="partner-admin"||s.session_level.toLowerCase()==="agent-admin"||s.session_level.toLowerCase()==="agent-manager"){const n=s.session_name.split("-")[0];u(n),x(n)}else u(s.session_name),l()}else p("/auth/login")},[]);const l=async()=>{_.get("product/partner").then(s=>{k(s.data)}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?p("/auth/login"):console.log(s)})},x=async t=>{let s="product/partner/cobrand/"+t;_.get(s).then(n=>{k(n.data)}).catch(n=>{n.response&&n.response.status===403||n.response.status===401?p("/auth/login"):console.log(n)})},[v,P]=d.useState(""),w=()=>{P(""),r.toLowerCase()==="partner"||r.toLowerCase()==="partner-admin"||r.toLowerCase()==="agent-admin"||r.toLowerCase()==="agent-manager"?x(i):l()},[c,D]=d.useState(!1),[I,O]=d.useState(0),[U,k]=d.useState([]),b=U,[f,R]=d.useState(0),[g,Q]=d.useState(10),B=f>0?Math.max(0,(1+f)*g-b.length):0,H=(t,s)=>{R(s)},J=t=>{Q(parseInt(t.target.value,10)),R(0)},V=t=>{P(t.target.value);const s=t.target.value;if(s.length!==0){let n="product/partner";r.toLowerCase()==="partner"||r.toLowerCase()==="partner-admin"||r.toLowerCase()==="agent-admin"||r.toLowerCase()==="agent-manager"?n=n+"/cobrand/"+i+"/search?param="+s:n=n+"/search?param="+s,_.get(n).then(j=>{k(j.data)}).catch(j=>{j.response&&j.response.status===403||j.response.status===401?p("/auth/login"):console.log(j)})}else r.toLowerCase()==="partner"||r.toLowerCase()==="partner-admin"||r.toLowerCase()==="agent-admin"||r.toLowerCase()==="agent-manager"?(console.log("masuk 1",r),x(i)):(console.log("masuk 2",r),l())},$=t=>{O(t),D(!0)},q=()=>{D(!1)},G=async()=>{try{await _.delete("product/partner/delete/"+I),D(!1),r.toLowerCase()==="partner"?x(i):l()}catch(t){console.error("Error deleting products:",t)}};return e.jsxs(ee,{title:"Products",description:"this is partner products page",children:[e.jsxs(te,{title:"Partner Product List",children:[e.jsx(T,{mb:2,children:e.jsxs(ne,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[e.jsx(ie,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:v,onChange:V,InputProps:{endAdornment:e.jsxs(le,{position:"end",children:[v&&e.jsx(h,{onClick:w,size:"small",children:e.jsx(we,{fontSize:"small"})}),e.jsx(ce,{size:"16"})]})}}),e.jsx(T,{display:"flex",gap:1,children:e.jsx(y,{variant:"contained",color:"primary",component:A,to:"/product/partner/create",children:"New Product"})})]})}),e.jsx(se,{children:e.jsx(de,{children:e.jsxs(pe,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(me,{children:e.jsxs(S,{children:[e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Action"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Partner"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Product ID"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Product Name"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Country"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Days"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Quota (MB)"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Selling Price"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Status"})})]})}),e.jsxs(he,{children:[(g>0?b.slice(f*g,f*g+g):b).map((t,s)=>e.jsxs(S,{children:[e.jsxs(a,{children:[e.jsx(K,{title:"Edit",children:e.jsx(h,{color:"success",component:A,to:`/product/partner/edit/${t.seq}`,children:e.jsx(ue,{width:22})})}),e.jsx(K,{title:"Delete",children:e.jsx(h,{color:"error",onClick:()=>$(t.seq),children:e.jsx(xe,{width:22})})})]}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:t.cobrand_id})}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:t.package_id})}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:t.package_name})}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:t.country})}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:L(t.days)})}),e.jsx(a,{children:e.jsx(o,{variant:"caption",children:L(t.quota)})}),e.jsx(a,{children:e.jsxs(o,{variant:"caption",children:["IDR ",L(t.selling_price)]})}),e.jsx(a,{children:e.jsx(ge,{color:t.status==="Ready"?"success":t.status==="Used"?"warning":t.status==="Close"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})})]},s)),B>0&&e.jsx(S,{style:{height:53*B},children:e.jsx(a,{colSpan:2})})]}),e.jsx(Z,{children:e.jsx(S,{children:e.jsx(je,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:2,count:b.length,rowsPerPage:g,page:f,SelectProps:{native:!0},onPageChange:H,onRowsPerPageChange:J,ActionsComponent:De})})})]})})})]}),e.jsxs(fe,{open:c,onClose:q,children:[e.jsx(ve,{children:"Confirm Delete"}),e.jsxs(Ce,{children:["Are you sure you want to delete selected product SEQ ? ",I]}),e.jsxs(Pe,{children:[e.jsx(y,{variant:"contained",onClick:q,children:"Cancel"}),e.jsx(y,{color:"error",variant:"outlined",onClick:G,children:"Delete"})]})]})]})};export{Ht as default};
