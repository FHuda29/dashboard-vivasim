import{r as a,j as r,aN as u,y as w}from"./index-q1gJB5H0.js";import{B as S}from"./Breadcrumb-Sx0jSoUO.js";import{P as D}from"./PageContainer-ShAoTXqo.js";import{A as f}from"./apiConstants-ChAepINk.js";import{C as j}from"./CustomFormLabel-Co2JOWHW.js";import{C as g}from"./CustomTextField-CMbY8JHb.js";import{B as P}from"./Box-DjbeIn6R.js";import{S as B}from"./Stack-Cgjz-K8z.js";import{T as F}from"./Typography-BxNQAu-e.js";import{B as b}from"./Button-BiCTccas.js";import{D as q}from"./Divider-D_QCNZIA.js";import{G as h}from"./Grid2-CqZBoIec.js";import{A as E}from"./Alert-Bdc-5zR2.js";import{B as U}from"./BlankCard-CQVnRHeI.js";import{C as A}from"./CardContent-DWdd_6p9.js";import"./Paper-BfYJvf2K.js";import"./useSlotProps-fxj6j4ji.js";import"./Link-CbpODTtF.js";import"./IconCircle-BrnHHpVV.js";import"./createReactComponent-4CU5_L6_.js";import"./TextField-jB7bX9P6.js";import"./useSlot-C5ueERyv.js";import"./useId-SD238GYo.js";import"./Select-Be-xDOsD.js";import"./Menu-CI0qCauS.js";import"./Popover-B2Kr2jsd.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-NO3rZCFB.js";import"./utils-NaTNKqhR.js";import"./getReactElementRef-BT4zc5ME.js";import"./mergeSlotProps-02bNjKG-.js";import"./Modal-BICTQXNK.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-CFBZdEcL.js";import"./List-CdKlZLq8.js";import"./utils-iop7lDec.js";import"./useControlled-2SXrPK_C.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CXKl78CG.js";import"./FormControl-BbMb6ExL.js";import"./createStack-B9LP_pb5.js";import"./CircularProgress-C7fJ-WBe.js";import"./dividerClasses-BBaEuH8O.js";import"./Close-D9Qbw5x7.js";import"./IconButton-Dqm0TkKE.js";import"./Card-bW_5XQOp.js";const v=a.createContext(void 0),N=({children:x})=>{const[i,c]=a.useState([]),[d,p]=a.useState(!0),[n]=a.useState(null);a.useEffect(()=>{(async()=>{try{const t=await u.get(f.apiUrl+"partners");c(t.data),p(!1)}catch{p(!1)}})()},[]);const m=async s=>{try{await u.delete(f.apiUrl+"partners",{data:{seq:s}}),c(t=>t.filter(e=>e.seq!==s))}catch(t){console.error("Error deleting products:",t)}},y=async s=>{try{console.log("newUser: ",s),console.log("json newUser: ",JSON.stringify(s));const e=(await u.post(f.apiUrl+"partners",s)).data;c(o=>[...o,e])}catch(t){console.error("Error adding users:",t)}},C=async s=>{try{const e=(await u.put("partners/updatepartner",s)).data;c(o=>o.map(l=>l.seq===e.seq?e:l))}catch(t){console.error("Error updating users:",t)}};return r.jsx(v.Provider,{value:{partners:i,loading:d,error:n,deleteUser:m,addPartner:y,updatePartner:C},children:x})},T=()=>{const{addPartner:x,partners:i}=a.useContext(v),[c,d]=a.useState(!1),p=w(),[n,m]=a.useState({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),[y,C]=a.useState(!1);a.useEffect(()=>{if(i.length>0){const e=i[i.length-1].seq;m(o=>({...o,seq:e+1}))}else m(e=>({...e,seq:1}))},[i]);const s=e=>{const{name:o,value:l}=e.target;m(_=>({...{..._,[o]:l}}))},t=async e=>{e.preventDefault();try{await x(n),m({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),d(!0),setTimeout(()=>{d(!1)},5e3),p("/partner/list")}catch(o){console.error("Error adding partner:",o)}};return r.jsx(r.Fragment,{children:r.jsx("form",{onSubmit:t,children:r.jsxs(P,{children:[r.jsxs(B,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[r.jsxs(F,{variant:"h5",children:["# ",n.seq]}),r.jsxs(P,{display:"flex",gap:1,children:[r.jsx(b,{variant:"outlined",color:"error",onClick:()=>{p("/partner/list")},children:"Cancel"}),r.jsx(b,{type:"submit",variant:"contained",color:"primary",children:"Save Partner"})]})]}),r.jsx(q,{}),r.jsxs(h,{container:!0,spacing:3,mb:4,children:[r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"cobrand_id",children:"Partner ID"}),r.jsx(g,{id:"cobrand_id",name:"cobrand_id",onChange:s,value:n.cobrand_id,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Partner Name"}),r.jsx(g,{id:"cobrand_name",name:"cobrand_name",value:n.cobrand_name,onChange:s,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"Person In Charge"}),r.jsx(g,{id:"pic",name:"pic",value:n.pic,onChange:s,fullWidth:!0})]})]}),c&&r.jsx(E,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Users added successfully."})]})})})},k=[{to:"/",title:"Home"},{title:"Partner Create"}],Ar=()=>r.jsx(N,{children:r.jsxs(D,{title:"Partner User",description:"this is Create Partner",children:[r.jsx(S,{title:"Partner User",items:k}),r.jsx(U,{children:r.jsx(A,{children:r.jsx(T,{})})})]})});export{Ar as default};
