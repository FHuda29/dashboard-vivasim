import{r as e,j as q,aN as r}from"./index-pZ9xQgMg.js";import{A as c}from"./apiConstants-ChAepINk.js";const v=e.createContext(void 0),P=({children:u})=>{const[l,o]=e.useState([]),[g,p]=e.useState(!0),[y]=e.useState(null);e.useEffect(()=>{(async()=>{try{const t=await r.get(c.apiUrl+"product/partner");console.log("edit product partner: ",t.data),o(t.data),p(!1)}catch{p(!1)}})()},[]);const f=async a=>{try{await r.delete("/api/data/invoicedata/deleteinvoice",{data:{Seq:a}}),o(t=>t.filter(n=>n.seq!==a))}catch(t){console.error("Error deleting products:",t)}},m=async a=>{try{const t=await r.get(c.apiUrl+"products/package/"+a.package_id);console.log("master product: ",t.data),a.package_name=t.data.package_name,a.country=t.data.country,a.days=t.data.days,a.quota=t.data.quota,a.status=t.data.status;const s=(await r.post(c.apiUrl+"product/partner",a)).data;o(d=>[...d,s])}catch(t){console.error("Error adding products:",t)}},x=async a=>{try{const t=a.seq,s=(await r.put(c.apiUrl+"product/partner/salling/"+t,a)).data;o(d=>d.map(i=>i.seq===s.seq?s:i))}catch(t){console.error("Error updating product partner:",t)}};return q.jsx(v.Provider,{value:{products:l,loading:g,error:y,deleteProduct:f,addProduct:m,updateProduct:x},children:u})};export{v as P,P as a};
