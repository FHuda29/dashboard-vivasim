import{R as h,r as i,y as A,j as e}from"./index-bBoaL7NX.js";import{B as I}from"./Breadcrumb-Db9PlBea.js";import{P as T}from"./PageContainer-ClH7HaBW.js";import{P as z,a as E}from"./index-DCR7lqGc.js";import{C as d}from"./CustomFormLabel-DkCP5Nv8.js";import{C as x}from"./CustomTextField-nzkQUDrv.js";import{C as g}from"./CustomSelect-_oosuc7Q.js";import{i as f}from"./axios-MmGZYXFl.js";import{j as R}from"./index-VWaDGczM.js";import{B as _}from"./Box-Cbtftx36.js";import{S as W}from"./Stack-DONMPCRZ.js";import{T as G}from"./Typography-B41TU7cT.js";import{B as j}from"./Button-2ihUhOt_.js";import{D as M}from"./Divider-4e_Zm7wz.js";import{G as n}from"./Grid2-CC46JW8y.js";import{M as C}from"./MenuItem-DBmnqxHM.js";import{A as U}from"./Alert-CbLSE_hz.js";import{B as H}from"./BlankCard-BfHU7njI.js";import{C as N}from"./CardContent-TrRQSIz8.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./TextField-CNoxaAXv.js";import"./useSlot-C2y4Okaq.js";import"./useId-BgKtfLA5.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";import"./Card-DDyARx6g.js";const J=()=>{const[b,P]=h.useState([]),[v,y]=h.useState([]),[l,S]=i.useState(""),[O,k]=i.useState(""),{addProduct:w,products:c}=i.useContext(z),[q,p]=i.useState(!1),u=A(),[s,a]=i.useState({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""});i.useEffect(()=>{const r=localStorage.getItem("token");if(r){const t=R(r);S(t.session_level),k(t.session_name),a(o=>({...o,cobrand_id:t.session_name})),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"?B(t.session_name):F()}if(c.length>0){const t=c[c.length-1].seq;a(o=>({...o,seq:t+1}))}else a(t=>({...t,seq:1}))},[c]);const m=r=>{const{name:t,value:o}=r.target;a(L=>({...{...L,[t]:o}}))},D=async r=>{r.preventDefault();try{await w(s),a({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""}),p(!0),setTimeout(()=>{p(!1)},5e3),u("/product/partner")}catch(t){console.error("Error adding product:",t)}},F=async()=>{f.get("partners").then(t=>{P(t.data)}).catch(t=>{console.log(t)})},B=async r=>{let t="agents/cobrand/"+r;f.get(t).then(o=>{y(o.data)}).catch(o=>{console.log(o)})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:D,children:e.jsxs(_,{children:[e.jsxs(W,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(G,{variant:"h5",children:["# ",s.seq]}),e.jsxs(_,{display:"flex",gap:1,children:[e.jsx(j,{variant:"outlined",color:"error",onClick:()=>{u("/product/partner")},children:"Cancel"}),e.jsx(j,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(M,{}),e.jsxs(n,{container:!0,spacing:3,mb:4,children:[l.toLowerCase()==="partner"||l.toLowerCase()==="partner-admin"?e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(d,{htmlFor:"cobrand_id",children:"Agent Code"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:s.cobrand_id,onChange:m,fullWidth:!0,children:v.map(r=>e.jsxs(C,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.agent_code]},r.seq))})]}):e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(d,{htmlFor:"cobrand_id",children:"Partner ID"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:s.cobrand_id,onChange:m,fullWidth:!0,children:b.map(r=>e.jsxs(C,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.cobrand_name]},r.seq))})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(d,{htmlFor:"package_id",children:"Package ID"}),e.jsx(x,{id:"package_id",name:"package_id",onChange:m,value:s.package_id,fullWidth:!0})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(d,{htmlFor:"selling_price",sx:{mt:0},children:"Selling Price"}),e.jsx(x,{id:"selling_price",name:"selling_price",value:s.selling_price,onChange:m,fullWidth:!0})]})]}),q&&e.jsx(U,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Product created successfully."})]})})})},K=[{to:"/",title:"Home"},{title:"Product Partner Create"}],$e=()=>e.jsx(E,{children:e.jsxs(T,{title:"Create Product Partner",description:"this is Create Product Partner",children:[e.jsx(I,{title:"Create Product Partner",items:K}),e.jsx(H,{children:e.jsx(N,{children:e.jsx(J,{})})})]})});export{$e as default};
