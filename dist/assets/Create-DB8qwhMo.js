import{r as l,j as e,aN as g,y as F}from"./index-pZ9xQgMg.js";import{B as S}from"./Breadcrumb-CRa5l2zq.js";import{P as w}from"./PageContainer-LYar8IhV.js";import{A as v}from"./apiConstants-ChAepINk.js";import{C as r}from"./CustomFormLabel-DQZmNrva.js";import{C as i}from"./CustomTextField-CVZyUcT3.js";import{C as j}from"./CustomSelect-C7618vxy.js";import{B as k}from"./Box-DgOhk5yP.js";import{S as I}from"./Stack-DuXFRM8_.js";import{T as P}from"./Typography-PCIzasSl.js";import{B as y}from"./Button-DrpnHyAw.js";import{D as z}from"./Divider-BxeHuQda.js";import{G as s}from"./Grid2-TVAQUeLW.js";import{M as t}from"./MenuItem-BUpQ2083.js";import{A as W}from"./Alert-XWH1BSQm.js";import{B as D}from"./BlankCard-jsHF22Za.js";import{C as J}from"./CardContent-DHXKlgZi.js";import"./Paper-Bglc4K2l.js";import"./useSlotProps-D9QVx9CU.js";import"./Link-DmIxGPWX.js";import"./IconCircle-CU5CO1wM.js";import"./createReactComponent-C7i1OeoA.js";import"./TextField-52YJDDYc.js";import"./useSlot-C-z2829C.js";import"./useId-DuuGdQhb.js";import"./Select-KnVOJfU6.js";import"./Menu-kcqCS8x-.js";import"./Popover-ti3EBHaH.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CByEer0C.js";import"./utils--BW9XhXC.js";import"./getReactElementRef-BDXd3hfF.js";import"./mergeSlotProps-D2utqxEY.js";import"./Modal-ETINFcPv.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-HPxiTNUe.js";import"./List-BgcNoc8S.js";import"./utils-iop7lDec.js";import"./useControlled-kCJ_Peco.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D34Ydy4-.js";import"./FormControl-B2XRo0iR.js";import"./createStack-BEzwOkyd.js";import"./CircularProgress-KhQwCvJ5.js";import"./dividerClasses-BO-YFw3q.js";import"./listItemTextClasses-B-a-vnZw.js";import"./Close-tbN14BDi.js";import"./IconButton-D8l5j-3s.js";import"./Card-Dnm4-j67.js";const B=l.createContext(void 0),T=({children:f})=>{const[x,u]=l.useState([]),[_,p]=l.useState(!0),[n]=l.useState(null);l.useEffect(()=>{(async()=>{try{const c=await g.get(v.apiUrl+"agents");u(c.data),p(!1)}catch{p(!1)}})()},[]);const h=async a=>{try{await g.delete(v.apiUrl+"agents",{data:{seq:a}}),u(c=>c.filter(m=>m.seq!==a))}catch(c){console.error("Error deleting products:",c)}},C=async a=>{try{const m=(await g.post(v.apiUrl+"agents",a)).data;u(o=>[...o,m])}catch(c){console.error("Error adding users:",c)}},b=async a=>{try{const m=(await g.put("agents/updatepartner",a)).data;u(o=>o.map(d=>d.seq===m.seq?m:d))}catch(c){console.error("Error updating users:",c)}};return e.jsx(B.Provider,{value:{agents:x,loading:_,error:n,deleteUser:h,addAgent:C,updateAgent:b},children:f})},N=()=>{const{addAgent:f,agents:x}=l.useContext(B),[u,_]=l.useState(!1),p=F(),[n,h]=l.useState({seq:0,agent_code:"",agent_id:"",id_type:"",name:"",address:"",kelurahan:"",kecamatan:"",city:"",province:"",office_phone:"",contact_person:"",contact_phone:"",email:"",commission_pct:0,join_date:"",status:"Active",note:"",account_manager:"",contract_no:"",payment_note:"",bank_name:"",bank_acc_no:"",bank_acc_name:"",cobrand_id:""}),[C,b]=l.useState(!1);l.useEffect(()=>{const m=localStorage.getItem("data_success_login");if(m){const o=JSON.parse(m);console.log("session_name:",o.session_name),console.log("session_level:",o.session_level),h(d=>({...d,cobrand_id:o.session_name}))}if(x.length>0){const o=x[x.length-1].seq;h(d=>({...d,seq:o+1,join_date:new Date().toISOString().slice(0,10)}))}else h(o=>({...o,seq:1,join_date:new Date().toISOString().slice(0,10)}))},[x]);const a=m=>{const{name:o,value:d}=m.target;h(A=>({...{...A,[o]:d}}))},c=async m=>{m.preventDefault();try{console.log("formData: ",n),await f(n),h({seq:0,agent_code:"",agent_id:"",id_type:"",name:"",address:"",kelurahan:"",kecamatan:"",city:"",province:"",office_phone:"",contact_person:"",contact_phone:"",email:"",commission_pct:0,join_date:"",status:"Active",note:"",account_manager:"",contract_no:"",payment_note:"",bank_name:"",bank_acc_no:"",bank_acc_name:"",cobrand_id:""}),_(!0),setTimeout(()=>{_(!1)},5e3),p("/agent/list")}catch(o){console.error("Error adding agent:",o)}};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:c,children:e.jsxs(k,{children:[e.jsxs(I,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(P,{variant:"h5",children:["# ",n.seq]}),e.jsxs(k,{display:"flex",gap:1,children:[e.jsx(y,{variant:"outlined",color:"error",onClick:()=>{p("/agent/list")},children:"Cancel"}),e.jsx(y,{type:"submit",variant:"contained",color:"primary",children:"Save Agent"})]})]}),e.jsx(z,{}),e.jsxs(s,{container:!0,spacing:3,mb:4,children:[e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_id",children:"Agent Code"}),e.jsx(i,{id:"agent_code",name:"agent_code",onChange:a,value:n.agent_code,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Agent Identity"}),e.jsx(i,{id:"agent_id",name:"agent_id",value:n.agent_id,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"ID Type"}),e.jsxs(j,{labelId:"id_type",id:"id_type",name:"id_type",value:n.id_type,onChange:a,fullWidth:!0,children:[e.jsx(t,{value:"KTP",children:"KTP"}),e.jsx(t,{value:"Passport",children:"Passport"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Name"}),e.jsx(i,{id:"name",name:"name",value:n.name,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Address"}),e.jsx(i,{id:"address",name:"address",value:n.address,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Kelurahan"}),e.jsx(i,{id:"kelurahan",name:"kelurahan",value:n.kelurahan,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Kecamatan"}),e.jsx(i,{id:"kecamatan",name:"kecamatan",value:n.kecamatan,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"City"}),e.jsxs(j,{labelId:"city",id:"city",name:"city",value:n.city,onChange:a,fullWidth:!0,children:[e.jsx(t,{value:"Jakarta Barat",children:"Jakarta Barat"}),e.jsx(t,{value:"Jakarta Pusat",children:"Jakarta Pusat"}),e.jsx(t,{value:"Jakarta Selatan",children:"Jakarta Selatan"}),e.jsx(t,{value:"Jakarta Timur",children:"Jakarta Timur"}),e.jsx(t,{value:"Jakarta Utara",children:"Jakarta Utara"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"Province"}),e.jsxs(j,{labelId:"province",id:"province",name:"province",value:n.province,onChange:a,fullWidth:!0,children:[e.jsx(t,{value:"DKI Jakarta",children:"DKI Jakarta"}),e.jsx(t,{value:"Banten",children:"Banten"}),e.jsx(t,{value:"Jawa Barat",children:"Jawa Barat"}),e.jsx(t,{value:"Jawa Tengah",children:"Jakarta Tengah"}),e.jsx(t,{value:"Jawa Timur",children:"Jawa Timur"}),e.jsx(t,{value:"Sumatera Barat",children:"Sumatera Barat"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Office Phone"}),e.jsx(i,{id:"office_phone",name:"office_phone",value:n.office_phone,onChange:a,type:"phone",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contact Person"}),e.jsx(i,{id:"contact_person",name:"contact_person",value:n.contact_person,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contact Phone"}),e.jsx(i,{id:"contact_phone",name:"contact_phone",value:n.contact_phone,onChange:a,type:"phone",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Email"}),e.jsx(i,{id:"email",name:"email",value:n.email,onChange:a,type:"email",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Commission %"}),e.jsx(i,{id:"commission_pct",name:"commission_pct",value:n.commission_pct,onChange:a,type:"number",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Bank ID"}),e.jsxs(j,{labelId:"bank_name",id:"bank_name",name:"bank_name",value:n.bank_name,onChange:a,fullWidth:!0,children:[e.jsx(t,{value:"BCA",children:"BCA"}),e.jsx(t,{value:"Bank Mandiri",children:"Bank Mandiri"}),e.jsx(t,{value:"BRI",children:"BRI"}),e.jsx(t,{value:"BNI",children:"BNI"}),e.jsx(t,{value:"Bank Danamon",children:"Bank Danamon"}),e.jsx(t,{value:"Bank CIMB Niaga",children:"Bank CIMB Niaga"}),e.jsx(t,{value:"Bank OCBC",children:"Bank OCBC"}),e.jsx(t,{value:"Bank Permata",children:"Bank Permata"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Account No"}),e.jsx(i,{id:"bank_acc_no",name:"bank_acc_no",value:n.bank_acc_no,onChange:a,type:"number",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Account Name"}),e.jsx(i,{id:"bank_acc_name",name:"bank_acc_name",value:n.bank_acc_name,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Payment"}),e.jsxs(j,{labelId:"payment_note",id:"payment_note",name:"payment_note",value:n.payment_note,onChange:a,fullWidth:!0,children:[e.jsx(t,{value:"Cash",children:"Cash / Transfer"}),e.jsx(t,{value:"Credit",children:"Credit Term 7 days"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contract Number"}),e.jsx(i,{id:"contract_no",name:"contract_no",value:n.contract_no,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Special Note"}),e.jsx(i,{id:"note",name:"note",value:n.note,onChange:a,fullWidth:!0})]})]}),u&&e.jsx(W,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Agent added successfully."})]})})})},E=[{to:"/",title:"Home"},{title:"Agent Create"}],Ee=()=>e.jsx(T,{children:e.jsxs(w,{title:"Agent User",description:"this is Create Agent",children:[e.jsx(S,{title:"Agent User",items:E}),e.jsx(D,{children:e.jsx(J,{children:e.jsx(N,{})})})]})});export{Ee as default};
