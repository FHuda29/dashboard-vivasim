import{R as P,r as h,y as ee,z as j,j as e}from"./index-q1gJB5H0.js";import{B as se}from"./Breadcrumb-Sx0jSoUO.js";import{P as re}from"./PageContainer-ShAoTXqo.js";import{B as te}from"./BlankCard-CQVnRHeI.js";import{C as l}from"./CustomFormLabel-Co2JOWHW.js";import{C as w}from"./CustomSelect-BHYrF69e.js";import{C as d}from"./CustomTextField-CMbY8JHb.js";import{g as ae,c as k}from"./Utils-BDQZAxTQ.js";import{A as b}from"./apiConstants-ChAepINk.js";import{C as ne}from"./CardContent-DWdd_6p9.js";import{B as q}from"./Box-DjbeIn6R.js";import{S as oe}from"./Stack-Cgjz-K8z.js";import{T as le}from"./Typography-BxNQAu-e.js";import{B as N}from"./Button-BiCTccas.js";import{D as ie}from"./Divider-D_QCNZIA.js";import{G as r}from"./Grid2-CqZBoIec.js";import{R as y}from"./RadioGroup-pZI5TTOz.js";import{F as a}from"./FormControlLabel-BSn4sxJo.js";import{R as n}from"./Radio-iwDkIH4K.js";import{M as m}from"./MenuItem-C7G2QaZb.js";import{A as ce}from"./Alert-Bdc-5zR2.js";import"./Paper-BfYJvf2K.js";import"./useSlotProps-fxj6j4ji.js";import"./Link-CbpODTtF.js";import"./IconCircle-BrnHHpVV.js";import"./createReactComponent-4CU5_L6_.js";import"./Card-bW_5XQOp.js";import"./Select-Be-xDOsD.js";import"./Menu-CI0qCauS.js";import"./useSlot-C5ueERyv.js";import"./Popover-B2Kr2jsd.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-NO3rZCFB.js";import"./utils-NaTNKqhR.js";import"./getReactElementRef-BT4zc5ME.js";import"./mergeSlotProps-02bNjKG-.js";import"./Modal-BICTQXNK.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-CFBZdEcL.js";import"./List-CdKlZLq8.js";import"./utils-iop7lDec.js";import"./useControlled-2SXrPK_C.js";import"./useId-SD238GYo.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CXKl78CG.js";import"./TextField-jB7bX9P6.js";import"./FormControl-BbMb6ExL.js";import"./index-CFaCQM0R.js";import"./index-DT2YvziZ.js";import"./createStack-B9LP_pb5.js";import"./CircularProgress-C7fJ-WBe.js";import"./dividerClasses-BBaEuH8O.js";import"./FormGroup-CdnPfBTa.js";import"./SwitchBase-W9NycRqz.js";import"./listItemTextClasses-BL7DomhZ.js";import"./Close-D9Qbw5x7.js";import"./IconButton-Dqm0TkKE.js";const f=b.apiUrl,de=[{to:"/",title:"Home"},{title:"Order"}],bs=()=>{const[W,D]=P.useState([]),[me,xe]=P.useState([]),[ue,I]=h.useState(""),[C,O]=h.useState(""),[E,G]=h.useState(""),[U,R]=h.useState(""),[L,pe]=h.useState(!1),S=ee(),[s,g]=h.useState({seq:0,nama_pengguna:"",telp_pengguna:"",email_pengguna:"",agent_name:"",type:"",country:"ASIA16",days:0,fup:"",quota:"",quantity:1,product_id:"",product_price:0,ccid_1:"",ccid_2:"",ccid_3:"",ccid_4:"",ccid_5:"",ccid_6:"",ccid_7:"",ccid_8:"",ccid_9:"",ccid_10:""});h.useEffect(()=>{const o=localStorage.getItem("data_success_login");if(o){const t=JSON.parse(o);console.log("data_success_login:",t),console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),O(t.user_name),I(t.session_level),R(t.session_name),M(t.session_name);const c=t.session_name.split("-")[0];G(c),T(c),g(x=>({...x,cobrand_id:t.session_name})),t.session_level.toLowerCase()}J()},[]);const M=async o=>{let t=f+"agents/code/"+o;j.get(t).then(c=>{g(x=>({...x,agent_name:c.data[0].name}))}).catch(c=>{console.log(c)})},T=async o=>{let t=f+"product/partner/cobrand/"+o;j.get(t).then(c=>{console.log("list_product_partner : ",c.data)}).catch(c=>{console.log(c)})},Q=async(o,t,c)=>{let x=f+"product/partner/"+o+"/"+t+"/"+c;j.get(x).then(async u=>{const z=E+ae(),X=k(),Y=U;console.log("list_product_partner_detail : ",u.data),g(p=>({...p,product_id:u.data[0].package_id,product_price:u.data[0].selling_price}));const Z=u.data[0].package_id,F=u.data[0].selling_price,A=s.quantity*F;console.log("total_product_price : ",A);const v=[s.ccid_1,s.ccid_2,s.ccid_3,s.ccid_4,s.ccid_5,s.ccid_6,s.ccid_7,s.ccid_8,s.ccid_9,s.ccid_10];let _="";for(let p=0;p<v.length;p++)v[p]!=""?_+=v[p]+"|":v[p]="";_=_.substring(0,_.length-1),console.log("ccid : ",_);const B={seq:0,order_id:z,order_date:X,order_type:s.type,order_status:"New",order_customer_name:s.nama_pengguna,order_contact_phone:s.telp_pengguna,order_contact_wa:s.telp_pengguna,order_contact_email:s.email_pengguna,order_agent_code:Y,order_agent_name:s.agent_name,order_product:Z,order_country_code:s.country,order_fup:s.fup,order_quota:s.quota,order_days:s.days,order_ccid:_,order_qty:s.quantity,order_product_price:F,order_product_total_price:A};console.log("dataOrder : ",B),await K(B);const $=k();await V({seq:0,order_id:z,event_name:"New Order",event_date:$,username:C}),S("/order/list")}).catch(u=>{alert("Product not found")})},i=o=>{const{name:t,value:c}=o.target;g(x=>({...{...x,[t]:c}}))},H=async o=>{o.preventDefault();try{Q(s.country,s.days,s.fup)}catch(t){console.error("Error adding orders:",t)}},J=async()=>{let o=f+"country";j.get(o).then(t=>{D(t.data)}).catch(t=>{console.log(t)})},K=async o=>{try{const c=(await j.post(b.apiUrl+"orders",o)).data}catch(t){console.error("Error adding orders:",t)}},V=async o=>{try{const c=(await j.post(b.apiUrl+"order/event",o)).data}catch(t){console.error("Error adding order events :",t)}};return e.jsxs(re,{title:"Create Simcard / eSIM",description:"this is Create Simcard/eSIM",children:[e.jsx(se,{title:"Create Simcard / eSIM",items:de}),e.jsx(te,{children:e.jsx(ne,{children:e.jsx("form",{onSubmit:H,children:e.jsxs(q,{children:[e.jsxs(oe,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(le,{variant:"h5",children:["#USER: ",C]}),e.jsxs(q,{display:"flex",gap:1,children:[e.jsx(N,{variant:"outlined",color:"error",onClick:()=>{S("/order/list")},children:"Cancel"}),e.jsx(N,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(ie,{}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{size:{xs:12,sm:4},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nama Pengguna"}),e.jsx(d,{id:"nama_pengguna",name:"nama_pengguna",value:s.nama_pengguna,onChange:i,fullWidth:!0})]}),e.jsxs(r,{size:{xs:12,sm:4},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nomor Telepon Pengguna"}),e.jsx(d,{id:"telp_pengguna",name:"telp_pengguna",value:s.telp_pengguna,onChange:i,fullWidth:!0,type:"phone"})]}),e.jsxs(r,{size:{xs:12,sm:4},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Email Pengguna"}),e.jsx(d,{id:"email_pengguna",name:"email_pengguna",value:s.email_pengguna,onChange:i,fullWidth:!0,type:"email"})]}),e.jsxs(r,{size:{xs:12,sm:4},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Type"}),e.jsxs(y,{"aria-labelledby":"demo-radio-buttons-group-label",value:s.type,onChange:i,id:"type",name:"type",row:!0,children:[e.jsx(a,{value:"Simcard",control:e.jsx(n,{}),label:"Simcard"}),e.jsx(a,{value:"eSIM",control:e.jsx(n,{}),label:"eSIM"})]})]}),e.jsxs(r,{size:{xs:12,sm:3},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Country"}),e.jsx(w,{id:"country",name:"country",value:s.country,onChange:i,fullWidth:!0,children:W.map(o=>e.jsx(m,{value:o.country_code,children:o.country_list},o.seq))})]}),e.jsxs(r,{size:{xs:12,sm:5},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"FUP/day"}),e.jsxs(y,{"aria-labelledby":"demo-radio-buttons-group-label",value:s.fup,onChange:i,id:"fup",name:"fup",row:!0,children:[e.jsx(a,{value:"500",control:e.jsx(n,{}),label:"500mb"}),e.jsx(a,{value:"1000",control:e.jsx(n,{}),label:"1gb"}),e.jsx(a,{value:"2000",control:e.jsx(n,{}),label:"2gb"}),e.jsx(a,{value:"3000",control:e.jsx(n,{}),label:"3gb"}),e.jsx(a,{value:"5000",control:e.jsx(n,{}),label:"5gb"})]})]}),e.jsxs(r,{size:{xs:12,sm:12},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Quota Based"}),e.jsxs(y,{"aria-labelledby":"demo-radio-buttons-group-label",value:s.quota,onChange:i,id:"quota",name:"quota",row:!0,children:[e.jsx(a,{value:"3000",control:e.jsx(n,{}),label:"3GB"}),e.jsx(a,{value:"5000",control:e.jsx(n,{}),label:"5GB"}),e.jsx(a,{value:"6000",control:e.jsx(n,{}),label:"6GB"}),e.jsx(a,{value:"7000",control:e.jsx(n,{}),label:"7GB"}),e.jsx(a,{value:"10000",control:e.jsx(n,{}),label:"10GB"}),e.jsx(a,{value:"15000",control:e.jsx(n,{}),label:"15GB"}),e.jsx(a,{value:"20000",control:e.jsx(n,{}),label:"20GB"}),e.jsx(a,{value:"30000",control:e.jsx(n,{}),label:"30GB"})]})]}),e.jsxs(r,{size:{xs:12,sm:10},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Days"}),e.jsxs(y,{"aria-labelledby":"demo-radio-buttons-group-label",value:s.days,onChange:i,id:"days",name:"days",row:!0,children:[e.jsx(a,{value:"1",control:e.jsx(n,{}),label:"01"}),e.jsx(a,{value:"2",control:e.jsx(n,{}),label:"02"}),e.jsx(a,{value:"3",control:e.jsx(n,{}),label:"03"}),e.jsx(a,{value:"4",control:e.jsx(n,{}),label:"04"}),e.jsx(a,{value:"5",control:e.jsx(n,{}),label:"05"}),e.jsx(a,{value:"6",control:e.jsx(n,{}),label:"06"}),e.jsx(a,{value:"7",control:e.jsx(n,{}),label:"07"}),e.jsx(a,{value:"8",control:e.jsx(n,{}),label:"08"}),e.jsx(a,{value:"10",control:e.jsx(n,{}),label:"10"}),e.jsx(a,{value:"12",control:e.jsx(n,{}),label:"12"}),e.jsx(a,{value:"15",control:e.jsx(n,{}),label:"15"}),e.jsx(a,{value:"20",control:e.jsx(n,{}),label:"20"}),e.jsx(a,{value:"30",control:e.jsx(n,{}),label:"30"})]})]}),e.jsxs(r,{size:{xs:12,sm:2},children:[e.jsx(l,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Quantity"}),e.jsxs(w,{id:"quantity",name:"quantity",value:s.quantity,onChange:i,fullWidth:!0,children:[e.jsx(m,{value:"1",children:"1"}),e.jsx(m,{value:"2",children:"2"}),e.jsx(m,{value:"3",children:"3"}),e.jsx(m,{value:"4",children:"4"}),e.jsx(m,{value:"5",children:"5"}),e.jsx(m,{value:"6",children:"6"}),e.jsx(m,{value:"7",children:"7"}),e.jsx(m,{value:"8",children:"8"}),e.jsx(m,{value:"9",children:"9"}),e.jsx(m,{value:"10",children:"10"})]})]})]}),e.jsxs(r,{size:{xs:12,sm:12},children:[e.jsx(l,{htmlFor:"selling_price",sx:{mt:2,mb:2},children:"ICCID - (eSIM tdk perlu di isi)"}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"1."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_1",name:"ccid_1",value:s.ccid_1,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"2."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_2",name:"ccid_2",value:s.ccid_2,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"3."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_3",name:"ccid_3",value:s.ccid_3,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"4."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_4",name:"ccid_4",value:s.ccid_4,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"5."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_5",name:"ccid_5",value:s.ccid_5,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"6."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_6",name:"ccid_6",value:s.ccid_6,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"7."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_7",name:"ccid_7",value:s.ccid_7,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"8."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_8",name:"ccid_8",value:s.ccid_8,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"9."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_9",name:"ccid_9",value:s.ccid_9,onChange:i,fullWidth:!0})}),e.jsx(r,{size:{xs:12,sm:1},children:e.jsx(l,{htmlFor:"selling_price",sx:{mt:1,textAlign:"center"},children:"10."})}),e.jsx(r,{size:{xs:12,sm:3},children:e.jsx(d,{id:"ccid_10",name:"ccid_10",value:s.ccid_10,onChange:i,fullWidth:!0})})]})]}),L&&e.jsx(ce,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Order created successfully."})]})})})})]})};export{bs as default};
