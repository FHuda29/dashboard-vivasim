import{r as l,j as e,y as F}from"./index-bBoaL7NX.js";import{B as A}from"./Breadcrumb-Db9PlBea.js";import{P as S}from"./PageContainer-ClH7HaBW.js";import{i as g}from"./axios-MmGZYXFl.js";import{C as r}from"./CustomFormLabel-DkCP5Nv8.js";import{C as i}from"./CustomTextField-nzkQUDrv.js";import{C as j}from"./CustomSelect-_oosuc7Q.js";import{j as w}from"./index-VWaDGczM.js";import{B as k}from"./Box-Cbtftx36.js";import{S as I}from"./Stack-DONMPCRZ.js";import{T as P}from"./Typography-B41TU7cT.js";import{B as b}from"./Button-2ihUhOt_.js";import{D as z}from"./Divider-4e_Zm7wz.js";import{G as s}from"./Grid2-CC46JW8y.js";import{M as n}from"./MenuItem-DBmnqxHM.js";import{A as W}from"./Alert-CbLSE_hz.js";import{B as D}from"./BlankCard-BfHU7njI.js";import{C as J}from"./CardContent-TrRQSIz8.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./apiConstants-C71iLEz3.js";import"./TextField-CNoxaAXv.js";import"./useSlot-C2y4Okaq.js";import"./useId-BgKtfLA5.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";import"./Card-DDyARx6g.js";const y=l.createContext(void 0),T=({children:f})=>{const[x,u]=l.useState([]),[_,p]=l.useState(!0),[t]=l.useState(null);l.useEffect(()=>{(async()=>{try{const c=await g.get("agents");u(c.data),p(!1)}catch{p(!1)}})()},[]);const h=async a=>{try{await g.delete("agents",{data:{seq:a}}),u(c=>c.filter(m=>m.seq!==a))}catch(c){console.error("Error deleting products:",c)}},v=async a=>{try{const m=(await g.post("agents",a)).data;u(o=>[...o,m])}catch(c){console.error("Error adding users:",c)}},C=async a=>{try{const m=(await g.put("agents/updatepartner",a)).data;u(o=>o.map(d=>d.seq===m.seq?m:d))}catch(c){console.error("Error updating users:",c)}};return e.jsx(y.Provider,{value:{agents:x,loading:_,error:t,deleteUser:h,addAgent:v,updateAgent:C},children:f})},N=()=>{const{addAgent:f,agents:x}=l.useContext(y),[u,_]=l.useState(!1),p=F(),[t,h]=l.useState({seq:0,agent_code:"",agent_id:"",id_type:"",name:"",address:"",kelurahan:"",kecamatan:"",city:"",province:"",office_phone:"",contact_person:"",contact_phone:"",email:"",commission_pct:0,join_date:"",status:"Active",note:"",account_manager:"",contract_no:"",payment_note:"",bank_name:"",bank_acc_no:"",bank_acc_name:"",cobrand_id:""}),[v,C]=l.useState(!1);l.useEffect(()=>{const m=localStorage.getItem("token");if(m){const o=w(m);console.log("session_name:",o.session_name),console.log("session_level:",o.session_level),h(d=>({...d,cobrand_id:o.session_name}))}if(x.length>0){const o=x[x.length-1].seq;h(d=>({...d,seq:o+1,join_date:new Date().toISOString().slice(0,10)}))}else h(o=>({...o,seq:1,join_date:new Date().toISOString().slice(0,10)}))},[x]);const a=m=>{const{name:o,value:d}=m.target;h(B=>({...{...B,[o]:d}}))},c=async m=>{m.preventDefault();try{console.log("formData: ",t),await f(t),h({seq:0,agent_code:"",agent_id:"",id_type:"",name:"",address:"",kelurahan:"",kecamatan:"",city:"",province:"",office_phone:"",contact_person:"",contact_phone:"",email:"",commission_pct:0,join_date:"",status:"Active",note:"",account_manager:"",contract_no:"",payment_note:"",bank_name:"",bank_acc_no:"",bank_acc_name:"",cobrand_id:""}),_(!0),setTimeout(()=>{_(!1)},5e3),p("/agent/list")}catch(o){console.error("Error adding agent:",o)}};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:c,children:e.jsxs(k,{children:[e.jsxs(I,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(P,{variant:"h5",children:["# ",t.seq]}),e.jsxs(k,{display:"flex",gap:1,children:[e.jsx(b,{variant:"outlined",color:"error",onClick:()=>{p("/agent/list")},children:"Cancel"}),e.jsx(b,{type:"submit",variant:"contained",color:"primary",children:"Save Agent"})]})]}),e.jsx(z,{}),e.jsxs(s,{container:!0,spacing:3,mb:4,children:[e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_id",children:"Agent Code"}),e.jsx(i,{id:"agent_code",name:"agent_code",onChange:a,value:t.agent_code,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Agent Identity"}),e.jsx(i,{id:"agent_id",name:"agent_id",value:t.agent_id,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"ID Type"}),e.jsxs(j,{labelId:"id_type",id:"id_type",name:"id_type",value:t.id_type,onChange:a,fullWidth:!0,children:[e.jsx(n,{value:"KTP",children:"KTP"}),e.jsx(n,{value:"Passport",children:"Passport"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Name"}),e.jsx(i,{id:"name",name:"name",value:t.name,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Address"}),e.jsx(i,{id:"address",name:"address",value:t.address,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Kelurahan"}),e.jsx(i,{id:"kelurahan",name:"kelurahan",value:t.kelurahan,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Kecamatan"}),e.jsx(i,{id:"kecamatan",name:"kecamatan",value:t.kecamatan,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"City"}),e.jsxs(j,{labelId:"city",id:"city",name:"city",value:t.city,onChange:a,fullWidth:!0,children:[e.jsx(n,{value:"Jakarta Barat",children:"Jakarta Barat"}),e.jsx(n,{value:"Jakarta Pusat",children:"Jakarta Pusat"}),e.jsx(n,{value:"Jakarta Selatan",children:"Jakarta Selatan"}),e.jsx(n,{value:"Jakarta Timur",children:"Jakarta Timur"}),e.jsx(n,{value:"Jakarta Utara",children:"Jakarta Utara"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"Province"}),e.jsxs(j,{labelId:"province",id:"province",name:"province",value:t.province,onChange:a,fullWidth:!0,children:[e.jsx(n,{value:"DKI Jakarta",children:"DKI Jakarta"}),e.jsx(n,{value:"Banten",children:"Banten"}),e.jsx(n,{value:"Jawa Barat",children:"Jawa Barat"}),e.jsx(n,{value:"Jawa Tengah",children:"Jakarta Tengah"}),e.jsx(n,{value:"Jawa Timur",children:"Jawa Timur"}),e.jsx(n,{value:"Sumatera Barat",children:"Sumatera Barat"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Office Phone"}),e.jsx(i,{id:"office_phone",name:"office_phone",value:t.office_phone,onChange:a,type:"phone",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contact Person"}),e.jsx(i,{id:"contact_person",name:"contact_person",value:t.contact_person,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contact Phone"}),e.jsx(i,{id:"contact_phone",name:"contact_phone",value:t.contact_phone,onChange:a,type:"phone",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Email"}),e.jsx(i,{id:"email",name:"email",value:t.email,onChange:a,type:"email",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Commission %"}),e.jsx(i,{id:"commission_pct",name:"commission_pct",value:t.commission_pct,onChange:a,type:"number",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Bank ID"}),e.jsxs(j,{labelId:"bank_name",id:"bank_name",name:"bank_name",value:t.bank_name,onChange:a,fullWidth:!0,children:[e.jsx(n,{value:"BCA",children:"BCA"}),e.jsx(n,{value:"Bank Mandiri",children:"Bank Mandiri"}),e.jsx(n,{value:"BRI",children:"BRI"}),e.jsx(n,{value:"BNI",children:"BNI"}),e.jsx(n,{value:"Bank Danamon",children:"Bank Danamon"}),e.jsx(n,{value:"Bank CIMB Niaga",children:"Bank CIMB Niaga"}),e.jsx(n,{value:"Bank OCBC",children:"Bank OCBC"}),e.jsx(n,{value:"Bank Permata",children:"Bank Permata"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Account No"}),e.jsx(i,{id:"bank_acc_no",name:"bank_acc_no",value:t.bank_acc_no,onChange:a,type:"number",fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Account Name"}),e.jsx(i,{id:"bank_acc_name",name:"bank_acc_name",value:t.bank_acc_name,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Payment"}),e.jsxs(j,{labelId:"payment_note",id:"payment_note",name:"payment_note",value:t.payment_note,onChange:a,fullWidth:!0,children:[e.jsx(n,{value:"Cash",children:"Cash / Transfer"}),e.jsx(n,{value:"Credit",children:"Credit Term 7 days"})]})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Contract Number"}),e.jsx(i,{id:"contract_no",name:"contract_no",value:t.contract_no,onChange:a,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:6},children:[e.jsx(r,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Special Note"}),e.jsx(i,{id:"note",name:"note",value:t.note,onChange:a,fullWidth:!0})]})]}),u&&e.jsx(W,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Agent added successfully."})]})})})},E=[{to:"/",title:"Home"},{title:"Agent Create"}],Oe=()=>e.jsx(T,{children:e.jsxs(S,{title:"Agent User",description:"this is Create Agent",children:[e.jsx(A,{title:"Agent User",items:E}),e.jsx(D,{children:e.jsx(J,{children:e.jsx(N,{})})})]})});export{Oe as default};
