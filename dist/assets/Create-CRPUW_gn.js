import{r as b,y as M,j as t}from"./index-bBoaL7NX.js";import{B as U}from"./Breadcrumb-Db9PlBea.js";import{P as G}from"./PageContainer-ClH7HaBW.js";import{I as R,a as H}from"./index-KrFlOehc.js";import{C as p}from"./CustomFormLabel-DkCP5Nv8.js";import{C as V}from"./CustomSelect-_oosuc7Q.js";import{C as h}from"./CustomTextField-nzkQUDrv.js";import{i as q,f as L}from"./index-J11PKsb-.js";import{B as d}from"./Box-Cbtftx36.js";import{S as g}from"./Stack-DONMPCRZ.js";import{T as s}from"./Typography-B41TU7cT.js";import{B as C}from"./Button-2ihUhOt_.js";import{D as S}from"./Divider-4e_Zm7wz.js";import{M as T}from"./MenuItem-DBmnqxHM.js";import{G as u}from"./Grid2-CC46JW8y.js";import{I as _}from"./IconPlus-BRrLNseT.js";import{P as $}from"./Paper-CEo52ZYq.js";import{T as J}from"./TableContainer-OLbhJ7zr.js";import{T as K,a as Q,b as A,c as l,d as X}from"./TableRow-Zqkg4FIQ.js";import{T as w}from"./Tooltip-CRAcMsX-.js";import{I as D}from"./IconButton-6ozhzS-w.js";import{I as Y}from"./IconSquareRoundedPlus-DLl9zGd-.js";import{I as Z}from"./IconTrash-B1FRgie-.js";import{A as tt}from"./Alert-CbLSE_hz.js";import{B as et}from"./BlankCard-BfHU7njI.js";import{C as rt}from"./CardContent-TrRQSIz8.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlot-C2y4Okaq.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./index-DT2YvziZ.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Popper-ppbRY3WN.js";import"./Close-BajIXLAg.js";import"./Card-DDyARx6g.js";const it=()=>{const{addInvoice:B,invoices:j}=b.useContext(R),[W,y]=b.useState(!1),I=M(),[o,m]=b.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});b.useEffect(()=>{if(j.length>0){const r=j[j.length-1].id;m(e=>({...e,id:r+1}))}else m(r=>({...r,id:1}))},[j]);const f=r=>{let e=0;r.forEach(n=>{const c=parseFloat(n.unitPrice)||0,k=parseInt(n.units)||0,F=c*k;e+=F,n.unitTotalPrice=F});const i=e*.1,a=e+i;return{subtotal:e,vat:i,grandTotal:a}},x=r=>{const{name:e,value:i}=r.target;m(a=>{const n={...a,[e]:i},c=f(n.orders);return{...n,...c}})},v=(r,e,i)=>{m(a=>{const n=[...a.orders];n[r]={...n[r],[e]:i};const c=f(n);return{...a,orders:n,...c}})},P=()=>{m(r=>{const e=[...r.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],i=f(e);return{...r,orders:e,...i}})},z=r=>{m(e=>{const i=e.orders.filter((n,c)=>c!==r),a=f(i);return{...e,orders:i,...a}})},E=async r=>{r.preventDefault();try{await B(o),m({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),y(!0),setTimeout(()=>{y(!1)},5e3),I("/apps/invoice/list")}catch(e){console.error("Error adding invoice:",e)}},O=q(new Date(o.date))?new Date(o.date):new Date,N=L(O,"EEEE, MMMM dd, yyyy");return t.jsx(t.Fragment,{children:t.jsx("form",{onSubmit:E,children:t.jsxs(d,{children:[t.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[t.jsxs(s,{variant:"h5",children:["# ",o.id]}),t.jsxs(d,{display:"flex",gap:1,children:[t.jsx(C,{variant:"outlined",color:"error",onClick:()=>{I("/apps/invoice/list")},children:"Cancel"}),t.jsx(C,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),t.jsx(S,{}),t.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsxs(d,{children:[t.jsx(p,{htmlFor:"demo-simple-select",children:"Order Status"}),t.jsxs(V,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o.status,onChange:x,disabled:!0,children:[t.jsx(T,{value:"Pending",children:"Pending"}),t.jsx(T,{value:"Shipped",children:"Shipped"}),t.jsx(T,{value:"Delivered",children:"Delivered"})]})]}),t.jsxs(d,{textAlign:"right",children:[t.jsx(p,{htmlFor:"demo-simple-select",children:"Order Date"}),t.jsxs(s,{variant:"body1",children:[" ",N]})]})]}),t.jsx(S,{}),t.jsxs(u,{container:!0,spacing:3,mb:4,children:[t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"bill-from",children:"Bill From"}),t.jsx(h,{id:"bill-from",name:"billFrom",value:o.billFrom,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),t.jsx(h,{name:"billTo",value:o.billTo,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),t.jsx(h,{name:"billFromAddress",value:o.billFromAddress,onChange:x,fullWidth:!0})]}),t.jsxs(u,{size:{xs:12,sm:6},children:[t.jsx(p,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),t.jsx(h,{name:"billToAddress",value:o.billToAddress,onChange:x,fullWidth:!0})]})]}),t.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[t.jsx(s,{variant:"h6",children:"Items Details :"}),t.jsx(C,{onClick:P,variant:"contained",color:"primary",startIcon:t.jsx(_,{width:18}),children:"Add Item"})]}),t.jsx($,{variant:"outlined",children:t.jsx(J,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:t.jsxs(K,{children:[t.jsx(Q,{children:t.jsxs(A,{children:[t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Item Name"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Units"})}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),t.jsx(l,{}),t.jsx(l,{children:t.jsx(s,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),t.jsx(X,{children:o.orders.map((r,e)=>t.jsxs(A,{children:[t.jsx(l,{children:t.jsx(h,{type:"text",value:r.itemName,placeholder:"Item Name",onChange:i=>v(e,"itemName",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(h,{type:"number",value:r.unitPrice,placeholder:"Unit Price",onChange:i=>v(e,"unitPrice",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(h,{type:"number",value:r.units,placeholder:"Units",onChange:i=>v(e,"units",i.target.value),fullWidth:!0})}),t.jsx(l,{children:t.jsx(s,{variant:"body1",children:r.unitTotalPrice})}),t.jsx(l,{}),t.jsxs(l,{children:[t.jsx(w,{title:"Add Item",children:t.jsx(D,{onClick:P,color:"primary",children:t.jsx(Y,{width:22})})}),t.jsx(w,{title:"Delete Item",children:t.jsx(D,{onClick:()=>z(e),color:"error",children:t.jsx(Z,{width:22})})})]})]},e))})]})})}),t.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"Sub Total:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.subtotal})]}),t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"VAT:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.vat})]}),t.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[t.jsx(s,{variant:"body1",fontWeight:600,children:"Grand Total:"}),t.jsx(s,{variant:"body1",fontWeight:600,children:o.grandTotal})]})]}),W&&t.jsx(tt,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},st=[{to:"/",title:"Home"},{title:"Invoice Create"}],ue=()=>t.jsx(H,{children:t.jsxs(G,{title:"Create Invoice",description:"this is Create Invoice",children:[t.jsx(U,{title:"Create Invoice",items:st}),t.jsx(et,{children:t.jsx(rt,{children:t.jsx(it,{})})})]})});export{ue as default};
