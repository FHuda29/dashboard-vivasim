import{y as T,r as i,j as e}from"./index-bBoaL7NX.js";import{P as C}from"./PageContainer-ClH7HaBW.js";import{P}from"./ParentCard-CFe-nEgX.js";import{B as I}from"./BlankCard-BfHU7njI.js";import{n as g}from"./Utils-DZtz8wsc.js";import{i as p}from"./axios-MmGZYXFl.js";import{j as w}from"./index-VWaDGczM.js";import{T as L}from"./TableContainer-OLbhJ7zr.js";import{T as R,a as W,b as d,c as a,d as k}from"./TableRow-Zqkg4FIQ.js";import{T as o}from"./Typography-B41TU7cT.js";import{C as E}from"./Chip-Bm7HxxC0.js";import"./Paper-CEo52ZYq.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./Box-Cbtftx36.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";const re=()=>{const l=T(),[U,y]=i.useState(""),[q,j]=i.useState(""),[B,v]=i.useState("");i.useEffect(()=>{const t=localStorage.getItem("token");if(t){const s=w(t);if(console.log("user_name:",s.user_name),console.log("session_name:",s.session_name),console.log("session_level:",s.session_level),console.log("last_login_time:",s.last_login_time),console.log("blocked:",s.blocked),y(s.user_name),j(s.session_level),v(s.session_name),s.session_level.toLowerCase()==="partner"||s.session_level.toLowerCase()==="partner-admin"){const n=s.session_name.split("-")[0];f(n)}else s.session_level.toLowerCase()==="agent-manager"||s.session_level.toLowerCase()==="agent-admin"?x(s.session_name):S()}else l("/auth/login")},[]);const x=async t=>{let s="inventory/summary/agent/"+t;p.get(s).then(n=>{h(n.data)}).catch(n=>{n.response&&n.response.status===403||n.response.status===401?l("/auth/login"):console.log(n)})},f=async t=>{let s="inventory/summary/partner/"+t;p.get(s).then(n=>{h(n.data)}).catch(n=>{n.response&&n.response.status===403||n.response.status===401?l("/auth/login"):console.log(n)})},S=async()=>{p.get("inventory/summary/all").then(s=>{h(s.data)}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?l("/auth/login"):console.log(s)})},[b,h]=i.useState([]),c=b,[m,D]=i.useState(0),[r,N]=i.useState(10),u=m>0?Math.max(0,(1+m)*r-c.length):0,_=()=>{let t=0;return c.forEach(async s=>{t=s.quantity+t}),t};return e.jsx(C,{title:"Inventory Summary",description:"this is inventory summary page",children:e.jsx(P,{title:"Summary List",children:e.jsx(I,{children:e.jsx(L,{children:e.jsxs(R,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(W,{children:e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Seq"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Partner ID"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Agent ID"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Sim Type"})}),e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:"Status"})}),e.jsx(a,{align:"center",children:e.jsx(o,{variant:"subtitle2",children:"Quantity"})})]})}),e.jsxs(k,{children:[(r>0?c.slice(m*r,m*r+r):c).map((t,s)=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(o,{variant:"subtitle2",children:s+1})}),e.jsx(a,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.cobrand_id})}),e.jsx(a,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.agent_code})}),e.jsx(a,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.sim_type})}),e.jsx(a,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(E,{color:t.status==="Ready"?"success":t.status==="Open"?"warning":t.status=="Used"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})})}),e.jsx(a,{align:"right",children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:g(t.quantity)})})]},s)),e.jsxs(d,{style:{height:53*u},children:[e.jsx(a,{colSpan:5,children:e.jsx(o,{variant:"subtitle2",fontSize:16,fontWeight:"600",children:"Total"})}),e.jsx(a,{align:"right",children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"600",children:g(_())})})]}),u>0&&e.jsx(d,{style:{height:53*u},children:e.jsx(a,{colSpan:6})})]})]})})})})})};export{re as default};
