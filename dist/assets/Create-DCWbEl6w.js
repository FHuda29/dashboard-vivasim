import{R as u,r as a,y as z,z as h,j as e}from"./index-q1gJB5H0.js";import{B as I}from"./Breadcrumb-Sx0jSoUO.js";import{P as E}from"./PageContainer-ShAoTXqo.js";import{P as R,a as T}from"./index-DbEAqZ63.js";import{C as m}from"./CustomFormLabel-Co2JOWHW.js";import{C as x}from"./CustomTextField-CMbY8JHb.js";import{A as U}from"./apiConstants-ChAepINk.js";import{C as g}from"./CustomSelect-BHYrF69e.js";import{B as _}from"./Box-DjbeIn6R.js";import{S as W}from"./Stack-Cgjz-K8z.js";import{T as G}from"./Typography-BxNQAu-e.js";import{B as f}from"./Button-BiCTccas.js";import{D as M}from"./Divider-D_QCNZIA.js";import{G as n}from"./Grid2-CqZBoIec.js";import{M as j}from"./MenuItem-C7G2QaZb.js";import{A as N}from"./Alert-Bdc-5zR2.js";import{B as H}from"./BlankCard-CQVnRHeI.js";import{C as J}from"./CardContent-DWdd_6p9.js";import"./Paper-BfYJvf2K.js";import"./useSlotProps-fxj6j4ji.js";import"./Link-CbpODTtF.js";import"./IconCircle-BrnHHpVV.js";import"./createReactComponent-4CU5_L6_.js";import"./TextField-jB7bX9P6.js";import"./useSlot-C5ueERyv.js";import"./useId-SD238GYo.js";import"./Select-Be-xDOsD.js";import"./Menu-CI0qCauS.js";import"./Popover-B2Kr2jsd.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-NO3rZCFB.js";import"./utils-NaTNKqhR.js";import"./getReactElementRef-BT4zc5ME.js";import"./mergeSlotProps-02bNjKG-.js";import"./Modal-BICTQXNK.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-CFBZdEcL.js";import"./List-CdKlZLq8.js";import"./utils-iop7lDec.js";import"./useControlled-2SXrPK_C.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CXKl78CG.js";import"./FormControl-BbMb6ExL.js";import"./createStack-B9LP_pb5.js";import"./CircularProgress-C7fJ-WBe.js";import"./dividerClasses-BBaEuH8O.js";import"./listItemTextClasses-BL7DomhZ.js";import"./Close-D9Qbw5x7.js";import"./IconButton-Dqm0TkKE.js";import"./Card-bW_5XQOp.js";const C=U.apiUrl,O=()=>{const[b,P]=u.useState([]),[v,S]=u.useState([]),[y,k]=a.useState(""),[Q,q]=a.useState(""),{addProduct:D,products:c}=a.useContext(R),[F,l]=a.useState(!1),p=z(),[o,i]=a.useState({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""});a.useEffect(()=>{const r=localStorage.getItem("data_success_login");if(r){const t=JSON.parse(r);console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),k(t.session_level),q(t.session_name),i(s=>({...s,cobrand_id:t.session_name})),t.session_level.toLowerCase()==="partner"?B(t.session_name):A()}if(c.length>0){const t=c[c.length-1].seq;i(s=>({...s,seq:t+1}))}else i(t=>({...t,seq:1}))},[c]);const d=r=>{const{name:t,value:s}=r.target;i(L=>({...{...L,[t]:s}}))},w=async r=>{r.preventDefault();try{await D(o),i({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""}),l(!0),setTimeout(()=>{l(!1)},5e3),p("/product/partner")}catch(t){console.error("Error adding product:",t)}},A=async()=>{let r=C+"partners";h.get(r).then(t=>{P(t.data)}).catch(t=>{console.log(t)})},B=async r=>{let t=C+"agents/cobrand/"+r;h.get(t).then(s=>{S(s.data)}).catch(s=>{console.log(s)})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:w,children:e.jsxs(_,{children:[e.jsxs(W,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(G,{variant:"h5",children:["# ",o.seq]}),e.jsxs(_,{display:"flex",gap:1,children:[e.jsx(f,{variant:"outlined",color:"error",onClick:()=>{p("/product/partner")},children:"Cancel"}),e.jsx(f,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(M,{}),e.jsxs(n,{container:!0,spacing:3,mb:4,children:[y.toLowerCase()==="partner"?e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"cobrand_id",children:"Agent Code"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:o.cobrand_id,onChange:d,fullWidth:!0,children:v.map(r=>e.jsxs(j,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.agent_code]},r.seq))})]}):e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"cobrand_id",children:"Partner ID"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:o.cobrand_id,onChange:d,fullWidth:!0,children:b.map(r=>e.jsxs(j,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.cobrand_name]},r.seq))})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"package_id",children:"Package ID"}),e.jsx(x,{id:"package_id",name:"package_id",onChange:d,value:o.package_id,fullWidth:!0})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"selling_price",sx:{mt:0},children:"Selling Price"}),e.jsx(x,{id:"selling_price",name:"selling_price",value:o.selling_price,onChange:d,fullWidth:!0})]})]}),F&&e.jsx(N,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Product created successfully."})]})})})},K=[{to:"/",title:"Home"},{title:"Product Partner Create"}],Ve=()=>e.jsx(T,{children:e.jsxs(E,{title:"Create Product Partner",description:"this is Create Product Partner",children:[e.jsx(I,{title:"Create Product Partner",items:K}),e.jsx(H,{children:e.jsx(J,{children:e.jsx(O,{})})})]})});export{Ve as default};
