import{y as Z,r as h,z as b,j as e}from"./index-pZ9xQgMg.js";import{P as $}from"./PageContainer-LYar8IhV.js";import{B as ee}from"./Breadcrumb-CRa5l2zq.js";import{P as te}from"./ParentCard-BOCKQ1T0.js";import{B as re}from"./BlankCard-jsHF22Za.js";import{C as A}from"./CustomSelect-C7618vxy.js";import{C}from"./CustomTextField-CVZyUcT3.js";import{T as se,L as R,F as E,K as z}from"./LastPage-CMnMK6Rb.js";import{K as F}from"./KeyboardArrowRight-D7dm8ctS.js";import{f as ie,n as O,c as ne}from"./Utils-eYPio9SP.js";import{A as B}from"./apiConstants-ChAepINk.js";import{B as w}from"./Box-DgOhk5yP.js";import{G as o}from"./Grid2-TVAQUeLW.js";import{T as r}from"./Typography-PCIzasSl.js";import{M as a}from"./MenuItem-BUpQ2083.js";import{B as ae}from"./Button-DrpnHyAw.js";import{T as oe}from"./TableContainer-DO_vUeZK.js";import{T as le,a as ce,b as y,c as s,d as de}from"./TableRow-D5xGC-Fx.js";import{T as _}from"./Tooltip-DD1oevea.js";import{I as c}from"./IconButton-D8l5j-3s.js";import{I as U}from"./IconEye-RCY_dut9.js";import{c as K}from"./createReactComponent-C7i1OeoA.js";import{C as he}from"./Chip-F9KGUN77.js";import{T as xe}from"./TablePagination-DLW_6SZX.js";import{u as me}from"./Paper-Bglc4K2l.js";import"./useSlotProps-D9QVx9CU.js";import"./Link-DmIxGPWX.js";import"./IconCircle-CU5CO1wM.js";import"./Card-Dnm4-j67.js";import"./CardHeader-YzZ0dXBA.js";import"./useSlot-C-z2829C.js";import"./Divider-BxeHuQda.js";import"./dividerClasses-BO-YFw3q.js";import"./CardContent-DHXKlgZi.js";import"./Select-KnVOJfU6.js";import"./Menu-kcqCS8x-.js";import"./Popover-ti3EBHaH.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CByEer0C.js";import"./utils--BW9XhXC.js";import"./getReactElementRef-BDXd3hfF.js";import"./mergeSlotProps-D2utqxEY.js";import"./Modal-ETINFcPv.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-HPxiTNUe.js";import"./List-BgcNoc8S.js";import"./utils-iop7lDec.js";import"./useControlled-kCJ_Peco.js";import"./useId-DuuGdQhb.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D34Ydy4-.js";import"./TextField-52YJDDYc.js";import"./FormControl-B2XRo0iR.js";import"./createSvgIcon-Df6LfCnN.js";import"./index-DuUv4AGY.js";import"./index-DT2YvziZ.js";import"./listItemTextClasses-B-a-vnZw.js";import"./CircularProgress-KhQwCvJ5.js";import"./Popper--abDNuTs.js";import"./KeyboardArrowRight-CDfWkglB.js";import"./LastPage-r6NFrBik.js";import"./Toolbar-Cf1pwV59.js";var je=K("file-invoice","IconFileInvoice",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 7l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M13 17l2 0",key:"svg-4"}]]),H=K("history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]);const W=B.apiUrl;function pe(p){const x=me(),{count:u,page:d,rowsPerPage:g,onPageChange:m}=p,S=l=>{m(l,0)},P=l=>{m(l,d-1)},I=l=>{m(l,d+1)},k=l=>{m(l,Math.max(0,Math.ceil(u/g)-1))};return e.jsxs(w,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(c,{onClick:S,disabled:d===0,"aria-label":"first page",children:x.direction==="rtl"?e.jsx(R,{}):e.jsx(E,{})}),e.jsx(c,{onClick:P,disabled:d===0,"aria-label":"previous page",children:x.direction==="rtl"?e.jsx(F,{}):e.jsx(z,{})}),e.jsx(c,{onClick:I,disabled:d>=Math.ceil(u/g)-1,"aria-label":"next page",children:x.direction==="rtl"?e.jsx(z,{}):e.jsx(F,{})}),e.jsx(c,{onClick:k,disabled:d>=Math.ceil(u/g)-1,"aria-label":"last page",children:x.direction==="rtl"?e.jsx(E,{}):e.jsx(R,{})})]})}const ue=[{to:"/",title:"Home"},{title:"Order"}],At=()=>{const p=Z(),[x,u]=h.useState(""),[d,g]=h.useState(""),[m,S]=h.useState("");h.useEffect(()=>{const t=localStorage.getItem("data_success_login");if(t){const i=JSON.parse(t);if(console.log("user_name:",i.user_name),console.log("session_name:",i.session_name),console.log("session_level:",i.session_level),console.log("last_login_time:",i.last_login_time),console.log("blocked:",i.blocked),u(i.session_level),g(i.session_name),S(i.user_name),i.session_level.toLowerCase()==="partner"){const n=i.session_name.split("-")[0];k(n)}else i.session_level.toLowerCase()==="agent-manager"?P(i.session_name):I()}else p("/auth/login")},[]);const P=async t=>{let i=W+"orders/agent/"+t;b.get(i).then(n=>{T(n.data)}).catch(n=>{console.log(n)})},I=async()=>{let t=W+"orders";b.get(t).then(i=>{T(i.data)}).catch(i=>{console.log(i)})},k=async t=>{let i=W+"orders/?agent_code="+t;b.get(i).then(n=>{T(n.data)}).catch(n=>{console.log(n)})},[l,T]=h.useState([]),f=l,[v,D]=h.useState(0),[j,G]=h.useState(10),L=v>0?Math.max(0,(1+v)*j-f.length):0,q=(t,i)=>{D(i)},J=t=>{G(parseInt(t.target.value,10)),D(0)},Y=()=>{console.log("move")},M=t=>{p("/order/detail/"+t)},N=t=>{p("/order/history/"+t)},V=async t=>{try{const n=(await b.get(B.apiUrl+"orders/update/"+t+"/Closed")).data;if(n){if(n.order_id===t){const X=ne();await Q({seq:0,order_id:t,event_name:"Closed - Upload Simcard",event_date:X,username:m}),window.location.reload()}}else console.error("Error update status gagal")}catch(i){console.error("Error adding order events :",i)}},Q=async t=>{try{const n=(await b.post(B.apiUrl+"order/event",t)).data}catch(i){console.error("Error adding order events :",i)}};return e.jsxs($,{title:"Order",description:"this is order page",children:[e.jsx(ee,{title:"Order",items:ue}),e.jsxs(te,{title:"Order List",children:[e.jsx(w,{mt:2,mb:2,children:e.jsx(o,{size:{xs:12},children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Order ID"}),e.jsx(C,{fullWidth:!0})]}),e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Customer Name"}),e.jsx(C,{fullWidth:!0})]}),e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Order Date Begin"}),e.jsx(C,{fullWidth:!0,type:"date"})]}),e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Order Date End"}),e.jsx(C,{fullWidth:!0,type:"date"})]}),e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Order Status"}),e.jsxs(A,{fullWidth:!0,variant:"outlined",children:[e.jsx(a,{value:1,children:"New"}),e.jsx(a,{value:2,children:"Approved"}),e.jsx(a,{value:3,children:"Paid"}),e.jsx(a,{value:4,children:"Delivered"}),e.jsx(a,{value:5,children:"Returned"}),e.jsx(a,{value:6,children:"Closed"}),e.jsx(a,{value:7,children:"Cancelled"})]})]}),e.jsxs(o,{size:{xs:6},children:[e.jsx(r,{variant:"subtitle1",children:"Agent"}),e.jsxs(A,{fullWidth:!0,variant:"outlined",children:[e.jsx(a,{value:1,children:"GRM - TIA - TIA FINANCE HO"}),e.jsx(a,{value:2,children:"RKL - RKL - DAVID - DAVID WIDJAJA"}),e.jsx(a,{value:3,children:"RYC - BUFANNY - BU FANNY"})]})]}),e.jsxs(o,{size:{xs:3},children:[e.jsx(r,{variant:"subtitle1",children:"Type"}),e.jsxs(A,{fullWidth:!0,variant:"outlined",children:[e.jsx(a,{value:1,children:"Simcard"}),e.jsx(a,{value:2,children:"eSIM"})]})]}),e.jsx(o,{size:{xs:12},children:e.jsx(ae,{variant:"contained",color:"primary",onClick:Y,children:"Get Record"})})]})})}),e.jsx(re,{children:e.jsx(oe,{children:e.jsxs(le,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(ce,{children:e.jsxs(y,{children:[e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Action"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Seq"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Order ID"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Order Date"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Type"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Status"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Customer Name"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Contact Phone"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Contact WA"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Email"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Agent Code"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Agent Name"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Product"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Qty"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Total Order"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:"Total Cost"})})]})}),e.jsxs(de,{children:[(j>0?f.slice(v*j,v*j+j):f).map((t,i)=>e.jsxs(y,{children:[x.toLocaleLowerCase()==="cs-web"?t.order_status==="Paid"?e.jsxs(s,{children:[e.jsx(_,{title:"Detail CCID",children:e.jsx(c,{color:"success",onClick:()=>M(t.order_id),children:e.jsx(U,{width:22})})}),e.jsx(_,{title:"Close Order",children:e.jsx(c,{color:"primary",onClick:()=>V(t.order_id),children:e.jsx(je,{width:22})})})]}):e.jsx(s,{children:e.jsx(_,{title:"History",children:e.jsx(c,{color:"primary",onClick:()=>N(t.order_id),children:e.jsx(H,{width:22})})})}):e.jsxs(s,{children:[e.jsx(_,{title:"Detail CCID",children:e.jsx(c,{color:"success",onClick:()=>M(t.order_id),children:e.jsx(U,{width:22})})}),e.jsx(_,{title:"History",children:e.jsx(c,{color:"primary",onClick:()=>N(t.order_id),children:e.jsx(H,{width:22})})})]}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle2",children:i+1})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_id})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:ie(t.order_date)})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_type})}),e.jsx(s,{children:e.jsx(he,{color:t.order_status==="Paid"?"success":t.order_status==="New"?"warning":t.order_status==="Cancel"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.order_status})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_customer_name})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_contact_phone.length>0?t.order_contact_phone:"-"})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_contact_wa.length>0?t.order_contact_wa:"-"})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_contact_email.length>0?t.order_contact_email:"-"})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_agent_code})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_agent_name})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_product})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:O(t.order_qty)})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:O(t.order_product_price)})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:O(t.order_product_total_price)})})]},i)),L>0&&e.jsx(y,{style:{height:53*L},children:e.jsx(s,{colSpan:6})})]}),e.jsx(se,{children:e.jsx(y,{children:e.jsx(xe,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:16,count:f.length,rowsPerPage:j,page:v,SelectProps:{native:!0},onPageChange:q,onRowsPerPageChange:J,ActionsComponent:pe})})})]})})})]})]})};export{At as default};
