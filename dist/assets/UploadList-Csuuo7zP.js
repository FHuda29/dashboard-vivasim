import{y as me,r as a,j as e}from"./index-bBoaL7NX.js";import{P as je}from"./PageContainer-ClH7HaBW.js";import{P as pe}from"./ParentCard-CFe-nEgX.js";import{B as ge}from"./BlankCard-BfHU7njI.js";import{C as _}from"./CustomSelect-_oosuc7Q.js";import{C as D}from"./CustomTextField-nzkQUDrv.js";import{T as ve,L as V,F as Q,K as X}from"./LastPage-CUO0XoGI.js";import{K as Z}from"./KeyboardArrowRight-CL0uG8E4.js";import{f as Ce,n as fe,c as $}from"./Utils-DZtz8wsc.js";import{i as P}from"./axios-MmGZYXFl.js";import{j as be}from"./index-VWaDGczM.js";import{B as te}from"./Box-Cbtftx36.js";import{G as l}from"./Grid2-CC46JW8y.js";import{T as s}from"./Typography-B41TU7cT.js";import{M as n}from"./MenuItem-DBmnqxHM.js";import{B as ee}from"./Button-2ihUhOt_.js";import{T as ye}from"./TableContainer-OLbhJ7zr.js";import{T as Se,a as Ie,b as O,c as i,d as _e}from"./TableRow-Zqkg4FIQ.js";import{T as c}from"./Tooltip-CRAcMsX-.js";import{I as o}from"./IconButton-6ozhzS-w.js";import{I as k}from"./IconEye-BtFi0ubB.js";import{I as De,a as R}from"./IconHistory-BgQY2Ikj.js";import{I as Pe}from"./IconRowRemove-EM_Win1C.js";import{I as Oe}from"./IconEdit-BUB-FThl.js";import{C as ke}from"./Chip-Bm7HxxC0.js";import{T as we}from"./TablePagination-DdevPbi4.js";import{u as Te}from"./Paper-CEo52ZYq.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./createSvgIcon-DcL-YXBs.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./listItemTextClasses-DSEuY2ct.js";import"./CircularProgress-BIjyWvHZ.js";import"./Popper-ppbRY3WN.js";import"./createReactComponent-BVlLIvSm.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./Toolbar-BWjUcWdc.js";function Ee(x){const u=Te(),{count:v,page:m,rowsPerPage:C,onPageChange:j}=x,w=d=>{j(d,0)},f=d=>{j(d,m-1)},b=d=>{j(d,m+1)},y=d=>{j(d,Math.max(0,Math.ceil(v/C)-1))};return e.jsxs(te,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(o,{onClick:w,disabled:m===0,"aria-label":"first page",children:u.direction==="rtl"?e.jsx(V,{}):e.jsx(Q,{})}),e.jsx(o,{onClick:f,disabled:m===0,"aria-label":"previous page",children:u.direction==="rtl"?e.jsx(Z,{}):e.jsx(X,{})}),e.jsx(o,{onClick:b,disabled:m>=Math.ceil(v/C)-1,"aria-label":"next page",children:u.direction==="rtl"?e.jsx(X,{}):e.jsx(Z,{})}),e.jsx(o,{onClick:y,disabled:m>=Math.ceil(v/C)-1,"aria-label":"last page",children:u.direction==="rtl"?e.jsx(Q,{}):e.jsx(V,{})})]})}const Vt=()=>{const x=me(),[u,v]=a.useState(""),[m,C]=a.useState(""),[j,w]=a.useState(""),[f,b]=a.useState(""),[y,d]=a.useState(""),[A,N]=a.useState(""),[B,M]=a.useState(""),[W,F]=a.useState(""),[z,T]=a.useState(""),[U,H]=a.useState("");a.useEffect(()=>{const t=localStorage.getItem("token");if(t){const r=be(t);v(r.session_level),C(r.session_name),w(r.user_name),K()}else x("/auth/login")},[]);const K=async()=>{P.get("orders/upload/list").then(r=>{r.data.success&&(ie(r.data.orders),G(r.data.orders))}).catch(r=>{r.response&&r.response.status===403||r.response.status===401?x("/auth/login"):console.log(r)})},re=()=>{K(),b(""),d(""),N(""),M(""),F(""),T(""),H("")},[se,ie]=a.useState([]),[ae,G]=a.useState([]),S=ae,[g,q]=a.useState(0),[p,ne]=a.useState(10),Y=g>0?Math.max(0,(1+g)*p-S.length):0,oe=(t,r)=>{q(r)},le=t=>{ne(parseInt(t.target.value,10)),q(0)},de=()=>{console.log("get record");const t=se.filter(r=>{const h=new Date(r.order_date);return(!f||r.order_id.includes(f))&&(!y||r.order_customer_name.toLowerCase().includes(y.toLowerCase()))&&(!A||h>=new Date(A))&&(!B||h<=new Date(B))&&(!W||r.order_status===W)&&(!U||r.order_agent_code.toLowerCase().includes(U.toLowerCase()))&&(!z||r.product_type===z)});G(t)},I=t=>{x("/simcard/upload/detail/"+t)},ce=t=>{x("/order/edit/"+t)},E=t=>{x("/order/history/"+t)},he=async t=>{try{const h=(await P.get("orders/update/"+t+"/Cancelled")).data;if(h){if(h.order_id===t){const L=$();await J({seq:0,order_id:t,event_name:"Cancelled - Order Simcard/eSIM",event_date:L,username:j}),window.location.reload()}}else console.error("Error update status gagal")}catch(r){console.error("Error adding order events :",r)}},xe=async t=>{try{const h=(await P.get("orders/update/"+t+"/Closed")).data;if(h){if(h.order_id===t){const L=$();await J({seq:0,order_id:t,event_name:"Closed - Upload Simcard",event_date:L,username:j}),window.location.reload()}}else console.error("Error update status gagal")}catch(r){console.error("Error adding order events :",r)}},J=async t=>{try{const h=(await P.post("order/event",t)).data}catch(r){console.error("Error adding order events :",r)}};return e.jsx(je,{title:"Upload Simcard",description:"this is upload simcard page",children:e.jsxs(pe,{title:"Upload List",children:[e.jsx(te,{mt:2,mb:2,children:e.jsx(l,{size:{xs:12},children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Order ID"}),e.jsx(D,{fullWidth:!0,onChange:t=>b(t.target.value)})]}),e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Customer Name"}),e.jsx(D,{fullWidth:!0,onChange:t=>d(t.target.value)})]}),e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Order Date Begin"}),e.jsx(D,{fullWidth:!0,type:"date",onChange:t=>N(t.target.value)})]}),e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Order Date End"}),e.jsx(D,{fullWidth:!0,type:"date",onChange:t=>M(t.target.value)})]}),e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Order Status"}),e.jsxs(_,{fullWidth:!0,variant:"outlined",onChange:t=>F(t.target.value),children:[e.jsx(n,{value:"New",children:"New"}),e.jsx(n,{value:"Approved",children:"Approved"}),e.jsx(n,{value:"Paid",children:"Paid"}),e.jsx(n,{value:"Delivered",children:"Delivered"}),e.jsx(n,{value:"Returned",children:"Returned"}),e.jsx(n,{value:"Closed",children:"Closed"}),e.jsx(n,{value:"Cancelled",children:"Cancelled"})]})]}),u.toLowerCase()==="web-admin"?e.jsxs(e.Fragment,{children:[e.jsxs(l,{size:{xs:6},children:[e.jsx(s,{variant:"subtitle1",children:"Agent"}),e.jsxs(_,{fullWidth:!0,variant:"outlined",onChange:t=>H(t.target.value),children:[e.jsx(n,{value:"GRM",children:"GRM - TIA - TIA FINANCE HO"}),e.jsx(n,{value:"RKL",children:"RKL - RKL - DAVID - DAVID WIDJAJA"}),e.jsx(n,{value:"RYC",children:"RYC - BUFANNY - BU FANNY"})]})]}),e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Type"}),e.jsxs(_,{fullWidth:!0,variant:"outlined",onChange:t=>T(t.target.value),children:[e.jsx(n,{value:"SIM",children:"Simcard"}),e.jsx(n,{value:"ESIM",children:"eSIM"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{size:{xs:3},children:[e.jsx(s,{variant:"subtitle1",children:"Type"}),e.jsxs(_,{fullWidth:!0,variant:"outlined",onChange:t=>T(t.target.value),children:[e.jsx(n,{value:"SIM",children:"Simcard"}),e.jsx(n,{value:"ESIM",children:"eSIM"})]})]}),e.jsx(l,{size:{xs:6},children:e.jsx(e.Fragment,{})})]}),e.jsxs(l,{size:{xs:12},children:[e.jsx(ee,{variant:"contained",color:"primary",style:{marginRight:"5px"},onClick:de,children:"Get Record"}),e.jsx(ee,{variant:"contained",color:"secondary",style:{marginLeft:"5px"},onClick:re,children:"Refresh All"})]})]})})}),e.jsx(ge,{children:e.jsx(ye,{children:e.jsxs(Se,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(Ie,{children:e.jsxs(O,{children:[e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Action"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Seq"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Order ID"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Order Date"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Type"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Status"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Quantity"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Country"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"Package ID"})}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:"List ICCID"})})]})}),e.jsxs(_e,{children:[(p>0?S.slice(g*p,g*p+p):S).map((t,r)=>e.jsxs(O,{children:[u.toLocaleLowerCase()==="cs-web"?t.order_status==="Paid"?e.jsxs(i,{children:[e.jsx(c,{title:"Detail CCID",children:e.jsx(o,{color:"success",onClick:()=>I(t.order_id),children:e.jsx(k,{width:22})})}),e.jsx(c,{title:"Close Order",children:e.jsx(o,{color:"primary",onClick:()=>xe(t.order_id),children:e.jsx(De,{width:22})})})]}):t.order_status==="New"?e.jsxs(i,{children:[e.jsx(c,{title:"Detail CCID",children:e.jsx(o,{color:"success",onClick:()=>I(t.order_id),children:e.jsx(k,{width:22})})}),e.jsx(c,{title:"History",children:e.jsx(o,{color:"secondary",onClick:()=>E(t.order_id),children:e.jsx(R,{width:22})})}),e.jsx(c,{title:"Cancel Order",children:e.jsx(o,{color:"error",onClick:()=>he(t.order_id),children:e.jsx(Pe,{width:22})})})]}):e.jsxs(i,{children:[e.jsx(c,{title:"Detail CCID",children:e.jsx(o,{color:"success",onClick:()=>I(t.order_id),children:e.jsx(k,{width:22})})}),e.jsx(c,{title:"History",children:e.jsx(o,{color:"secondary",onClick:()=>E(t.order_id),children:e.jsx(R,{width:22})})})]}):e.jsxs(i,{children:[e.jsx(c,{title:"Detail CCID",children:e.jsx(o,{color:"success",onClick:()=>I(t.order_id),children:e.jsx(k,{width:22})})}),t.order_status==="New"?e.jsx(c,{title:"Edit Order",children:e.jsx(o,{color:"primary",onClick:()=>ce(t.order_id),children:e.jsx(Oe,{width:22})})}):e.jsx(e.Fragment,{}),e.jsx(c,{title:"History",children:e.jsx(o,{color:"secondary",onClick:()=>E(t.order_id),children:e.jsx(R,{width:22})})})]}),e.jsx(i,{children:e.jsx(s,{variant:"subtitle2",children:g*p+r+1})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_id})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:Ce(t.order_date)})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.product_type})}),e.jsx(i,{children:e.jsx(ke,{color:t.order_status==="Paid"?"success":t.order_status==="New"?"warning":t.order_status==="Cancelled"?"error":t.order_status==="Closed"?"primary":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.order_status})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:fe(t.order_quantity)})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.country_name})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.package_id})}),e.jsx(i,{children:e.jsx(s,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.order_ccid})})]},r)),Y>0&&e.jsx(O,{style:{height:53*Y},children:e.jsx(i,{colSpan:2})})]}),e.jsx(ve,{children:e.jsx(O,{children:e.jsx(we,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:2,count:S.length,rowsPerPage:p,page:g,SelectProps:{native:!0},onPageChange:oe,onRowsPerPageChange:le,ActionsComponent:Ee})})})]})})})]})})};export{Vt as default};
