import{R as u,r as a,y as z,z as h,j as e}from"./index-D0CpDmcp.js";import{B as I}from"./Breadcrumb-BVcp9-n_.js";import{P as E}from"./PageContainer-GyGJwSoy.js";import{P as R,a as T}from"./index-C5YQQa61.js";import{C as m}from"./CustomFormLabel-DDI7DE8r.js";import{C as x}from"./CustomTextField-Cjc4ANgr.js";import{A as U}from"./apiConstants-ChAepINk.js";import{C as g}from"./CustomSelect-CExbCVLD.js";import{B as _}from"./Box-YfWKO8y5.js";import{S as W}from"./Stack-Br4H6Iex.js";import{T as G}from"./Typography-CxjCbjeZ.js";import{B as f}from"./Button-CgUWpLWI.js";import{D as M}from"./Divider-cwsqb4Sr.js";import{G as n}from"./Grid2-B3gzDQ3y.js";import{M as j}from"./MenuItem-CuGaY2Hq.js";import{A as N}from"./Alert-GQVafBkl.js";import{B as H}from"./BlankCard-C5pX7qij.js";import{C as J}from"./CardContent-B3dzlDvA.js";import"./Paper-DYTAYSZ1.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./createReactComponent-3iThfHP-.js";import"./TextField-BL7FkBIN.js";import"./useSlot-CFWOFHMb.js";import"./useId-BnzzJGZL.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./mergeSlotProps-EoW_Nak3.js";import"./Modal-BGPPYg_F.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./useControlled-DdQeg7Rb.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./FormControl-Ds0TTNG5.js";import"./createStack-D1qoiK_y.js";import"./CircularProgress-DwEGvCDN.js";import"./dividerClasses-Cmg2xQcr.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Close-DI9m-hsf.js";import"./IconButton-BxWHF3Dm.js";import"./Card-CBAn0QXF.js";const C=U.apiUrl,O=()=>{const[b,P]=u.useState([]),[v,S]=u.useState([]),[y,k]=a.useState(""),[Q,q]=a.useState(""),{addProduct:D,products:c}=a.useContext(R),[F,l]=a.useState(!1),p=z(),[o,i]=a.useState({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""});a.useEffect(()=>{const r=localStorage.getItem("data_success_login");if(r){const t=JSON.parse(r);console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),k(t.session_level),q(t.session_name),i(s=>({...s,cobrand_id:t.session_name})),t.session_level.toLowerCase()==="partner"?B(t.session_name):A()}if(c.length>0){const t=c[c.length-1].seq;i(s=>({...s,seq:t+1}))}else i(t=>({...t,seq:1}))},[c]);const d=r=>{const{name:t,value:s}=r.target;i(L=>({...{...L,[t]:s}}))},w=async r=>{r.preventDefault();try{await D(o),i({seq:0,package_id:"",package_name:"",country:"",days:0,quota:"",selling_price:0,status:"",cobrand_id:""}),l(!0),setTimeout(()=>{l(!1)},5e3),p("/product/partner")}catch(t){console.error("Error adding product:",t)}},A=async()=>{let r=C+"partners";h.get(r).then(t=>{P(t.data)}).catch(t=>{console.log(t)})},B=async r=>{let t=C+"agents/cobrand/"+r;h.get(t).then(s=>{S(s.data)}).catch(s=>{console.log(s)})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:w,children:e.jsxs(_,{children:[e.jsxs(W,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(G,{variant:"h5",children:["# ",o.seq]}),e.jsxs(_,{display:"flex",gap:1,children:[e.jsx(f,{variant:"outlined",color:"error",onClick:()=>{p("/product/partner")},children:"Cancel"}),e.jsx(f,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(M,{}),e.jsxs(n,{container:!0,spacing:3,mb:4,children:[y.toLowerCase()==="partner"?e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"cobrand_id",children:"Agent Code"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:o.cobrand_id,onChange:d,fullWidth:!0,children:v.map(r=>e.jsxs(j,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.agent_code]},r.seq))})]}):e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"cobrand_id",children:"Partner ID"}),e.jsx(g,{id:"cobrand_id",name:"cobrand_id",value:o.cobrand_id,onChange:d,fullWidth:!0,children:b.map(r=>e.jsxs(j,{value:r.cobrand_id,children:[r.cobrand_id," - ",r.cobrand_name]},r.seq))})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"package_id",children:"Package ID"}),e.jsx(x,{id:"package_id",name:"package_id",onChange:d,value:o.package_id,fullWidth:!0})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(m,{htmlFor:"selling_price",sx:{mt:0},children:"Selling Price"}),e.jsx(x,{id:"selling_price",name:"selling_price",value:o.selling_price,onChange:d,fullWidth:!0})]})]}),F&&e.jsx(N,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Product created successfully."})]})})})},K=[{to:"/",title:"Home"},{title:"Product Partner Create"}],Ve=()=>e.jsx(T,{children:e.jsxs(E,{title:"Create Product Partner",description:"this is Create Product Partner",children:[e.jsx(I,{title:"Create Product Partner",items:K}),e.jsx(H,{children:e.jsx(J,{children:e.jsx(O,{})})})]})});export{Ve as default};
