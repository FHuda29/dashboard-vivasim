import{r as o,y as U,j as e}from"./index-bBoaL7NX.js";import{P as R}from"./PageContainer-ClH7HaBW.js";import{P as Y}from"./ParentCard-CFe-nEgX.js";import{C as h}from"./CustomSelect-_oosuc7Q.js";import{C as S}from"./CustomTextField-nzkQUDrv.js";import{i as x}from"./axios-MmGZYXFl.js";import{j as H}from"./index-VWaDGczM.js";import{B as _}from"./Box-Cbtftx36.js";import{G as n}from"./Grid2-CC46JW8y.js";import{T as l}from"./Typography-B41TU7cT.js";import{M as d}from"./MenuItem-DBmnqxHM.js";import{S as J}from"./Stack-DONMPCRZ.js";import{I as K}from"./IconButton-6ozhzS-w.js";import{T as O}from"./Tooltip-CRAcMsX-.js";import{I as Q}from"./IconPlus-BRrLNseT.js";import{B as V}from"./Button-2ihUhOt_.js";import{A as X}from"./Alert-CbLSE_hz.js";import"./Paper-CEo52ZYq.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./apiConstants-C71iLEz3.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./listItemTextClasses-DSEuY2ct.js";import"./createStack-D5Eniu1T.js";import"./CircularProgress-BIjyWvHZ.js";import"./Popper-ppbRY3WN.js";import"./createReactComponent-BVlLIvSm.js";import"./Close-BajIXLAg.js";const nt=()=>{const[c,I]=o.useState(""),[b,P]=o.useState(""),[y,v]=o.useState(""),[Z,$]=o.useState([]),[w,f]=o.useState(!1),a=U();o.useEffect(()=>{const t=localStorage.getItem("token");if(t){const s=H(t);console.log("user_name:",s.user_name),console.log("session_name:",s.session_name),console.log("session_level:",s.session_level),console.log("last_login_time:",s.last_login_time),console.log("blocked:",s.blocked),I(s.session_level),P(s.session_name),s.session_level.toLowerCase()==="partner"||s.session_level.toLowerCase()==="partner-admin"?(F(s.session_name),v("Move Simcard to Agent")):(q(),v("Move Simcard to Partner"))}else a("/auth/login")},[]);const[A,L]=o.useState([]),M=A,[k,D]=o.useState([]),[p,T]=o.useState(""),[m,z]=o.useState(""),[u,B]=o.useState(""),[g,E]=o.useState(""),[ee,te]=o.useState(""),[C,W]=o.useState(""),q=async()=>{x.get("partners").then(s=>{L(s.data)}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?a("/auth/login"):console.log(s)})},F=async t=>{let s="agents/cobrand/"+t;x.get(s).then(r=>{D(r.data)}).catch(r=>{r.response&&r.response.status===403||r.response.status===401?a("/auth/login"):console.log(r)})},G=()=>{console.log("move"),console.log(p),console.log(m),console.log(u),console.log(g),console.log(C);let t="",s="";c.toLowerCase()==="partner"||c.toLowerCase()==="partner-admin"?(t=b.split("-")[0],s=m):(t=p,s=m);let r="inventory/ccid?ccidstart="+u+"&ccidend="+g+"&cobrand_id="+t+"&agent_code="+s;x.get(r).then(i=>{console.log("res: ",i);const j=i.data;j.success?(f(!0),setTimeout(()=>{f(!1)},5e3),a("/inventory/list")):alert(j.message)}).catch(i=>{i.response&&i.response.status===403||i.response.status===401?a("/auth/login"):console.log(i)})},N=()=>{localStorage.setItem("mode","move_simcard"),a("/apps/partner/create")};return e.jsx(R,{title:"Inventory",description:"this is inventory page",children:e.jsxs(Y,{title:y,children:[e.jsx(_,{mt:2,children:e.jsx(n,{size:{xs:12},children:e.jsxs(n,{container:!0,spacing:2,children:[c.toLowerCase()==="partner"||c.toLowerCase()==="partner-admin"?e.jsxs(n,{size:{xs:3},children:[e.jsx(l,{variant:"subtitle1",mt:1,mb:1,children:"Move to Agent"}),e.jsx(h,{fullWidth:!0,variant:"outlined",value:m||"",onChange:t=>z(t.target.value),children:k.map(t=>e.jsxs(d,{value:t.agent_code,children:[t.agent_code," - ",t.name]},t.seq))})]}):e.jsxs(n,{size:{xs:3},children:[e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(l,{variant:"subtitle1",children:"Move to Partner"}),e.jsx(K,{onClick:()=>N(),children:e.jsx(O,{title:"Add Partner",children:e.jsx(Q,{})})})]}),e.jsx(h,{fullWidth:!0,variant:"outlined",value:p||"",onChange:t=>T(t.target.value),children:M.map(t=>e.jsxs(d,{value:t.cobrand_id,children:[t.cobrand_id," - ",t.cobrand_name]},t.seq))})]}),e.jsxs(n,{size:{xs:3},children:[e.jsx(l,{variant:"subtitle1",mt:1,mb:1,children:"ICCID Serial From (19 digit awal)"}),e.jsx(S,{fullWidth:!0,value:u,onChange:t=>B(t.target.value)})]}),e.jsxs(n,{size:{xs:3},children:[e.jsx(l,{variant:"subtitle1",mt:1,mb:1,children:"ICCID Serial To (19 digit awal)"}),e.jsx(S,{fullWidth:!0,value:g,onChange:t=>E(t.target.value)})]}),e.jsxs(n,{size:{xs:3},children:[e.jsx(l,{variant:"subtitle1",mt:1,mb:1,children:"Confirm Move ?"}),e.jsxs(h,{fullWidth:!0,variant:"outlined",value:C||"",onChange:t=>W(t.target.value),children:[e.jsx(d,{value:1,children:"No"}),e.jsx(d,{value:2,children:"Yes"})]})]}),e.jsx(n,{size:{xs:12},children:e.jsx(V,{variant:"contained",color:"primary",onClick:G,children:"Move"})})]})})}),e.jsx(_,{display:"flex",gap:1}),w&&e.jsx(X,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Move Simcard successfully."})]})})};export{nt as default};
