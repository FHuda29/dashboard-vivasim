import{r as s,j as r,y as _}from"./index-bBoaL7NX.js";import{B as S}from"./Breadcrumb-Db9PlBea.js";import{P as w}from"./PageContainer-ClH7HaBW.js";import{i as u}from"./axios-MmGZYXFl.js";import{C as f}from"./CustomFormLabel-DkCP5Nv8.js";import{C as j}from"./CustomTextField-nzkQUDrv.js";import{B as C}from"./Box-Cbtftx36.js";import{S as D}from"./Stack-DONMPCRZ.js";import{T as B}from"./Typography-B41TU7cT.js";import{B as P}from"./Button-2ihUhOt_.js";import{D as F}from"./Divider-4e_Zm7wz.js";import{G as h}from"./Grid2-CC46JW8y.js";import{A as q}from"./Alert-CbLSE_hz.js";import{B as E}from"./BlankCard-BfHU7njI.js";import{C as I}from"./CardContent-TrRQSIz8.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./apiConstants-C71iLEz3.js";import"./TextField-CNoxaAXv.js";import"./useSlot-C2y4Okaq.js";import"./useId-BgKtfLA5.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";import"./Card-DDyARx6g.js";const b=s.createContext(void 0),U=({children:x})=>{const[i,m]=s.useState([]),[l,c]=s.useState(!0),[n]=s.useState(null);s.useEffect(()=>{(async()=>{try{const t=await u.get("partners");m(t.data),c(!1)}catch{c(!1)}})()},[]);const p=async o=>{try{await u.delete("partners",{data:{seq:o}}),m(t=>t.filter(e=>e.seq!==o))}catch(t){console.error("Error deleting products:",t)}},g=async o=>{try{console.log("newUser: ",o),console.log("json newUser: ",JSON.stringify(o));const e=(await u.post("partners",o)).data;m(a=>[...a,e])}catch(t){console.error("Error adding users:",t)}},y=async o=>{try{const e=(await u.put("partners/updatepartner",o)).data;m(a=>a.map(d=>d.seq===e.seq?e:d))}catch(t){console.error("Error updating users:",t)}};return r.jsx(b.Provider,{value:{partners:i,loading:l,error:n,deleteUser:p,addPartner:g,updatePartner:y},children:x})},A=()=>{const{addPartner:x,partners:i}=s.useContext(b),[m,l]=s.useState(!1),c=_(),[n,p]=s.useState({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),[g,y]=s.useState(!1);s.useEffect(()=>{if(i.length>0){const e=i[i.length-1].seq;p(a=>({...a,seq:e+1}))}else p(e=>({...e,seq:1}))},[i]);const o=e=>{const{name:a,value:d}=e.target;p(v=>({...{...v,[a]:d}}))},t=async e=>{const a=localStorage.getItem("mode");e.preventDefault();try{await x(n),p({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),l(!0),setTimeout(()=>{l(!1)},5e3),a==="move_simcard"?(localStorage.removeItem("mode"),c("/inventory/movesim")):c("/partner/list")}catch(d){console.error("Error adding partner:",d)}};return r.jsx(r.Fragment,{children:r.jsx("form",{onSubmit:t,children:r.jsxs(C,{children:[r.jsxs(D,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[r.jsxs(B,{variant:"h5",children:["# ",n.seq]}),r.jsxs(C,{display:"flex",gap:1,children:[r.jsx(P,{variant:"outlined",color:"error",onClick:()=>{c("/partner/list")},children:"Cancel"}),r.jsx(P,{type:"submit",variant:"contained",color:"primary",children:"Save Partner"})]})]}),r.jsx(F,{}),r.jsxs(h,{container:!0,spacing:3,mb:4,children:[r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(f,{htmlFor:"cobrand_id",children:"Partner ID"}),r.jsx(j,{id:"cobrand_id",name:"cobrand_id",onChange:o,value:n.cobrand_id,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(f,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Partner Name"}),r.jsx(j,{id:"cobrand_name",name:"cobrand_name",value:n.cobrand_name,onChange:o,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(f,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"Person In Charge"}),r.jsx(j,{id:"pic",name:"pic",value:n.pic,onChange:o,fullWidth:!0})]})]}),m&&r.jsx(q,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Users added successfully."})]})})})},T=[{to:"/",title:"Home"},{title:"Partner Create"}],kr=()=>r.jsx(U,{children:r.jsxs(w,{title:"Partner User",description:"this is Create Partner",children:[r.jsx(S,{title:"Partner User",items:T}),r.jsx(E,{children:r.jsx(I,{children:r.jsx(A,{})})})]})});export{kr as default};
