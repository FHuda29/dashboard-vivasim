import{y as q,r,j as e}from"./index-bBoaL7NX.js";import{T as H,L as B,F as A,K as w}from"./LastPage-CUO0XoGI.js";import{K as D}from"./KeyboardArrowRight-CL0uG8E4.js";import{P as V}from"./PageContainer-ClH7HaBW.js";import{P as G}from"./ParentCard-CFe-nEgX.js";import{B as J}from"./BlankCard-BfHU7njI.js";import{n as Q}from"./Utils-DZtz8wsc.js";import{i as y}from"./axios-MmGZYXFl.js";import{j as W}from"./index-VWaDGczM.js";import{B as R}from"./Box-Cbtftx36.js";import{S as X}from"./Stack-DONMPCRZ.js";import{T as Y}from"./TextField-CNoxaAXv.js";import{I as Z}from"./InputAdornment-DDw9KCxJ.js";import{I as $}from"./IconSearch-8WAl2z6L.js";import{T as ee}from"./TableContainer-OLbhJ7zr.js";import{T as te,a as se,b as _,c as n,d as ne}from"./TableRow-Zqkg4FIQ.js";import{T as a}from"./Typography-B41TU7cT.js";import{C as ie}from"./Chip-Bm7HxxC0.js";import{T as ae}from"./TablePagination-DdevPbi4.js";import{u as oe}from"./Paper-CEo52ZYq.js";import{I as C}from"./IconButton-6ozhzS-w.js";import"./createSvgIcon-DcL-YXBs.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./createReactComponent-BVlLIvSm.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";import"./CircularProgress-BIjyWvHZ.js";function re(l){const d=oe(),{count:h,page:c,rowsPerPage:j,onPageChange:x}=l,P=o=>{x(o,0)},S=o=>{x(o,c-1)},g=o=>{x(o,c+1)},v=o=>{x(o,Math.max(0,Math.ceil(h/j)-1))};return e.jsxs(R,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(C,{onClick:P,disabled:c===0,"aria-label":"first page",children:d.direction==="rtl"?e.jsx(B,{}):e.jsx(A,{})}),e.jsx(C,{onClick:S,disabled:c===0,"aria-label":"previous page",children:d.direction==="rtl"?e.jsx(D,{}):e.jsx(w,{})}),e.jsx(C,{onClick:g,disabled:c>=Math.ceil(h/j)-1,"aria-label":"next page",children:d.direction==="rtl"?e.jsx(w,{}):e.jsx(D,{})}),e.jsx(C,{onClick:v,disabled:c>=Math.ceil(h/j)-1,"aria-label":"last page",children:d.direction==="rtl"?e.jsx(A,{}):e.jsx(B,{})})]})}const vt=()=>{const l=q(),[d,h]=r.useState(""),[c,j]=r.useState(!1),[x,P]=r.useState(!1),[S,g]=r.useState(""),[v,o]=r.useState(""),[F,I]=r.useState("");r.useEffect(()=>{const s=localStorage.getItem("token");if(s){const t=W(s);if(g(t.user_name),I(t.session_name),o(t.session_level),console.log("user_name:",t.user_name),g(t.user_name),console.log("session_name:",t.session_name),I(t.session_name),console.log("session_level:",t.session_level),o(t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"){const i=t.session_name.split("-")[0];M(i)}else t.session_level.toLowerCase()==="agent-manager"?O(t.session_name):T()}else l("/auth/login")},[]);const T=async()=>{y.get("inventory").then(t=>{b(t.data)}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?l("/auth/login"):console.log(t)})},M=async s=>{let t="inventory/cobrand/"+s;y.get(t).then(i=>{b(i.data)}).catch(i=>{i.response&&i.response.status===403||i.response.status===401?l("/auth/login"):console.log(i)})},O=async s=>{let t="inventory/agent/"+s;y.get(t).then(i=>{b(i.data)}).catch(i=>{i.response&&i.response.status===403||i.response.status===401?l("/auth/login"):console.log(i)})},[U,b]=r.useState([]),f=U,[m,k]=r.useState(0),[p,K]=r.useState(10),L=m>0?Math.max(0,(1+m)*p-f.length):0,z=(s,t)=>{k(t)},E=s=>{K(parseInt(s.target.value,10)),k(0)},N=s=>{console.log(s.target.value),h(s.target.value);const t=s.target.value;if(t.length!==0){let i="";v.toLowerCase()==="partner"||v.toLowerCase()==="partner-admin"?i=i+"inventory/search/cobrand/"+F+"?param="+t:i=i+"inventory/search?param="+t,y.get(i).then(u=>{b(u.data)}).catch(u=>{u.response&&u.response.status===403?l("/auth/login"):console.log(u)})}else T()};return e.jsx(V,{title:"Inventory",description:"this is inventory page",children:e.jsxs(G,{title:"Inventory List",children:[e.jsx(R,{mb:2,children:e.jsx(X,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:e.jsx(Y,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:d,onChange:N,InputProps:{endAdornment:e.jsx(Z,{position:"end",children:e.jsx($,{size:"16"})})}})})}),e.jsx(J,{children:e.jsx(ee,{children:e.jsxs(te,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(se,{children:e.jsxs(_,{children:[e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Seq"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"ICCID"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Sim Type"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Status"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Order ID"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Country"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Selling Price"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"In Date"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Out Date"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Partner"})}),e.jsx(n,{children:e.jsx(a,{variant:"subtitle2",children:"Agent"})})]})}),e.jsxs(ne,{children:[(p>0?f.slice(m*p,m*p+p):f).map((s,t)=>e.jsxs(_,{children:[e.jsx(n,{children:e.jsx(a,{variant:"caption",children:m*p+t+1})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.iccid})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.sim_type})}),e.jsx(n,{children:e.jsx(ie,{color:s.status==="Ready"?"success":s.status==="Open"?"warning":s.status=="Used"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:s.status})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.order_id})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.country_id})}),e.jsx(n,{children:e.jsxs(a,{variant:"caption",children:["IDR ",Q(s.selling_price)]})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.in_date})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.out_date})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.cobrand_id})}),e.jsx(n,{children:e.jsx(a,{variant:"caption",children:s.agent_code})})]},t)),L>0&&e.jsx(_,{style:{height:53*L},children:e.jsx(n,{colSpan:2})})]}),e.jsx(H,{children:e.jsx(_,{children:e.jsx(ae,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:2,count:f.length,rowsPerPage:p,page:m,SelectProps:{native:!0},onPageChange:z,onRowsPerPageChange:E,ActionsComponent:re})})})]})})})]})})};export{vt as default};
