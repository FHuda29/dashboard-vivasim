import{y as ne,r as a,z as g,j as e,L as E}from"./index-D0CpDmcp.js";import{T as ie,L as N,F as O,K as H}from"./LastPage-CM86qExL.js";import{K as W}from"./KeyboardArrowRight-Bwz3qybY.js";import{B as le}from"./Breadcrumb-BVcp9-n_.js";import{P as ce}from"./PageContainer-GyGJwSoy.js";import{P as de}from"./ParentCard-Dds6eSz-.js";import{B as me}from"./BlankCard-C5pX7qij.js";import{f as pe}from"./Utils-DY8x-pVc.js";import{A as he}from"./apiConstants-ChAepINk.js";import{B as D}from"./Box-YfWKO8y5.js";import{S as xe}from"./Stack-Br4H6Iex.js";import{T as ue}from"./TextField-BL7FkBIN.js";import{I as ge}from"./InputAdornment-DuPHhOrK.js";import{I as je}from"./IconSearch-CzsNSmQZ.js";import{B as j}from"./Button-CgUWpLWI.js";import{T as fe}from"./TableContainer-DwViaeU_.js";import{T as ke,a as be,b as v,c as o,d as ve}from"./TableRow-BZxns5TQ.js";import{T as r}from"./Typography-CxjCbjeZ.js";import{T as I}from"./Tooltip-BtHUzaXN.js";import{I as d}from"./IconButton-BxWHF3Dm.js";import{c as w}from"./createReactComponent-3iThfHP-.js";import{T as Ce}from"./TablePagination-_GCCBNyA.js";import{D as J,a as V}from"./DialogContent-CpBRrOrV.js";import{D as Y}from"./DialogTitle-j3YPohRR.js";import{D as $}from"./DialogActions-BY2nf59b.js";import{u as ye}from"./Paper-DYTAYSZ1.js";import"./createSvgIcon-DvMzRnlg.js";import"./mergeSlotProps-EoW_Nak3.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BnzzJGZL.js";import"./useControlled-DdQeg7Rb.js";import"./Grid2-B3gzDQ3y.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./Card-CBAn0QXF.js";import"./CardHeader-BR6S_Hd-.js";import"./useSlot-CFWOFHMb.js";import"./Divider-cwsqb4Sr.js";import"./dividerClasses-Cmg2xQcr.js";import"./CardContent-B3dzlDvA.js";import"./index-BPskgXx8.js";import"./index-DT2YvziZ.js";import"./createStack-D1qoiK_y.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./Modal-BGPPYg_F.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./FormControl-Ds0TTNG5.js";import"./CircularProgress-DwEGvCDN.js";import"./Popper-BuGE3Q_O.js";import"./KeyboardArrowRight-DiTjW17E.js";import"./LastPage-CYB3mln0.js";import"./MenuItem-CuGaY2Hq.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Toolbar-C5Hj9sbR.js";var Be=w("accessible","IconAccessible",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 16.5l2 -3l2 3m-2 -3v-2l3 -1m-6 0l3 1",key:"svg-1"}],["circle",{cx:"12",cy:"7.5",r:".5",fill:"currentColor",key:"svg-2"}]]),Pe=w("key","IconKey",[["path",{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z",key:"svg-0"}],["path",{d:"M15 9h.01",key:"svg-1"}]]),_e=w("row-remove","IconRowRemove",[["path",{d:"M20 6v4a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h14a1 1 0 0 1 1 1z",key:"svg-0"}],["path",{d:"M10 16l4 4",key:"svg-1"}],["path",{d:"M10 20l4 -4",key:"svg-2"}]]);const f=he.apiUrl;function Se(C){const m=ye(),{count:x,page:i,rowsPerPage:p,onPageChange:n}=C,k=l=>{n(l,0)},y=l=>{n(l,i-1)},B=l=>{n(l,i+1)},P=l=>{n(l,Math.max(0,Math.ceil(x/p)-1))};return e.jsxs(D,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(d,{onClick:k,disabled:i===0,"aria-label":"first page",children:m.direction==="rtl"?e.jsx(N,{}):e.jsx(O,{})}),e.jsx(d,{onClick:y,disabled:i===0,"aria-label":"previous page",children:m.direction==="rtl"?e.jsx(W,{}):e.jsx(H,{})}),e.jsx(d,{onClick:B,disabled:i>=Math.ceil(x/p)-1,"aria-label":"next page",children:m.direction==="rtl"?e.jsx(H,{}):e.jsx(W,{})}),e.jsx(d,{onClick:P,disabled:i>=Math.ceil(x/p)-1,"aria-label":"last page",children:m.direction==="rtl"?e.jsx(O,{}):e.jsx(N,{})})]})}const Te=[{to:"/",title:"Home"},{title:"Users Web Login"}],Hs=()=>{const C=ne(),[m,x]=a.useState(""),[i,p]=a.useState("");a.useEffect(()=>{const s=localStorage.getItem("data_success_login");if(s){const t=JSON.parse(s);if(console.log("user_name:",t.user_name),console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),console.log("last_login_time:",t.last_login_time),console.log("blocked:",t.blocked),x(t.session_level),t.session_level.toLowerCase()==="partner"){const c=t.session_name.split("-")[0];p(c),k(c)}else p(t.session_name),n()}else C("/auth/login")},[]);const n=async()=>{let s=f+"users";g.get(s).then(t=>{T(t.data)}).catch(t=>{console.log(t)})},k=async s=>{let t=f+"users/cobrand/"+s;g.get(t).then(c=>{T(c.data)}).catch(c=>{console.log(c)})},y=s=>{console.log(s.target.value),P(s.target.value);const t=s.target.value;if(t.length!==0){let c=f+"users/search?param="+t;g.get(c).then(U=>{T(U.data)}).catch(U=>{console.log(U)})}else m.toLowerCase()==="partner"?k(i):n()},[B,P]=a.useState(""),[l,Ue]=a.useState(!1),[G,_]=a.useState(!1),[Q,S]=a.useState(!1),[A,L]=a.useState(0),[R,M]=a.useState(""),X=(s,t)=>{M(s),L(t),_(!0)},F=()=>{_(!1)},Z=(s,t)=>{M(s),L(t),S(!0)},K=()=>{S(!1)},[ee,T]=a.useState([]),b=ee,[u,q]=a.useState(0),[h,se]=a.useState(10),z=u>0?Math.max(0,(1+u)*h-b.length):0,te=(s,t)=>{q(t)},oe=s=>{se(parseInt(s.target.value,10)),q(0)},re=async()=>{const s={blocked:"Y"};try{await g.put(f+"users/block/"+A,s),_(!1),n()}catch(t){console.error("Error block users:",t)}},ae=async()=>{const s={blocked:"N"};try{await g.put(f+"users/block/"+A,s),S(!1),n()}catch(t){console.error("Error unblock users:",t)}};return e.jsxs(ce,{title:"Users",description:"this is users page",children:[e.jsx(le,{title:"Users",items:Te}),e.jsx(de,{title:"User List",children:e.jsxs(me,{children:[e.jsx(D,{children:e.jsxs(xe,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[e.jsx(ue,{id:"search",type:"text",size:"small",variant:"outlined",value:B,onChange:y,InputProps:{endAdornment:e.jsx(ge,{position:"end",children:e.jsx(je,{size:"16"})})}}),e.jsx(D,{display:"flex",gap:1,children:e.jsx(j,{variant:"contained",color:"primary",component:E,to:"/apps/user/create",children:"Add User Web Login"})})]})}),e.jsx(fe,{children:e.jsxs(ke,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(be,{children:e.jsxs(v,{children:[e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"User Name"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Partner/Agent ID"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Level"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Blocked"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Failed"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Last Login"})}),e.jsx(o,{children:e.jsx(r,{variant:"subtitle2",children:"Action"})})]})}),e.jsxs(ve,{children:[(h>0?b.slice(u*h,u*h+h):b).map((s,t)=>e.jsxs(v,{children:[e.jsx(o,{children:e.jsx(r,{variant:"caption",children:s.user_name})}),e.jsx(o,{children:e.jsx(r,{variant:"caption",children:s.session_name})}),e.jsx(o,{children:e.jsx(r,{variant:"caption",children:s.session_level})}),e.jsx(o,{children:e.jsx(r,{variant:"caption",children:s.blocked})}),e.jsx(o,{children:e.jsx(r,{variant:"caption",children:s.failed})}),e.jsx(o,{children:e.jsx(r,{variant:"caption",children:pe(s.last_login_time)})}),e.jsxs(o,{children:[e.jsx(I,{title:"Reset Password",children:e.jsx(d,{color:"success",component:E,to:`/apps/user/change-password/${s.seq}`,children:e.jsx(Pe,{width:22})})}),e.jsx(I,{title:"Block",children:e.jsx(d,{color:"error",onClick:()=>X(s.user_name,s.seq),children:e.jsx(_e,{width:22})})}),e.jsx(I,{title:"Unblock",children:e.jsx(d,{color:"info",onClick:()=>Z(s.user_name,s.seq),children:e.jsx(Be,{width:22})})})]})]},t)),z>0&&e.jsx(v,{style:{height:53*z},children:e.jsx(o,{colSpan:7})})]}),e.jsx(ie,{children:e.jsx(v,{children:e.jsx(Ce,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:7,count:b.length,rowsPerPage:h,page:u,SelectProps:{native:!0},onPageChange:te,onRowsPerPageChange:oe,ActionsComponent:Se})})})]})})]})}),e.jsxs(J,{open:G,onClose:F,children:[e.jsx(Y,{children:"Confirm Block"}),e.jsxs(V,{children:['Are you sure you want to block selected username "',R,'" ?']}),e.jsxs($,{children:[e.jsx(j,{variant:"contained",onClick:F,children:"Cancel"}),e.jsx(j,{color:"error",variant:"outlined",onClick:re,children:"Block"})]})]}),e.jsxs(J,{open:Q,onClose:K,children:[e.jsx(Y,{children:"Confirm Block"}),e.jsxs(V,{children:['Are you sure you want to unblock selected username "',R,'" ?']}),e.jsxs($,{children:[e.jsx(j,{variant:"contained",onClick:K,children:"Cancel"}),e.jsx(j,{color:"error",variant:"outlined",onClick:ae,children:"Unblock"})]})]})]})};export{Hs as default};
