import{y as $,r as l,z as f,j as e,L as R}from"./index-D0CpDmcp.js";import{T as G,L as E,F,K as q}from"./LastPage-CM86qExL.js";import{K as M}from"./KeyboardArrowRight-Bwz3qybY.js";import{B as W}from"./Breadcrumb-BVcp9-n_.js";import{P as X}from"./PageContainer-GyGJwSoy.js";import{P as Y}from"./ParentCard-Dds6eSz-.js";import{B as Z}from"./BlankCard-C5pX7qij.js";import{n as T}from"./Utils-DY8x-pVc.js";import{A as ee}from"./apiConstants-ChAepINk.js";import{B as I}from"./Box-YfWKO8y5.js";import{S as te}from"./Stack-Br4H6Iex.js";import{T as re}from"./TextField-BL7FkBIN.js";import{I as se}from"./InputAdornment-DuPHhOrK.js";import{I as oe}from"./IconSearch-CzsNSmQZ.js";import{B as k}from"./Button-CgUWpLWI.js";import{T as ae}from"./TableContainer-DwViaeU_.js";import{T as ie,a as ne,b as P,c as s,d as le}from"./TableRow-BZxns5TQ.js";import{T as o}from"./Typography-CxjCbjeZ.js";import{T as N}from"./Tooltip-BtHUzaXN.js";import{I as h}from"./IconButton-BxWHF3Dm.js";import{I as ce}from"./IconEdit-C6sb7rt-.js";import{I as de}from"./IconTrash-GIZUJftO.js";import{C as pe}from"./Chip-C2vBKMax.js";import{T as me}from"./TablePagination-_GCCBNyA.js";import{D as he,a as xe}from"./DialogContent-CpBRrOrV.js";import{D as ue}from"./DialogTitle-j3YPohRR.js";import{D as je}from"./DialogActions-BY2nf59b.js";import{u as ge}from"./Paper-DYTAYSZ1.js";import"./createSvgIcon-DvMzRnlg.js";import"./mergeSlotProps-EoW_Nak3.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BnzzJGZL.js";import"./useControlled-DdQeg7Rb.js";import"./Grid2-B3gzDQ3y.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./createReactComponent-3iThfHP-.js";import"./Card-CBAn0QXF.js";import"./CardHeader-BR6S_Hd-.js";import"./useSlot-CFWOFHMb.js";import"./Divider-cwsqb4Sr.js";import"./dividerClasses-Cmg2xQcr.js";import"./CardContent-B3dzlDvA.js";import"./index-BPskgXx8.js";import"./index-DT2YvziZ.js";import"./createStack-D1qoiK_y.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./Modal-BGPPYg_F.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./FormControl-Ds0TTNG5.js";import"./CircularProgress-DwEGvCDN.js";import"./Popper-BuGE3Q_O.js";import"./KeyboardArrowRight-DiTjW17E.js";import"./LastPage-CYB3mln0.js";import"./MenuItem-CuGaY2Hq.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Toolbar-C5Hj9sbR.js";const b=ee.apiUrl;function fe(C){const i=ge(),{count:x,page:n,rowsPerPage:p,onPageChange:c}=C,u=a=>{c(a,0)},v=a=>{c(a,n-1)},S=a=>{c(a,n+1)},_=a=>{c(a,Math.max(0,Math.ceil(x/p)-1))};return e.jsxs(I,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(h,{onClick:u,disabled:n===0,"aria-label":"first page",children:i.direction==="rtl"?e.jsx(E,{}):e.jsx(F,{})}),e.jsx(h,{onClick:v,disabled:n===0,"aria-label":"previous page",children:i.direction==="rtl"?e.jsx(M,{}):e.jsx(q,{})}),e.jsx(h,{onClick:S,disabled:n>=Math.ceil(x/p)-1,"aria-label":"next page",children:i.direction==="rtl"?e.jsx(q,{}):e.jsx(M,{})}),e.jsx(h,{onClick:_,disabled:n>=Math.ceil(x/p)-1,"aria-label":"last page",children:i.direction==="rtl"?e.jsx(F,{}):e.jsx(E,{})})]})}const Pe=[{to:"/",title:"Home"},{title:"Partner"}],qt=()=>{const C=$(),[i,x]=l.useState(""),[n,p]=l.useState("");l.useEffect(()=>{const t=localStorage.getItem("data_success_login");if(t){const r=JSON.parse(t);if(console.log("user_name:",r.user_name),console.log("session_name:",r.session_name),console.log("session_level:",r.session_level),console.log("last_login_time:",r.last_login_time),console.log("blocked:",r.blocked),x(r.session_level),r.session_level.toLowerCase()==="partner"){const d=r.session_name.split("-")[0];p(d),u(d)}else p(r.session_name),c()}else C("/auth/login")},[]);const c=async()=>{let t=b+"product/partner";f.get(t).then(r=>{y(r.data)}).catch(r=>{console.log(r)})},u=async t=>{let r=b+"product/partner/cobrand/"+t;f.get(r).then(d=>{y(d.data)}).catch(d=>{console.log(d)})},[v,S]=l.useState(""),[_,a]=l.useState(!1),[B,U]=l.useState(0),[z,y]=l.useState([]),g=z,[j,A]=l.useState(0),[m,K]=l.useState(10),w=j>0?Math.max(0,(1+j)*m-g.length):0,O=(t,r)=>{A(r)},H=t=>{K(parseInt(t.target.value,10)),A(0)},Q=t=>{S(t.target.value);const r=t.target.value;if(r.length!==0){let d=b+"product/partner/search?param="+r;f.get(d).then(D=>{y(D.data)}).catch(D=>{console.log(D)})}else i.toLowerCase()==="partner"?(console.log("masuk 1",i),u(n)):(console.log("masuk 2",i),c())},J=t=>{U(t),a(!0)},L=()=>{a(!1)},V=async()=>{try{await f.delete(b+"product/partner/delete/"+B),a(!1),i.toLowerCase()==="partner"?u(n):c()}catch(t){console.error("Error deleting products:",t)}};return e.jsxs(X,{title:"Products",description:"this is partner products page",children:[e.jsx(W,{title:"Products",items:Pe}),e.jsx(Y,{title:"Partner Product List",children:e.jsxs(Z,{children:[e.jsx(I,{children:e.jsxs(te,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:[e.jsx(re,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:v,onChange:Q,InputProps:{endAdornment:e.jsx(se,{position:"end",children:e.jsx(oe,{size:"16"})})}}),e.jsx(I,{display:"flex",gap:1,children:e.jsx(k,{variant:"contained",color:"primary",component:R,to:"/product/partner/create",children:"New Product"})})]})}),e.jsx(ae,{children:e.jsxs(ie,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(ne,{children:e.jsxs(P,{children:[e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Action"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Partner"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Product ID"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Product Name"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Country"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Days"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Quota"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Selling Price"})}),e.jsx(s,{children:e.jsx(o,{variant:"subtitle2",children:"Status"})})]})}),e.jsxs(le,{children:[(m>0?g.slice(j*m,j*m+m):g).map((t,r)=>e.jsxs(P,{children:[e.jsxs(s,{children:[e.jsx(N,{title:"Edit",children:e.jsx(h,{color:"success",component:R,to:`/product/partner/edit/${t.seq}`,children:e.jsx(ce,{width:22})})}),e.jsx(N,{title:"Delete",children:e.jsx(h,{color:"error",onClick:()=>J(t.seq),children:e.jsx(de,{width:22})})})]}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:t.cobrand_id})}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:t.package_id})}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:t.package_name})}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:t.country})}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:T(t.days)})}),e.jsx(s,{children:e.jsx(o,{variant:"caption",children:T(t.quota)})}),e.jsx(s,{children:e.jsxs(o,{variant:"caption",children:["IDR ",T(t.selling_price)]})}),e.jsx(s,{children:e.jsx(pe,{color:t.status==="Ready"?"success":t.status==="Used"?"warning":t.status==="Close"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})})]},r)),w>0&&e.jsx(P,{style:{height:53*w},children:e.jsx(s,{colSpan:9})})]}),e.jsx(G,{children:e.jsx(P,{children:e.jsx(me,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:9,count:g.length,rowsPerPage:m,page:j,SelectProps:{native:!0},onPageChange:O,onRowsPerPageChange:H,ActionsComponent:fe})})})]})})]})}),e.jsxs(he,{open:_,onClose:L,children:[e.jsx(ue,{children:"Confirm Delete"}),e.jsxs(xe,{children:["Are you sure you want to delete selected product SEQ ? ",B]}),e.jsxs(je,{children:[e.jsx(k,{variant:"contained",onClick:L,children:"Cancel"}),e.jsx(k,{color:"error",variant:"outlined",onClick:V,children:"Delete"})]})]})]})};export{qt as default};
