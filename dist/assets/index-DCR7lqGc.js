import{r as e,j as q}from"./index-bBoaL7NX.js";import{i as r}from"./axios-MmGZYXFl.js";const x=e.createContext(void 0),E=({children:u})=>{const[i,o]=e.useState([]),[l,d]=e.useState(!0),[g]=e.useState(null);e.useEffect(()=>{(async()=>{try{const t=await r.get("product/partner");console.log("edit product partner: ",t.data),o(t.data),d(!1)}catch{d(!1)}})()},[]);const y=async a=>{try{await r.delete("/api/data/invoicedata/deleteinvoice",{data:{Seq:a}}),o(t=>t.filter(c=>c.seq!==a))}catch(t){console.error("Error deleting products:",t)}},m=async a=>{try{const t=await r.get("products/package/"+a.package_id);console.log("master product: ",t.data),a.package_name=t.data.package_name,a.country=t.data.country,a.days=t.data.days,a.quota=t.data.quota,a.status=t.data.status;const s=(await r.post("product/partner",a)).data;o(n=>[...n,s])}catch(t){console.error("Error adding products:",t)}},f=async a=>{try{const t=a.seq,s=(await r.put("product/partner/salling/"+t,a)).data;o(n=>n.map(p=>p.seq===s.seq?s:p))}catch(t){console.error("Error updating product partner:",t)}};return q.jsx(x.Provider,{value:{products:i,loading:l,error:g,deleteProduct:y,addProduct:m,updateProduct:f},children:u})};export{x as P,E as a};
