import{r as x,e as L,y as U,j as e}from"./index-bBoaL7NX.js";import{B as q}from"./Breadcrumb-Db9PlBea.js";import{P as _}from"./PageContainer-ClH7HaBW.js";import{I as J,a as K}from"./index-KrFlOehc.js";import{C as j}from"./CustomFormLabel-DkCP5Nv8.js";import{C as Q}from"./CustomSelect-_oosuc7Q.js";import{C as m}from"./CustomTextField-nzkQUDrv.js";import{i as X,f as Y}from"./index-J11PKsb-.js";import{B as d}from"./Box-Cbtftx36.js";import{S as w}from"./Stack-DONMPCRZ.js";import{T as o}from"./Typography-B41TU7cT.js";import{B as y}from"./Button-2ihUhOt_.js";import{D as A}from"./Divider-4e_Zm7wz.js";import{M as I}from"./MenuItem-DBmnqxHM.js";import{G as v}from"./Grid2-CC46JW8y.js";import{P as Z}from"./Paper-CEo52ZYq.js";import{T as $}from"./TableContainer-OLbhJ7zr.js";import{T as ee,a as te,b as B,c as l,d as re}from"./TableRow-Zqkg4FIQ.js";import{T as D}from"./Tooltip-CRAcMsX-.js";import{I as F}from"./IconButton-6ozhzS-w.js";import{I as ie}from"./IconSquareRoundedPlus-DLl9zGd-.js";import{I as se}from"./IconTrash-B1FRgie-.js";import{A as oe}from"./Alert-CbLSE_hz.js";import{B as ne}from"./BlankCard-BfHU7njI.js";import{C as ae}from"./CardContent-TrRQSIz8.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlot-C2y4Okaq.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./index-DT2YvziZ.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Popper-ppbRY3WN.js";import"./Close-BajIXLAg.js";import"./Card-DDyARx6g.js";const le=()=>{const{invoices:c,updateInvoice:W}=x.useContext(J),[z,S]=x.useState(!1),[P,f]=x.useState(null),[k,p]=x.useState(!1),[i,n]=x.useState(null),g=L().pathname.split("/").pop();x.useEffect(()=>{if(c.length>0)if(g){const t=c.find(r=>r.billFrom===g);t?(f(t),n({...t}),p(!0)):(f(c[0]),n({...c[0]}),p(!0))}else f(c[0]),n({...c[0]}),p(!0)},[g,c]);const O=U(),M=async()=>{try{await W(i),f({...i}),p(!1),S(!0),O("/apps/invoice/list")}catch(t){console.error("Error updating invoice:",t)}setTimeout(()=>{S(!1)},5e3)},N=()=>{p(!1)},C=(t,r,s)=>{const a=[...i.orders];a[t][r]=s,(r==="unitPrice"||r==="units")&&(a[t].unitTotalPrice=a[t].unitPrice*a[t].units);const T={...i,orders:a,totalCost:h(a),vat:u(a),grandTotal:b(h(a),u(a))};n(T)},G=()=>{const t={itemName:"",unitPrice:0,units:0,unitTotalPrice:0,vat:0},r=[...i.orders,t],s={...i,orders:r,totalCost:h(r),vat:u(r),grandTotal:b(h(r),u(r))};n(s)},R=t=>{const r=i.orders.filter((a,T)=>T!==t),s={...i,orders:r,totalCost:h(r),vat:u(r),grandTotal:b(h(r),u(r))};n(s)},h=t=>t.reduce((r,s)=>r+s.unitTotalPrice,0),u=t=>t.reduce((r,s)=>r+s.units,0),b=(t,r)=>t+=t*r/100;if(!P)return e.jsx("div",{children:"Please select an invoice."});const E=P.orderDate,V=X(new Date(E))?new Date(E):new Date,H=Y(V,"EEEE, MMMM dd, yyyy");return e.jsxs(d,{children:[e.jsxs(w,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(o,{variant:"h5",children:["# ",i.id]}),e.jsx(d,{display:"flex",gap:1,children:k?e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"contained",color:"primary",onClick:M,children:"Save"}),e.jsx(y,{variant:"outlined",color:"error",onClick:N,children:"Cancel"})]}):e.jsx(y,{variant:"contained",color:"info",onClick:()=>p(!0),children:"Edit Invoice"})})]}),e.jsx(A,{}),e.jsxs(w,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(d,{children:[e.jsx(j,{htmlFor:"demo-simple-select",children:"Order Status"}),e.jsxs(Q,{value:i.status,onChange:t=>n({...i,status:t.target.value}),children:[e.jsx(I,{value:"Pending",children:"Pending"}),e.jsx(I,{value:"Delivered",children:"Delivered"}),e.jsx(I,{value:"Shipped",children:"Shipped"})]})]}),e.jsxs(d,{textAlign:"right",children:[e.jsx(j,{htmlFor:"demo-simple-select",children:"Order Date"}),e.jsxs(o,{variant:"body1",children:[" ",H]})]})]}),e.jsx(A,{}),e.jsxs(v,{container:!0,spacing:3,mb:4,children:[e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(j,{children:"Bill From"}),e.jsx(m,{value:i.billFrom,onChange:t=>n({...i,billFrom:t.target.value}),fullWidth:!0})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(j,{sx:{mt:{xs:0,sm:3}},children:"Bill To"}),e.jsx(m,{value:i.billTo,onChange:t=>n({...i,billTo:t.target.value}),fullWidth:!0})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(j,{sx:{mt:0},children:"From Address"}),e.jsx(m,{value:i.billFromAddress,onChange:t=>n({...i,billFromAddress:t.target.value}),fullWidth:!0})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(j,{sx:{mt:0},children:"Bill To Address"}),e.jsx(m,{value:i.billToAddress,onChange:t=>n({...i,billToAddress:t.target.value}),fullWidth:!0})]})]}),e.jsx(Z,{variant:"outlined",children:e.jsx($,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(B,{children:[e.jsx(l,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Item Name"})}),e.jsx(l,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),e.jsx(l,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Units"})}),e.jsx(l,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),e.jsx(l,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Action"})})]})}),e.jsx(re,{children:i.orders.map((t,r)=>e.jsxs(B,{children:[e.jsx(l,{children:e.jsx(m,{type:"text",value:t.itemName,onChange:s=>C(r,"itemName",s.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(m,{type:"number",value:t.unitPrice,onChange:s=>C(r,"unitPrice",parseFloat(s.target.value)),fullWidth:!0})}),e.jsx(l,{children:e.jsx(m,{type:"number",value:t.units,onChange:s=>C(r,"units",parseInt(s.target.value)),fullWidth:!0})}),e.jsx(l,{children:e.jsx(o,{variant:"body1",children:t.unitTotalPrice})}),e.jsxs(l,{children:[e.jsx(D,{title:"Add Item",children:e.jsx(F,{onClick:G,color:"primary",children:e.jsx(ie,{width:22})})}),e.jsx(D,{title:"Delete Item",children:e.jsx(F,{color:"error",onClick:()=>R(r),children:e.jsx(se,{width:22})})})]})]},r))})]})})}),e.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"Sub Total:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:i.totalCost})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"VAT:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:i.vat})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"Grand Total:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:i.grandTotal})]})]}),z&&e.jsx(oe,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice data updated successfully."})]})},de=[{to:"/",title:"Home"},{title:"Invoice Edit"}],Ct=()=>e.jsx(K,{children:e.jsxs(_,{title:"Edit Invoice",description:"this is Edit Invoice",children:[e.jsx(q,{title:"Edit Invoice",items:de}),e.jsx(ne,{children:e.jsx(ae,{children:e.jsx(le,{})})})]})});export{Ct as default};
