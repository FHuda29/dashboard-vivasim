import{R as l,r as m,y as M,z as p,j as e}from"./index-D0CpDmcp.js";import{B as G}from"./Breadcrumb-BVcp9-n_.js";import{P as V}from"./PageContainer-GyGJwSoy.js";import{U as O,V as H,a as J,b as $}from"./index-1C-81okO.js";import{C as c}from"./CustomFormLabel-DDI7DE8r.js";import{C as v}from"./CustomTextField-Cjc4ANgr.js";import{A as K}from"./apiConstants-ChAepINk.js";import{C as h}from"./CustomSelect-CExbCVLD.js";import{B as C}from"./Box-YfWKO8y5.js";import{S as Q}from"./Stack-Br4H6Iex.js";import{T as X}from"./Typography-CxjCbjeZ.js";import{B as w}from"./Button-CgUWpLWI.js";import{D as Y}from"./Divider-cwsqb4Sr.js";import{G as n}from"./Grid2-B3gzDQ3y.js";import{I as Z}from"./InputAdornment-DuPHhOrK.js";import{I as ee}from"./IconButton-BxWHF3Dm.js";import{M as x}from"./MenuItem-CuGaY2Hq.js";import{A as se}from"./Alert-GQVafBkl.js";import{B as te}from"./BlankCard-C5pX7qij.js";import{C as re}from"./CardContent-B3dzlDvA.js";import"./Paper-DYTAYSZ1.js";import"./useSlotProps-BSM9QyQs.js";import"./Link-Bnmvu_Gi.js";import"./IconCircle-D7zSMm9k.js";import"./createReactComponent-3iThfHP-.js";import"./TextField-BL7FkBIN.js";import"./useSlot-CFWOFHMb.js";import"./useId-BnzzJGZL.js";import"./Select-DUwfbIlc.js";import"./Menu-TWYswZS4.js";import"./Popover-BjLg-pXP.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CRn5r_sP.js";import"./utils-knGZQcB_.js";import"./getReactElementRef-BjzLCeGl.js";import"./mergeSlotProps-EoW_Nak3.js";import"./Modal-BGPPYg_F.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-B-3ZW63z.js";import"./List-D2v3D0a6.js";import"./utils-iop7lDec.js";import"./useControlled-DdQeg7Rb.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CdybHpQR.js";import"./FormControl-Ds0TTNG5.js";import"./createStack-D1qoiK_y.js";import"./CircularProgress-DwEGvCDN.js";import"./dividerClasses-Cmg2xQcr.js";import"./listItemTextClasses-IyJ_HmtO.js";import"./Close-DI9m-hsf.js";import"./Card-CBAn0QXF.js";const u=K.apiUrl,oe=()=>{const[S,b]=l.useState([]),[y,U]=l.useState([]),[D,f]=l.useState([]),[P,A]=l.useState(""),[ie,L]=l.useState(""),{addUser:B,users:d}=m.useContext(O),[F,j]=m.useState(!1),_=M(),[o,i]=m.useState({seq:0,user_name:"",session_name:"",password:"",session_level:"partner",blocked:"N",failed:0}),[g,I]=m.useState(!1),q=()=>{I(s=>!s)},N=s=>{s.preventDefault()};m.useEffect(()=>{const s=localStorage.getItem("data_success_login");if(s){const t=JSON.parse(s);console.log("session_name:",t.session_name),console.log("session_level:",t.session_level),A(t.session_level),L(t.session_name),i(r=>({...r,session_name:t.session_name})),t.session_level.toLowerCase()==="partner"?(E(t.session_name),R("AGENT")):(z(),T())}if(d.length>0){const t=d[d.length-1].seq;i(r=>({...r,seq:t+1}))}else i(t=>({...t,seq:1}))},[d]);const a=s=>{const{name:t,value:r}=s.target;i(W=>({...{...W,[t]:r}}))},k=async s=>{s.preventDefault();try{await B(o),i({seq:0,user_name:"",session_name:"",password:"",session_level:"PARTNER",blocked:"N",failed:0}),j(!0),setTimeout(()=>{j(!1)},5e3),_("/user/list")}catch(t){console.error("Error adding user:",t)}},z=async()=>{let s=u+"partners";p.get(s).then(t=>{b(t.data)}).catch(t=>{console.log(t)})},E=async s=>{let t=u+"agents/cobrand/"+s;p.get(t).then(r=>{U(r.data)}).catch(r=>{console.log(r)})},T=async()=>{let s=u+"levels";p.get(s).then(t=>{f(t.data)}).catch(t=>{console.log(t)})},R=async s=>{let t=u+"levels/code/"+s;p.get(t).then(r=>{f(r.data)}).catch(r=>{console.log(r)})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:k,children:e.jsxs(C,{children:[e.jsxs(Q,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(X,{variant:"h5",children:["# ",o.seq]}),e.jsxs(C,{display:"flex",gap:1,children:[e.jsx(w,{variant:"outlined",color:"error",onClick:()=>{_("/user/list")},children:"Cancel"}),e.jsx(w,{type:"submit",variant:"contained",color:"primary",children:"Save User"})]})]}),e.jsx(Y,{}),e.jsxs(n,{container:!0,spacing:3,mb:4,children:[e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userName",children:"User Name"}),e.jsx(v,{id:"user_name",name:"user_name",onChange:a,value:o.user_name,fullWidth:!0})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userPass",sx:{mt:0},children:"User Password"}),e.jsx(v,{id:"password",name:"password",type:g?"text":"password",value:o.password,onChange:a,fullWidth:!0,InputProps:{endAdornment:e.jsx(Z,{position:"end",children:e.jsx(ee,{"aria-label":"toggle password visibility",onClick:q,onMouseDown:N,edge:"end",children:g?e.jsx(H,{}):e.jsx(J,{})})})}})]}),P.toLowerCase()==="partner"?e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userID",sx:{mt:{xs:0,sm:3}},children:"Agent ID"}),e.jsx(h,{id:"session_name",name:"session_name",value:o.session_name,onChange:a,fullWidth:!0,children:y.map(s=>e.jsx(x,{value:s.agent_code,children:s.agent_code},s.seq))})]}):e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userID",sx:{mt:{xs:0,sm:3}},children:"Partner"}),e.jsx(h,{id:"session_name",name:"session_name",value:o.session_name,onChange:a,fullWidth:!0,children:S.map(s=>e.jsx(x,{value:s.cobrand_id,children:s.cobrand_id},s.seq))})]}),e.jsxs(n,{size:{xs:12,sm:12},children:[e.jsx(c,{htmlFor:"userLevel",sx:{mt:0},children:"User Level"}),e.jsx(h,{id:"session_level",name:"session_level",value:o.session_level,onChange:a,fullWidth:!0,children:D.map(s=>e.jsx(x,{value:s.level_id,children:s.level_name},s.seq))})]})]}),F&&e.jsx(se,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Users added successfully."})]})})})},ne=[{to:"/",title:"Home"},{title:"User Create"}],ls=()=>e.jsx($,{children:e.jsxs(V,{title:"Create User",description:"this is Create User",children:[e.jsx(G,{title:"Create User",items:ne}),e.jsx(te,{children:e.jsx(re,{children:e.jsx(oe,{})})})]})});export{ls as default};
