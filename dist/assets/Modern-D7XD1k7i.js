import{y as z,r,j as e,R as p}from"./index-bBoaL7NX.js";import{P as k}from"./PageContainer-ClH7HaBW.js";import{T as D}from"./TopCards-DqZEsuDT.js";import{n as W}from"./Utils-DZtz8wsc.js";import{j as A}from"./index-VWaDGczM.js";import{i as w}from"./axios-MmGZYXFl.js";import{G as c}from"./Grid2-CC46JW8y.js";import{T as o}from"./Typography-B41TU7cT.js";import{T as R}from"./TableContainer-OLbhJ7zr.js";import{T as M,a as U,b,c as i,d as E}from"./TableRow-Zqkg4FIQ.js";import{C as N}from"./Chip-Bm7HxxC0.js";import{S as F}from"./Snackbar-D4AkOAw5.js";import{A as H}from"./Alert-CbLSE_hz.js";import{A as O}from"./AlertTitle-DH5tgRjf.js";import{B as q}from"./Box-Cbtftx36.js";import"./Paper-CEo52ZYq.js";import"./icon-favorites-mTE0PuCD.js";import"./icon-dd-invoice-B8OwCHiP.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./styled-oSX1ZV8o.js";import"./isMuiElement-CYEUdTOG.js";import"./useThemeProps-BUO-Zg8Q.js";import"./useSlot-C2y4Okaq.js";import"./getReactElementRef-bhjrj0fa.js";import"./ownerDocument-DW-IO8s5.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";import"./useId-BgKtfLA5.js";import"./CircularProgress-BIjyWvHZ.js";const I=()=>{const d=z(),[v,f]=r.useState(""),[y,m]=r.useState(""),[L,_]=r.useState("");r.useEffect(()=>{const t=localStorage.getItem("token");if(t){const s=A(t);if(console.log("decoded: ",s),f(s.user_name),m(s.session_level),_(s.session_name),s.session_level.toLowerCase()==="partner"||s.session_level.toLowerCase()==="partner-admin"){const a=s.session_name.split("-")[0];u(a)}else s.session_level.toLowerCase()==="agent-manager"||s.session_level.toLowerCase()==="agent-admin"?S(s.session_name):T()}else d("/auth/login")},[]);const S=async t=>{let s="inventory/summary/agent/"+t;w.get(s).then(a=>{j(a.data)}).catch(a=>{a.response&&a.response.status===403||a.response.status===401?d("/auth/login"):console.log(a)})},u=async t=>{let s="inventory/summary/partner/"+t;w.get(s).then(a=>{j(a.data)}).catch(a=>{a.response&&a.response.status===403||a.response.status===401?d("/auth/login"):console.log(a)})},T=async()=>{w.get("inventory/summary/all").then(s=>{j(s.data)}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?d("/auth/login"):console.log(s)})},[x,j]=r.useState([]),l=x,[h,n]=r.useState(0),[g,G]=r.useState(10),C=h>0?Math.max(0,(1+h)*g-l.length):0,P=()=>{let t=0;return l.forEach(async s=>{t=s.quantity+t}),t};return e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{size:{xs:12},children:e.jsx(o,{variant:"subtitle2",fontSize:14,fontWeight:"500",children:"Inventory Summary"})}),e.jsx(c,{size:{xs:12},children:e.jsx(R,{children:e.jsxs(M,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(U,{children:e.jsxs(b,{children:[e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:"Seq"})}),e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:"Partner ID"})}),e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:"Agent ID"})}),e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:"Sim Type"})}),e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:"Status"})}),e.jsx(i,{align:"center",children:e.jsx(o,{variant:"subtitle2",children:"Quantity"})})]})}),e.jsxs(E,{children:[(g>0?l.slice(h*g,h*g+g):l).map((t,s)=>e.jsxs(b,{children:[e.jsx(i,{children:e.jsx(o,{variant:"subtitle2",children:s+1})}),e.jsx(i,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.cobrand_id})}),e.jsx(i,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.agent_code})}),e.jsx(i,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:t.sim_type})}),e.jsx(i,{children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:e.jsx(N,{color:t.status==="Ready"?"success":t.status==="Open"?"warning":t.status=="Used"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})})}),e.jsx(i,{align:"right",children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"400",children:W(t.quantity)})})]},s)),e.jsxs(b,{style:{height:53*C},sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(i,{colSpan:5,children:e.jsx(o,{variant:"subtitle2",fontSize:16,fontWeight:"600",children:"Total"})}),e.jsx(i,{align:"right",children:e.jsx(o,{color:"textSecondary",variant:"subtitle2",fontWeight:"600",children:W(P())})})]}),C>0&&e.jsx(b,{style:{height:53*C},children:e.jsx(i,{colSpan:6})})]})]})})})]})},B=()=>{const[d,v]=r.useState(!1),f=()=>{v(!0)},y=m=>{m!=="clickaway"&&v(!1)};return r.useEffect(()=>{const m=setTimeout(()=>{f()},1500);return()=>clearTimeout(m)},[]),e.jsx(r.Fragment,{children:e.jsx(F,{open:d,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:6e3,onClose:y,children:e.jsxs(H,{onClose:y,severity:"info",variant:"filled",sx:{width:"100%",color:"white"},children:[e.jsx(O,{children:"Welcome To Vivasim"}),"Dashboard manage SIM and e-SIM"]})})})},we=()=>{const d=z(),[v,f]=p.useState(""),[y,m]=p.useState(""),[L,_]=p.useState(""),[S,u]=p.useState(!1),[T,x]=p.useState(!1),[j,l]=p.useState("");return r.useEffect(()=>{const h=localStorage.getItem("token");if(h)try{const n=A(h);if(console.log("decoded: ",n),console.log("user_name:",n.user_name),console.log("session_name:",n.session_name),console.log("session_level:",n.session_level),console.log("last_login_time:",n.last_login_time),console.log("blocked:",n.blocked),f(n.user_name),m(n.session_level),_(n.session_name),n.session_level.toLowerCase()==="partner"||n.session_level.toLowerCase()==="partner-admin"){l("Partner");const g=n.session_name.split("-")[0];u(!0),x(!1)}else n.session_level.toLowerCase()==="agent-manager"?(l("Agent Manager"),u(!1),x(!0)):n.session_level.toLowerCase()==="agent-admin"?(l("Agent Admin"),u(!1),x(!0)):(l("Head Office"),u(!1),x(!1))}catch(n){console.error("Invalid token:",n)}else d("/auth/login")},[]),e.jsx(k,{title:"Main Dashboard",description:"this is Main Dashboard page",children:e.jsxs(q,{children:[e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{size:{xs:12},children:e.jsxs(o,{variant:"subtitle2",fontSize:20,fontWeight:"600",children:["Welcome to dashboard -  ",j]})}),T?e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(I,{})}):S?e.jsx(e.Fragment,{children:e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(I,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(D,{})}),e.jsx(c,{size:{xs:12,lg:12},children:e.jsx(I,{})})]})]}),e.jsx(B,{})]})})};export{we as default};
