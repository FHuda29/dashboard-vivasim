import{R as C,r as c,y as oe,j as e}from"./index-bBoaL7NX.js";import{B as ie}from"./Breadcrumb-Db9PlBea.js";import{P as ne}from"./PageContainer-ClH7HaBW.js";import{B as de}from"./BlankCard-BfHU7njI.js";import{C as d}from"./CustomFormLabel-DkCP5Nv8.js";import{C as h}from"./CustomSelect-_oosuc7Q.js";import{C as v}from"./CustomTextField-nzkQUDrv.js";import{g as ce,c as E}from"./Utils-DZtz8wsc.js";import{i as b}from"./axios-MmGZYXFl.js";import{j as ue}from"./index-VWaDGczM.js";import{C as pe}from"./CardContent-TrRQSIz8.js";import{B as O}from"./Box-Cbtftx36.js";import{S as me}from"./Stack-DONMPCRZ.js";import{T as ge}from"./Typography-B41TU7cT.js";import{B}from"./Button-2ihUhOt_.js";import{D as he}from"./Divider-4e_Zm7wz.js";import{G as s}from"./Grid2-CC46JW8y.js";import{R as W}from"./RadioGroup-COzkG0Xs.js";import{F as y}from"./FormControlLabel-qTc2OSFR.js";import{R as j}from"./Radio-GSiGeisI.js";import{M as x}from"./MenuItem-DBmnqxHM.js";import{A as be}from"./Alert-CbLSE_hz.js";import"./Paper-CEo52ZYq.js";import"./useSlotProps-D8Vfx1ig.js";import"./Link-2pHd2OFC.js";import"./IconCircle-RJ076v1n.js";import"./createReactComponent-BVlLIvSm.js";import"./Card-DDyARx6g.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlot-C2y4Okaq.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./mergeSlotProps-9a9CFyBb.js";import"./Modal-B5yRmzaP.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./useControlled-B6T_fxKa.js";import"./useId-BgKtfLA5.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./TextField-CNoxaAXv.js";import"./FormControl-BPBqqdCO.js";import"./isMuiElement-CYEUdTOG.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./CircularProgress-BIjyWvHZ.js";import"./dividerClasses-D6e-UzmO.js";import"./FormGroup-CsISzJoH.js";import"./SwitchBase-DqWPx54W.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Close-BajIXLAg.js";import"./IconButton-6ozhzS-w.js";const xe=[{to:"/",title:"Home"},{title:"Order"}],_e=[{id:0,value:"500",label:"500Mb"},{id:1,value:"1000",label:"1Gb"},{id:2,value:"2000",label:"2Gb"},{id:3,value:"3000",label:"3Gb"},{id:4,value:"5000",label:"5Gb"}],ve=[{id:0,value:"3Gb",label:"3Gb"},{id:1,value:"5Gb",label:"5Gb"},{id:2,value:"6Gb",label:"6Gb"},{id:3,value:"7Gb",label:"7Gb"},{id:4,value:"10Gb",label:"10Gb"},{id:5,value:"15Gb",label:"15Gb"},{id:6,value:"20Gb",label:"20Gb"},{id:7,value:"30Gb",label:"30Gb"}],ye=[{id:0,value:"1",label:"1 day"},{id:1,value:"2",label:"2 day"},{id:2,value:"3",label:"3 day"},{id:3,value:"4",label:"4 day"},{id:4,value:"5",label:"5 day"},{id:5,value:"6",label:"6 day"},{id:6,value:"7",label:"7 day"},{id:7,value:"8",label:"8 day"},{id:8,value:"10",label:"10 day"},{id:9,value:"12",label:"12 day"},{id:10,value:"15",label:"15 day"},{id:11,value:"20",label:"20 day"},{id:12,value:"30",label:"30 day"}],je=[{id:0,value:"1",label:"1"},{id:1,value:"2",label:"2"},{id:2,value:"3",label:"3"},{id:3,value:"4",label:"4"},{id:4,value:"5",label:"5"},{id:5,value:"6",label:"6"},{id:6,value:"7",label:"7"},{id:7,value:"8",label:"8"},{id:8,value:"9",label:"9"},{id:9,value:"10",label:"10"},{id:10,value:"11",label:"11"},{id:11,value:"12",label:"12"},{id:12,value:"13",label:"13"},{id:13,value:"14",label:"14"},{id:14,value:"15",label:"15"},{id:15,value:"16",label:"16"},{id:16,value:"17",label:"17"},{id:17,value:"18",label:"18"},{id:18,value:"19",label:"19"},{id:19,value:"20",label:"20"},{id:20,value:"21",label:"21"},{id:21,value:"22",label:"22"},{id:22,value:"23",label:"23"},{id:23,value:"24",label:"24"},{id:24,value:"25",label:"25"},{id:25,value:"26",label:"26"},{id:26,value:"27",label:"27"},{id:27,value:"28",label:"28"},{id:28,value:"29",label:"29"},{id:29,value:"30",label:"30"}],Aa=()=>{const[A,M]=C.useState([]),[fe,ke]=C.useState([]),[Ce,R]=c.useState(""),[S,T]=c.useState(""),[f,L]=c.useState(""),[U,$]=c.useState(""),[P,G]=c.useState(!0),[Q,Se]=c.useState(!1),p=oe(),[t,_]=c.useState({seq:0,nama_pengguna:"",telp_pengguna:"",email_pengguna:"",agent_name:"",type:"",package_type:"",country:"ASIA16",days:0,fup:"",quota:"",quantity:1,product_id:"",product_price:0});c.useEffect(()=>{const a=localStorage.getItem("token");if(a){const l=ue(a);T(l.user_name),R(l.session_level),$(l.session_name),H(l.session_name);const r=l.session_name.split("-")[0];L(r),J(r),_(u=>({...u,cobrand_id:l.session_name}))}else p("/auth/login");V()},[]);const H=async a=>{let l="agents/code/"+a;b.get(l).then(r=>{_(u=>({...u,agent_name:r.data[0].name}))}).catch(r=>{r.response&&r.response.status===403||r.response.status===401?p("/auth/login"):console.log(r)})},J=async a=>{let l="product/partner/cobrand/"+a;b.get(l).then(r=>{console.log("list_product_partner : ",r.data)}).catch(r=>{r.response&&r.response.status===403||r.response.status===401?p("/auth/login"):console.log(r)})},F=async(a,l,r)=>{let u="product/partner/"+a+"/"+l+"/"+r+"/"+f;b.get(u).then(async o=>{const N=f+ce(),ee=E(),ae=U;console.log("list_product_partner_detail : ",o.data),_(i=>({...i,product_id:o.data[0].package_id,product_price:o.data[0].selling_price}));const te=o.data[0].package_id,I=o.data[0].selling_price,le=o.data[0].package_name,re=o.data[0].cobrain_price,z=t.quantity*I;console.log("total_product_price : ",z);let m=[];for(let i=0;i<k.length;i++)m[i]=t[`ccid_${i+1}`];console.log("ccid generate: ",m);let g="";for(let i=0;i<m.length;i++)m[i]!=""?g+=m[i]+",":m[i]="";g=g.substring(0,g.length-1),console.log("ccid : ",g);const D={seq:0,order_id:N,order_date:ee,order_type:t.type,order_status:"New",order_customer_name:t.nama_pengguna,order_contact_phone:t.telp_pengguna,order_contact_wa:t.telp_pengguna,order_contact_email:t.email_pengguna,order_agent_code:ae,order_agent_name:t.agent_name,order_product:te,order_country_code:t.country,order_fup:t.fup,order_quota:t.quota,order_days:t.days,order_ccid:g,order_qty:t.quantity,order_product_price:I,order_cobrain_price:re,order_product_total_price:z,package_name:le,cobrand_id:f,order_source:"Web"};console.log("dataOrder : ",D),await X(D);const se=E();await Y({seq:0,order_id:N,event_name:"New Order",event_date:se,username:S}),p("/order/list")}).catch(o=>{alert("Product not found")})},n=a=>{const{name:l,value:r}=a.target;_(u=>{const o={...u,[l]:r};return o.package_type==="1"||o.package_type==="2"?G(!1):G(!0),{...o}})},K=async a=>{a.preventDefault();try{console.log("data : ",t),t.package_type==="1"?F(t.country,t.days,t.fup):t.package_type==="2"&&F(t.country,t.days,t.quota)}catch(l){console.error("Error adding orders:",l)}},V=async()=>{b.get("country").then(l=>{M(l.data)}).catch(l=>{l.response&&l.response.status===403||l.response.status===401?p("/auth/login"):console.log(l)})},X=async a=>{try{const r=(await b.post("orders",a)).data}catch(l){console.error("Error adding orders:",l)}},Y=async a=>{try{const r=(await b.post("order/event",a)).data}catch(l){console.error("Error adding order events :",l)}},Z=Array.from({length:30},(a,l)=>l+1),q=3,k=Z.slice(0,t.quantity),w=[];for(let a=0;a<k.length;a+=q)w.push(k.slice(a,a+q));return e.jsxs(ne,{title:"Create Simcard / eSIM",description:"this is Create Simcard/eSIM",children:[e.jsx(ie,{title:"Create Simcard / eSIM",items:xe}),e.jsx(de,{children:e.jsx(pe,{children:e.jsx("form",{onSubmit:K,children:e.jsxs(O,{children:[e.jsxs(me,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(ge,{variant:"h5",children:["#USER: ",S]}),e.jsxs(O,{display:"flex",gap:1,children:[e.jsx(B,{variant:"outlined",color:"error",onClick:()=>{p("/order/list")},children:"Cancel"}),e.jsx(B,{type:"submit",variant:"contained",color:"primary",children:"Save Record"})]})]}),e.jsx(he,{}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nama Pengguna"}),e.jsx(v,{id:"nama_pengguna",name:"nama_pengguna",value:t.nama_pengguna,onChange:n,fullWidth:!0})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Nomor Telepon Pengguna"}),e.jsx(v,{id:"telp_pengguna",name:"telp_pengguna",value:t.telp_pengguna,onChange:n,fullWidth:!0,type:"phone"})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Email Pengguna"}),e.jsx(v,{id:"email_pengguna",name:"email_pengguna",value:t.email_pengguna,onChange:n,fullWidth:!0,type:"email"})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Type"}),e.jsxs(W,{"aria-labelledby":"demo-radio-buttons-group-label",value:t.type,onChange:n,id:"type",name:"type",row:!0,children:[e.jsx(y,{value:"Simcard",control:e.jsx(j,{}),label:"Simcard"}),e.jsx(y,{value:"eSIM",control:e.jsx(j,{}),label:"eSIM"})]})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Country"}),e.jsx(h,{id:"country",name:"country",value:t.country,onChange:n,fullWidth:!0,children:A.map(a=>e.jsx(x,{value:a.country_code,children:a.country_list},a.seq))})]}),e.jsx(s,{size:{xs:12,sm:4},children:"Â "}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Product Type"}),e.jsxs(W,{"aria-labelledby":"radio-buttons-group-package",value:t.package_type,onChange:n,id:"package_type",name:"package_type",row:!0,children:[e.jsx(y,{value:"1",control:e.jsx(j,{}),label:"Unlimited"}),e.jsx(y,{value:"2",control:e.jsx(j,{}),label:"Quota Based"})]})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Product Package"}),t.package_type==="1"?e.jsx(h,{id:"fup",name:"fup",value:t.fup,onChange:n,fullWidth:!0,children:_e.map(a=>e.jsx(x,{value:a.value,children:a.label},a.id))}):t.package_type==="2"?e.jsx(h,{id:"quota",name:"quota",value:t.quota,onChange:n,fullWidth:!0,children:ve.map(a=>e.jsx(x,{value:a.value,children:a.label},a.id))}):e.jsx(h,{id:"package",name:"package",fullWidth:!0,disabled:!0,children:e.jsx(x,{value:"",children:"Select Package"})})]}),e.jsxs(s,{size:{xs:12,sm:4},children:[e.jsx(d,{htmlFor:"Days",sx:{mt:{xs:0,sm:3}},children:"Days"}),e.jsx(h,{id:"days",name:"days",value:t.days,onChange:n,fullWidth:!0,disabled:P,children:ye.map(a=>e.jsx(x,{value:a.value,children:a.label},a.id))})]}),e.jsxs(s,{size:{xs:12,sm:2},children:[e.jsx(d,{htmlFor:"PackageName",sx:{mt:{xs:0,sm:3}},children:"Quantity"}),e.jsx(h,{id:"quantity",name:"quantity",value:t.quantity,onChange:n,fullWidth:!0,disabled:P,children:je.map(a=>e.jsx(x,{value:a.value,children:a.label},a.id))})]})]}),e.jsx(s,{size:{xs:12,sm:12},children:e.jsx(d,{htmlFor:"title_price",sx:{mt:3,mb:2},children:"ICCID - (eSIM tdk perlu di isi)"})}),w.map((a,l)=>e.jsx(s,{container:!0,spacing:2,children:a.map(r=>e.jsxs(C.Fragment,{children:[e.jsx(s,{size:{xs:12,sm:1},children:e.jsxs(d,{htmlFor:`ccid_${r}`,sx:{mt:1,textAlign:"center"},children:[r,"."]})}),e.jsx(s,{size:{xs:12,sm:3},children:e.jsx(v,{id:`ccid_${r}`,name:`ccid_${r}`,value:t[`ccid_${r}`]||"",onChange:n,fullWidth:!0,sx:{mt:1}})})]},r))},l)),Q&&e.jsx(be,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Order created successfully."})]})})})})]})};export{Aa as default};
