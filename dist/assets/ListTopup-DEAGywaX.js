import{y as E,r as c,j as e}from"./index-bBoaL7NX.js";import{T as K,L as k,F as B,K as A}from"./LastPage-CUO0XoGI.js";import{K as D}from"./KeyboardArrowRight-CL0uG8E4.js";import{P as z}from"./PageContainer-ClH7HaBW.js";import{P as U}from"./ParentCard-CFe-nEgX.js";import{B as N}from"./BlankCard-BfHU7njI.js";import{n as q}from"./Utils-DZtz8wsc.js";import{i as y}from"./axios-MmGZYXFl.js";import{j as H}from"./index-VWaDGczM.js";import{B as L}from"./Box-Cbtftx36.js";import{S as V}from"./Stack-DONMPCRZ.js";import{T as G}from"./TextField-CNoxaAXv.js";import{I as J}from"./InputAdornment-DDw9KCxJ.js";import{I as Q}from"./IconSearch-8WAl2z6L.js";import{T as W}from"./TableContainer-OLbhJ7zr.js";import{T as X,a as Y,b as C,c as n,d as Z}from"./TableRow-Zqkg4FIQ.js";import{T as i}from"./Typography-B41TU7cT.js";import{T as $}from"./Tooltip-CRAcMsX-.js";import{I as u}from"./IconButton-6ozhzS-w.js";import{I as ee}from"./IconEdit-BUB-FThl.js";import{C as te}from"./Chip-Bm7HxxC0.js";import{T as se}from"./TablePagination-DdevPbi4.js";import{u as ne}from"./Paper-CEo52ZYq.js";import"./createSvgIcon-DcL-YXBs.js";import"./mergeSlotProps-9a9CFyBb.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-CYEUdTOG.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./useId-BgKtfLA5.js";import"./useControlled-B6T_fxKa.js";import"./Card-DDyARx6g.js";import"./CardHeader-BGxrrKRe.js";import"./useSlot-C2y4Okaq.js";import"./Divider-4e_Zm7wz.js";import"./dividerClasses-D6e-UzmO.js";import"./CardContent-TrRQSIz8.js";import"./index-J11PKsb-.js";import"./index-DT2YvziZ.js";import"./apiConstants-C71iLEz3.js";import"./createStack-D5Eniu1T.js";import"./styled-oSX1ZV8o.js";import"./useThemeProps-BUO-Zg8Q.js";import"./Select-x3FgNbWv.js";import"./Menu-DsMCwLnz.js";import"./useSlotProps-D8Vfx1ig.js";import"./Popover-BZ_q2ihg.js";import"./isHostComponent-DVu5iVWx.js";import"./Grow-DbIyLDOd.js";import"./utils-fXVEFgwU.js";import"./getReactElementRef-bhjrj0fa.js";import"./Modal-B5yRmzaP.js";import"./Portal-PELJNkOL.js";import"./List-BNgu_2yQ.js";import"./utils-iop7lDec.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CaUBXsoR.js";import"./FormControl-BPBqqdCO.js";import"./createReactComponent-BVlLIvSm.js";import"./Popper-ppbRY3WN.js";import"./CircularProgress-BIjyWvHZ.js";import"./KeyboardArrowRight-BUHflnHK.js";import"./LastPage-CryT0fTs.js";import"./MenuItem-DBmnqxHM.js";import"./listItemTextClasses-DSEuY2ct.js";import"./Toolbar-BWjUcWdc.js";function ie(r){const p=ne(),{count:m,page:l,rowsPerPage:g,onPageChange:x}=r,I=o=>{x(o,0)},v=o=>{x(o,l-1)},P=o=>{x(o,l+1)},T=o=>{x(o,Math.max(0,Math.ceil(m/g)-1))};return e.jsxs(L,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:I,disabled:l===0,"aria-label":"first page",children:p.direction==="rtl"?e.jsx(k,{}):e.jsx(B,{})}),e.jsx(u,{onClick:v,disabled:l===0,"aria-label":"previous page",children:p.direction==="rtl"?e.jsx(D,{}):e.jsx(A,{})}),e.jsx(u,{onClick:P,disabled:l>=Math.ceil(m/g)-1,"aria-label":"next page",children:p.direction==="rtl"?e.jsx(A,{}):e.jsx(D,{})}),e.jsx(u,{onClick:T,disabled:l>=Math.ceil(m/g)-1,"aria-label":"last page",children:p.direction==="rtl"?e.jsx(B,{}):e.jsx(k,{})})]})}const vt=()=>{const r=E(),[p,m]=c.useState(""),[l,g]=c.useState(!1),[x,I]=c.useState(!1);c.useEffect(()=>{const t=localStorage.getItem("token");if(t){const s=H(t);if(s.session_level.toLowerCase()==="partner"||s.session_level.toLowerCase()==="partner-admin"){const a=s.session_name.split("-")[0];P(a)}else s.session_level.toLowerCase()==="agent-manager"||s.session_level.toLowerCase()==="agent-admin"?T(s.session_name):v()}else r("/auth/login")},[]);const v=async()=>{y.get("inventory").then(s=>{f(s.data)}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?r("/auth/login"):console.log(s)})},P=async t=>{let s="inventory/cobrand/"+t;y.get(s).then(a=>{f(a.data)}).catch(a=>{a.response&&a.response.status===403||a.response.status===401?r("/auth/login"):console.log(a)})},T=async t=>{let s="inventory/agent/"+t+"/status/Used";y.get(s).then(a=>{f(a.data)}).catch(a=>{a.response&&a.response.status===403||a.response.status===401?r("/auth/login"):console.log(a)})},[o,f]=c.useState([]),b=o,[j,S]=c.useState(0),[d,R]=c.useState(10),_=j>0?Math.max(0,(1+j)*d-b.length):0,w=(t,s)=>{S(s)},F=t=>{R(parseInt(t.target.value,10)),S(0)},M=t=>{console.log(t.target.value),m(t.target.value);const s=t.target.value;if(s.length!==0){let a="inventory/search?param="+s;y.get(a).then(h=>{f(h.data)}).catch(h=>{h.response&&h.response.status===403||h.response.status===401?r("/auth/login"):console.log(h)})}else v()},O=t=>{r("/topup/create/"+t)};return e.jsx(z,{title:"Inventory",description:"this is inventory page",children:e.jsxs(U,{title:"Inventory List",children:[e.jsx(L,{mb:2,children:e.jsx(V,{mt:3,justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},children:e.jsx(G,{id:"search",type:"text",size:"small",variant:"outlined",placeholder:"Search",value:p,onChange:M,InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(Q,{size:"16"})})}})})}),e.jsx(N,{children:e.jsx(W,{children:e.jsxs(X,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[e.jsx(Y,{children:e.jsxs(C,{children:[e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Action"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Seq"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"ICCID"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Sim Type"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Status"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Order ID"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Country"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Selling Price"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"In Date"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Out Date"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Partner"})}),e.jsx(n,{children:e.jsx(i,{variant:"subtitle2",children:"Agent"})})]})}),e.jsxs(Z,{children:[(d>0?b.slice(j*d,j*d+d):b).map((t,s)=>e.jsxs(C,{children:[e.jsx(n,{children:e.jsx($,{title:"Create Topup",children:e.jsx(u,{color:"primary",onClick:()=>O(t.iccid),children:e.jsx(ee,{width:22})})})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:s+1})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.iccid})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.sim_type})}),e.jsx(n,{children:e.jsx(te,{color:t.status==="Ready"?"success":t.status==="Open"?"warning":t.status=="Used"?"error":"secondary",sx:{borderRadius:"6px"},size:"small",label:t.status})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.order_id})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.country_id})}),e.jsx(n,{children:e.jsxs(i,{variant:"caption",children:["IDR ",q(t.selling_price)]})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.in_date})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.out_date})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.cobrand_id})}),e.jsx(n,{children:e.jsx(i,{variant:"caption",children:t.agent_code})})]},s)),_>0&&e.jsx(C,{style:{height:53*_},children:e.jsx(n,{colSpan:2})})]}),e.jsx(K,{children:e.jsx(C,{children:e.jsx(se,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:2,count:b.length,rowsPerPage:d,page:j,SelectProps:{native:!0},onPageChange:w,onRowsPerPageChange:F,ActionsComponent:ie})})})]})})})]})})};export{vt as default};
