import{r as o,j as r,aN as u,y as _}from"./index-pZ9xQgMg.js";import{B as w}from"./Breadcrumb-CRa5l2zq.js";import{P as D}from"./PageContainer-LYar8IhV.js";import{A as f}from"./apiConstants-ChAepINk.js";import{C as j}from"./CustomFormLabel-DQZmNrva.js";import{C as g}from"./CustomTextField-CVZyUcT3.js";import{B as P}from"./Box-DgOhk5yP.js";import{S as B}from"./Stack-DuXFRM8_.js";import{T as F}from"./Typography-PCIzasSl.js";import{B as b}from"./Button-DrpnHyAw.js";import{D as q}from"./Divider-BxeHuQda.js";import{G as h}from"./Grid2-TVAQUeLW.js";import{A as E}from"./Alert-XWH1BSQm.js";import{B as U}from"./BlankCard-jsHF22Za.js";import{C as A}from"./CardContent-DHXKlgZi.js";import"./Paper-Bglc4K2l.js";import"./useSlotProps-D9QVx9CU.js";import"./Link-DmIxGPWX.js";import"./IconCircle-CU5CO1wM.js";import"./createReactComponent-C7i1OeoA.js";import"./TextField-52YJDDYc.js";import"./useSlot-C-z2829C.js";import"./useId-DuuGdQhb.js";import"./Select-KnVOJfU6.js";import"./Menu-kcqCS8x-.js";import"./Popover-ti3EBHaH.js";import"./isHostComponent-DVu5iVWx.js";import"./ownerDocument-DW-IO8s5.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./Grow-CByEer0C.js";import"./utils--BW9XhXC.js";import"./getReactElementRef-BDXd3hfF.js";import"./mergeSlotProps-D2utqxEY.js";import"./Modal-ETINFcPv.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-HPxiTNUe.js";import"./List-BgcNoc8S.js";import"./utils-iop7lDec.js";import"./useControlled-kCJ_Peco.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D34Ydy4-.js";import"./FormControl-B2XRo0iR.js";import"./createStack-BEzwOkyd.js";import"./CircularProgress-KhQwCvJ5.js";import"./dividerClasses-BO-YFw3q.js";import"./Close-tbN14BDi.js";import"./IconButton-D8l5j-3s.js";import"./Card-Dnm4-j67.js";const v=o.createContext(void 0),I=({children:x})=>{const[i,m]=o.useState([]),[l,c]=o.useState(!0),[n]=o.useState(null);o.useEffect(()=>{(async()=>{try{const t=await u.get(f.apiUrl+"partners");m(t.data),c(!1)}catch{c(!1)}})()},[]);const p=async s=>{try{await u.delete(f.apiUrl+"partners",{data:{seq:s}}),m(t=>t.filter(e=>e.seq!==s))}catch(t){console.error("Error deleting products:",t)}},y=async s=>{try{console.log("newUser: ",s),console.log("json newUser: ",JSON.stringify(s));const e=(await u.post(f.apiUrl+"partners",s)).data;m(a=>[...a,e])}catch(t){console.error("Error adding users:",t)}},C=async s=>{try{const e=(await u.put("partners/updatepartner",s)).data;m(a=>a.map(d=>d.seq===e.seq?e:d))}catch(t){console.error("Error updating users:",t)}};return r.jsx(v.Provider,{value:{partners:i,loading:l,error:n,deleteUser:p,addPartner:y,updatePartner:C},children:x})},N=()=>{const{addPartner:x,partners:i}=o.useContext(v),[m,l]=o.useState(!1),c=_(),[n,p]=o.useState({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),[y,C]=o.useState(!1);o.useEffect(()=>{if(i.length>0){const e=i[i.length-1].seq;p(a=>({...a,seq:e+1}))}else p(e=>({...e,seq:1}))},[i]);const s=e=>{const{name:a,value:d}=e.target;p(S=>({...{...S,[a]:d}}))},t=async e=>{const a=localStorage.getItem("mode");e.preventDefault();try{await x(n),p({seq:0,master_id:"",cobrand_id:"",cobrand_name:"",pic:"",deposit:0,ar:0,payment_type:"Pascabayar"}),l(!0),setTimeout(()=>{l(!1)},5e3),a==="move_simcard"?(localStorage.removeItem("mode"),c("/inventory/movesim")):c("/partner/list")}catch(d){console.error("Error adding partner:",d)}};return r.jsx(r.Fragment,{children:r.jsx("form",{onSubmit:t,children:r.jsxs(P,{children:[r.jsxs(B,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[r.jsxs(F,{variant:"h5",children:["# ",n.seq]}),r.jsxs(P,{display:"flex",gap:1,children:[r.jsx(b,{variant:"outlined",color:"error",onClick:()=>{c("/partner/list")},children:"Cancel"}),r.jsx(b,{type:"submit",variant:"contained",color:"primary",children:"Save Partner"})]})]}),r.jsx(q,{}),r.jsxs(h,{container:!0,spacing:3,mb:4,children:[r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"cobrand_id",children:"Partner ID"}),r.jsx(g,{id:"cobrand_id",name:"cobrand_id",onChange:s,value:n.cobrand_id,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"cobrand_name",sx:{mt:{xs:0,sm:3}},children:"Partner Name"}),r.jsx(g,{id:"cobrand_name",name:"cobrand_name",value:n.cobrand_name,onChange:s,fullWidth:!0})]}),r.jsxs(h,{size:{xs:12,sm:12},children:[r.jsx(j,{htmlFor:"pic",sx:{mt:{xs:0,sm:3}},children:"Person In Charge"}),r.jsx(g,{id:"pic",name:"pic",value:n.pic,onChange:s,fullWidth:!0})]})]}),m&&r.jsx(E,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Users added successfully."})]})})})},T=[{to:"/",title:"Home"},{title:"Partner Create"}],Ar=()=>r.jsx(I,{children:r.jsxs(D,{title:"Partner User",description:"this is Create Partner",children:[r.jsx(w,{title:"Partner User",items:T}),r.jsx(U,{children:r.jsx(A,{children:r.jsx(N,{})})})]})});export{Ar as default};
