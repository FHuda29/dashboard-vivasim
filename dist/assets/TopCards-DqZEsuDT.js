import{y as C,r as i,j as a}from"./index-bBoaL7NX.js";import{n as y}from"./Utils-DZtz8wsc.js";import{I as M,a as T}from"./icon-favorites-mTE0PuCD.js";import{i as S}from"./icon-dd-invoice-B8OwCHiP.js";import{j}from"./index-VWaDGczM.js";import{i as l}from"./axios-MmGZYXFl.js";import{G as g}from"./Grid2-CC46JW8y.js";import{B as L}from"./Box-Cbtftx36.js";import{C as z}from"./CardContent-TrRQSIz8.js";import{T as r}from"./Typography-B41TU7cT.js";const B="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%233dd9eb'%20d='M11,18c-3.313,0-6,2.686-6,6c0,3.313,2.687,6,6,6c3.314,0,6-2.687,6-6C17,20.687,14.314,18,11,18'/%3e%3cpath%20fill='%233dd9eb'%20d='M37,5c-3.313,0-6,2.687-6,6c0,3.313,2.687,6,6,6c3.314,0,6-2.687,6-6C43,7.687,40.314,5,37,5'/%3e%3cpath%20fill='%233dd9eb'%20d='M37,31c-3.313,0-6,2.686-6,6c0,3.313,2.687,6,6,6c3.314,0,6-2.687,6-6C43,33.687,40.314,31,37,31'/%3e%3cpath%20fill='%236c19ff'%20d='M31.819,14.028L25.073,22h-8.415C16.88,22.626,17,23.299,17,24c0,0.701-0.12,1.374-0.341,2h8.414%20l6.746,7.973c0.688-1.175,1.765-2.095,3.053-2.584L28.62,24l6.251-7.389C33.583,16.123,32.507,15.202,31.819,14.028'/%3e%3cpath%20fill='%2300b3d7'%20d='M16.658,22H11v4h5.659C16.88,25.375,17,24.701,17,24C17,23.299,16.88,22.626,16.658,22'/%3e%3cpath%20fill='%2300b3d7'%20d='M35.474,9.708l-3.655,4.32c0.688,1.175,1.764,2.095,3.053,2.584l3.655-4.319L35.474,9.708'/%3e%3cpath%20fill='%2300b3d7'%20d='M34.872,31.389c-1.288,0.489-2.365,1.409-3.053,2.584l3.655,4.319l3.053-2.584L34.872,31.389'/%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%23ddbaff'%20d='M24,44L24,44c-8.216,0-15.137-6.14-16.116-14.297l-0.797-4.639C5.871,14.924,13.788,6,24,6h0%20c10.212,0,18.129,8.924,16.912,19.063l-0.797,4.639C39.137,37.86,32.216,44,24,44z'/%3e%3cpath%20fill='%236c19ff'%20d='M37.701,10.916c-0.825-1.117-1.787-2.133-2.858-3.017C31.912,5.474,28.145,4.003,24,4.003%20c-4.145,0-7.912,1.471-10.844,3.895c-0.554,0.458-1.084,0.951-1.58,1.485c-3.115,3.323-4.903,7.879-4.573,12.777%20c3.362-1.449,5.88-4.482,6.615-8.158h20.764c0.735,3.677,3.253,6.709,6.615,8.158C41.278,17.982,40.019,14.053,37.701,10.916z'/%3e%3cpath%20fill='%23ddbaff'%20d='M40,31H8c-1.657,0-3-1.343-3-3s1.343-3,3-3h32c1.657,0,3,1.343,3,3S41.657,31,40,31z'/%3e%3cpath%20fill='%232100c4'%20d='M37.701,13.913c-0.825-1.117-1.787-2.133-2.858-3.017C31.912,8.471,28.145,7,24,7%20c-4.145,0-7.912,1.471-10.844,3.895c-0.554,0.458-1.084,0.951-1.58,1.485c-3.115,3.323-4.903,7.879-4.573,12.777%20c3.362-1.449,5.88-4.482,6.615-8.158h20.764c0.735,3.677,3.253,6.709,6.615,8.158C41.278,20.979,40.019,17.05,37.701,13.913z'/%3e%3c/svg%3e",A="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%233dd9eb'%20d='M43,36H13V11h22c4.418,0,8,3.582,8,8V36z'/%3e%3cpath%20fill='%237debf5'%20d='M21,36H5V19c0-4.418,3.582-8,8-8l0,0c4.418,0,8,3.582,8,8V36z'/%3e%3cpath%20fill='%236c19ff'%20d='M21,36h5v8h-5V36z'/%3e%3cpolygon%20fill='%23eb0000'%20points='27,16%2027,20%2035,20%2035,24%2039,24%2039,16'/%3e%3crect%20width='8'%20height='3'%20x='9'%20y='20'%20fill='%233dd9eb'/%3e%3c/svg%3e",o=[{icon:I,title:"Partners",digits:"0",bgcolor:"primary"},{icon:M,title:"Agents",digits:"0",bgcolor:"warning"},{icon:A,title:"Total Deposits",digits:"0",bgcolor:"success"},{icon:T,title:"Total Base Price",digits:"0",bgcolor:"warning"},{icon:S,title:"Available Balance",digits:"0",bgcolor:"error"},{icon:B,title:"Inv Summary",digits:"0",bgcolor:"info"}],O=()=>{const n=C(),[P,h]=i.useState(""),[V,p]=i.useState(""),[H,f]=i.useState(""),[D,m]=i.useState(0),[E,u]=i.useState(0);i.useEffect(()=>{const e=localStorage.getItem("token");if(e){const t=j(e);console.log("decoded: ",t),h(t.user_name),p(t.session_level),f(t.session_name),t.session_level.toLowerCase()==="partner"||t.session_level.toLowerCase()==="partner-admin"?(t.session_name.split("-")[0],c(t.session_name)):t.session_level.toLowerCase()==="agent-manager"||t.session_level.toLowerCase()==="agent-admin"||v()}else n("/auth/login")},[]);const v=async()=>{l.get("dashboard/total/partner").then(t=>{const s=t.data[0];m(s.total_partner),o[0].digits=s.total_partner,c("1")}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?n("/auth/login"):console.log(t)})},c=async e=>{let t="dashboard/total/agent/"+e;l.get(t).then(s=>{const d=s.data[0];u(d.total_agent),o[1].digits=d.total_agent,b()}).catch(s=>{s.response&&s.response.status===403||s.response.status===401?n("/auth/login"):console.log(s)})},b=async()=>{l.get("dashboard/total/deposit").then(t=>{const s=t.data[0];o[2].digits=s.total_deposit,x()}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?n("/auth/login"):console.log(t)})},x=async()=>{l.get("dashboard/total/baseprice").then(t=>{const s=t.data[0];o[3].digits=s.total,_(),w()}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?n("/auth/login"):console.log(t)})},w=async()=>{l.get("dashboard/total/inventory").then(t=>{const s=t.data[0];o[5].digits=s.total_inventory}).catch(t=>{t.response&&t.response.status===403||t.response.status===401?n("/auth/login"):console.log(t)})},_=async()=>{const e=parseInt(o[2].digits)-parseInt(o[3].digits);o[4].digits=e.toString()};return a.jsx(g,{container:!0,spacing:3,children:o.map((e,t)=>a.jsx(g,{size:{xs:12,sm:4,lg:2},children:a.jsx(L,{bgcolor:e.bgcolor+".light",textAlign:"center",children:a.jsxs(z,{children:[a.jsx("img",{src:e.icon,alt:e.icon,width:"50"}),a.jsx(r,{color:e.bgcolor+".main",mt:1,variant:"subtitle1",fontWeight:600,children:e.title}),a.jsx(r,{color:e.bgcolor+".main",variant:"h4",fontWeight:600,children:y(e.digits)})]})})},t))})};export{O as T};
